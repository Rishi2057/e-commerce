(function ensightenInit(){var ensightenOptions = {client: "bestbuy", clientId: 2493, publishPath: "privacy_prod", bootstrapVersion: "v10", isPublic:0, serverComponentLocation: "nexus.ensighten.com/bestbuy/privacy_prod/serverComponent.php", staticJavascriptPath: "nexus.ensighten.com/bestbuy/privacy_prod/code/", ns: 'bby_prod_gateway', nexus:"nexus.ensighten.com", scUseCacheBuster: "true", enableTagAuditBeacon : "false", enablePagePerfBeacon : "false", registryNs : "ensBootstraps", generatedOn : "Fri May 02 20:34:09 GMT 2025", beaconSamplingSeedValue: 11, dataLayerName: "ensDataLayer"};
if ( !window[ensightenOptions.ns] ) {
window[ensightenOptions.registryNs]||(window[ensightenOptions.registryNs]={});
window[ensightenOptions.registryNs][ensightenOptions.ns]=window[ensightenOptions.ns]=function(l){function n(a){this.name="DependencyNotAvailableException";this.message="Dependency with id "+a+" is missing"}function p(a){this.name="BeaconException";this.message="There was an error during beacon initialization";a=a||{};this.lineNumber=a.lineNumber||a.line;this.fileName=a.fileName}function r(){for(var a=d.dataDefinitionIds.length,b=!0,e=0;e<a;e++){var f=d.dataDefinitions[d.dataDefinitionIds[e]];if(!f||
null==f.endRegistration){b=!1;break}}b&&d.callOnDataDefintionComplete()}var c={},d={};d.ensightenOptions=ensightenOptions;d.scDataObj={};const x=document.currentScript&&document.currentScript.src?(new URL(document.currentScript.src)).hostname:"";c.version="1.26.0";c.getDynamicDomain=function(){if(x)return x;for(var a=null,b=document.getElementsByTagName("script"),e=l.client+"/"+l.publishPath+"/Bootstrap.js",f=l.client+"/Bootstrap.js",g=0;g<b.length;g++)if(-1<b[g].src.indexOf(e)||"prod"==l.publishPath&&
-1<b[g].src.indexOf(f)){a=b[g];break}return a?(b=document.createElement("a"),b.href=a.getAttribute("src"),b.hostname):""};ensightenOptions.nexus=c.nexus=ensightenOptions.nexus||c.getDynamicDomain()||"nexus.ensighten.com";c.rand=-1;c.currSec=(new Date).getSeconds();c.options={interval:l.interval||100,erLoc:l.errorLocation||c.nexus+"/error/e.gif",scLoc:l.serverComponentLocation||c.nexus+"/"+l.client+"/serverComponent.php",sjPath:l.staticJavascriptPath||c.nexus+"/"+l.client+"/code/",alLoc:l.alertLocation||
c.nexus+"/alerts/a.gif",publishPath:l.publishPath,isPublic:l.isPublic,client:l.client,clientId:l.clientId,enableTagAuditBeacon:l.enableTagAuditBeacon,beaconSamplingSeedValue:l.beaconSamplingSeedValue||-1,dataLayerName:l.dataLayerName||"ensDataLayer",protocol:"http:"===window.location.protocol?window.location.protocol:"https:"};c.ruleList=[];c.allDeploymentIds=[];c.runDeploymentIds=[];c.runRuleIds=[];c.exceptionList=[];c.ensightenVariables={};c.appIdWhitelist=[];c.appIdBlacklist=[];window[c.options.dataLayerName]&&
window[c.options.dataLayerName][0]&&(window[c.options.dataLayerName][0]["ens.whitelist"]&&(c.appIdWhitelist=window[c.options.dataLayerName][0]["ens.whitelist"]),window[c.options.dataLayerName][0]["ens.blacklist"]&&(c.appIdBlacklist=window[c.options.dataLayerName][0]["ens.blacklist"]));c.canRuleRunByAppId=function(a){return a?a&&!a.appId||a&&-1==a.appId||0==c.appIdWhitelist.length&&0==c.appIdBlacklist.length?!0:0<c.appIdWhitelist.length&&0==c.appIdBlacklist.length?-1==c.appIdWhitelist.indexOf(a.appId)?
!1:!0:0==c.appIdWhitelist.length&&0<c.appIdBlacklist.length?-1==c.appIdBlacklist.indexOf(a.appId)?!0:!1:0<c.appIdWhitelist.length&&0<c.appIdBlacklist.length&&-1==c.appIdBlacklist.indexOf(a.appId)&&-1!=c.appIdWhitelist.indexOf(a.appId)?!0:!1:!1};c.test=function(a){if(c.canRuleRunByAppId(a)&&!(a.executionData.hasRun||a.executionData.runTime&&0<a.executionData.runTime.length)){for(var b=0;b<a.dependencies.length;b++)if(!1===a.dependencies[b]())return;a.execute()}};n.prototype=Error();n.prototype||(n.prototype=
{});n.prototype.constructor=n;c.DependencyNotAvailableException=n;p.prototype=Error();p.prototype||(p.prototype={});p.prototype.constructor=p;c.BeaconException=p;c.checkForInvalidDependencies=function(a,b,e,f){for(var g=0;g<e.length;g++)if("DEPENDENCYNEVERAVAILABLE"===e[g])return d.currentRuleId=a,d.currentDeploymentId=b,d.reportException(new c.DependencyNotAvailableException(f[g])),b&&-1!==b&&c.allDeploymentIds.push(b),!0;return!1};d.currentRuleId=-1;d.currentDeploymentId=-1;d.reportedErrors=[];
d.reportedAlerts=[];d.AF=[];c.initialized=!1;d.extend=function(a){c.initialized&&window[ensightenOptions.ns].reportException({name:"CoreExtendException",message:"Core extend was called after initialization"})};d.initialize=function(){c.initialized||(this.extend(c),c.initialized=!0)};d.sampleBeacon=function(){var a=!1;try{var b=(c.currSec||0)%20,e=c.options.beaconSamplingSeedValue;-1===e?a=!0:0!==b&&0===e%b&&(a=!0)}catch(f){}return a};d.getServerComponent=function(a){d.callOnGetServerComponent();var b=
c.options.protocol+"//"+("/"==c.options.scLoc.charAt(0)?c.getDynamicDomain():"")+c.options.scLoc;d.insertScript(b,!1,a||!0,!0)};d.setVariable=function(a,b){c.ensightenVariables[a]=b};d.getVariable=function(a){return a in c.ensightenVariables?c.ensightenVariables[a]:null};d.testAll=function(){for(var a=0;a<c.ruleList.length;a++)c.test(c.ruleList[a])};d.executionState={DOMParsed:!1,DOMLoaded:!1,dataDefinitionComplete:!1,conditionalRules:!1,readyForServerComponent:!1};d.reportException=function(a){a.timestamp=
(new Date).getTime();c.exceptionList.push(a);a=c.options.protocol+"//"+c.options.erLoc+"?msg="+encodeURIComponent(a.message||"")+"&lnn="+encodeURIComponent(a.lineNumber||a.line||-1)+"&fn="+encodeURIComponent(a.fileName||"")+"&cid="+encodeURIComponent(c.options.clientId||-1)+"&client="+encodeURIComponent(c.options.client||"")+"&publishPath="+encodeURIComponent(c.options.publishPath||"")+"&rid="+encodeURIComponent(a.rid||d.currentRuleId||-1)+"&did="+encodeURIComponent(a.did||d.currentDeploymentId||
-1)+"&errorName="+encodeURIComponent(a.name||"");a=d.imageRequest(a);a.timestamp=(new Date).getTime();this.reportedErrors.push(a);d.currentRuleId=-1;d.currentDeploymentId=-1};d.Rule=function(a){this.execute=function(){this.executionData.runTime.push(new Date);d.currentRuleId=this.id;d.currentDeploymentId=this.deploymentId;try{this.code()}catch(b){window[ensightenOptions.ns].reportException(b)}finally{this.executionData.hasRun=!0,-1!==this.deploymentId&&(c.runDeploymentIds.push(this.deploymentId),
c.runRuleIds.push(this.id)),d.testAll()}};this.id=a.id;this.deploymentId=a.deploymentId;this.dependencies=a.dependencies||[];this.code=a.code;this.appId=a.appId;this.executionData={hasRun:!1,runTime:[]}};c.updateRuleEvent=function(a,b){for(var e=0;e<c.ruleList.length;e++)if(null!=c.ruleList[e].eventTriggerObj&&c.ruleList[e].eventTriggerObj.rid==a)return c.ruleList[e].id=a,c.ruleList[e].deploymentId=b,c.ruleList[e].executionData.hasRun=!0,c.ruleList[e].executionData.runTime=[new Date],c.allDeploymentIds.push(b),
!0;return!1};d.triggerEvent=function(a,b){d.getRule(a)||c.updateRuleEvent(a,b)||window[ensightenOptions.ns].reportException({rid:a,did:b,name:"triggerEvent error",message:"rid not found in rule.eventTriggerObj in registered rule list. Dependent Tag can not run due to missing event object."})};d.registerRule=function(a){if(d.getRule(a.id)&&-1!==a.id)return!1;c.ruleList.push(a);-1!==a.deploymentId&&c.allDeploymentIds.push(a.deploymentId);d.testAll();return!0};d.getRule=function(a){for(var b=0;b<c.ruleList.length;b++)if(c.ruleList[b].id===
a)return c.ruleList[b];return!1};d.getRuleList=function(){return c.ruleList};d.clearRuleList=function(){c.ruleList=[]};d.getAllDeploymentIds=function(){return c.allDeploymentIds};d.getRunRuleIds=function(){return c.runRuleIds};d.getRunDeploymentIds=function(){return c.runDeploymentIds};d.hasRuleRun=function(a){return(a=d.getRule(a))?a.executionData.hasRun:!1};c.toTwoChar=function(a){return(2===a.toString().length?"":"0")+a};d.Alert=function(a){var b=new Date;b=b.getFullYear()+"-"+c.toTwoChar(b.getMonth())+
"-"+c.toTwoChar(b.getDate())+" "+c.toTwoChar(b.getHours())+":"+c.toTwoChar(b.getMinutes())+":"+c.toTwoChar(b.getSeconds());this.severity=a.severity||1;this.subject=a.subject||"";this.type=a.type||1;this.ruleId=a.ruleId||-1;this.severity=encodeURIComponent(this.severity);this.date=encodeURIComponent(b);this.subject=encodeURIComponent(this.subject);this.type=encodeURIComponent(this.type)};d.generateAlert=function(a){a=d.imageRequest(c.options.protocol+"//"+c.options.alLoc+"?d="+a.date+"&su="+a.subject+
"&se="+a.severity+"&t="+a.type+"&cid="+c.options.clientId+"&client="+c.options.client+"&publishPath="+c.options.publishPath+"&rid="+d.currentRuleId+"&did="+d.currentDeploymentId);a.timestamp=(new Date).getTime();this.reportedAlerts.push(a)};d.imageRequest=function(a){var b=new Image(0,0);b.src=a;return b};d.insertScript=function(a,b,e,f){var g=document.getElementsByTagName("script"),h;if(void 0!==b?b:1)for(h=0;h<g.length;h++)if(g[h].src===a&&g[h].readyState&&/loaded|complete/.test(g[h].readyState))return;
if(!f)var m=e;else if(e){e=1==e&&"object"==typeof d.scDataObj?d.scDataObj:e;c.rand=Math.random()*("1E"+(10*Math.random()).toFixed(0));b=window.location.href;"object"===typeof e&&e.PageID&&(b=e.PageID,delete e.PageID);if("object"===typeof e)for(h in e){h=~b.indexOf("#")?b.slice(b.indexOf("#"),b.length):"";b=b.slice(0,h.length?b.length-h.length:b.length);b+=~b.indexOf("?")?"&":"?";for(k in e)b+=k+"="+e[k]+"&";b=b.slice(0,-1)+h;break}a=a+"?namespace="+(ensightenOptions.ns+"&");a+="staticJsPath="+ensightenOptions.staticJavascriptPath+
"&";a+="publishedOn="+ensightenOptions.generatedOn+"&";a+="ClientID="+encodeURIComponent(c.options.clientId)+"&PageID="+encodeURIComponent(b)+("/"==c.options.scLoc.charAt(0)?"&custDomain="+c.getDynamicDomain():"")}(function(q,t,y){var u=t.head||t.getElementsByTagName("head"),z=function(){if("item"in u){if(!u[0]){setTimeout(z,25);return}u=u[0]}var v=t.createElement("script"),w;for(w in m)v.setAttribute(w,m[w]?m[w]:null);y&&(v.src=y);v.onload=v.onerror=function(){this.addEventListener&&(this.readyState=
"loaded")};u.insertBefore(v,u.firstChild)};setTimeout(z,0)})(window,document,a,m)};d.loadScriptCallback=function(a,b,e,f){var g=document.getElementsByTagName("script"),h=g[0];if(e)for(e=0;e<g.length;e++)if(g[e].src===a&&g[e].readyState&&/loaded|complete/.test(g[e].readyState))try{b()}catch(q){window[ensightenOptions.ns].reportException(q)}finally{return}g=document.createElement("script");for(var m in f)g.setAttribute(m,f[m]?f[m]:null);g.type="text/javascript";g.async=!0;g.src=a;g.onerror=function(){this.addEventListener&&
(this.readyState="loaded")};g.onload=g.onreadystatechange=function(){if(!this.readyState||"complete"===this.readyState||"loaded"===this.readyState){this.onload=this.onreadystatechange=null;this.addEventListener&&(this.readyState="loaded");try{b.call(this)}catch(q){window[ensightenOptions.ns].reportException(q)}}};h.parentNode.insertBefore(g,h)};d.insertPageFiles=function(a){var b=0,e=0,f=function(){e==a.length-1&&window[ensightenOptions.ns].callOnPageSpecificCompletion();e++};for(b=0;b<a.length;++b)window[ensightenOptions.ns].loadScriptCallback(a[b],
f)};d.unobtrusiveAddEvent=function(a,b,e){try{var f=a[b]?a[b]:function(){};a[b]=function(){e.apply(this,arguments);return f.apply(this,arguments)}}catch(g){window[ensightenOptions.ns].reportException(g)}};d.anonymous=function(a,b){return function(){try{d.currentRuleId=b?b:"anonymous",a()}catch(e){window[ensightenOptions.ns].reportException(e)}}};d.setCurrentRuleId=function(a){d.currentRuleId=a};d.setCurrentDeploymentId=function(a){d.currentDeploymentId=a};c.bind=function(a,b,e,f,g,h){if("function"===
typeof a)a=new d.Rule({id:b||-1,deploymentId:e||-1,appId:f||-1,dependencies:"immediate"==g?[]:[function(){return window[ensightenOptions.ns].executionState[g]}],code:a}),null!=h&&(a.eventTriggerObj=h);else if("object"!==typeof a)return!1;d.registerRule(a)};d.bindImmediate=function(a,b,e,f){c.bind(a,b,e,f,"immediate")};d.bindDOMParsed=function(a,b,e,f){c.bind(a,b,e,f,"DOMParsed")};d.bindDOMLoaded=function(a,b,e,f){c.bind(a,b,e,f,"DOMLoaded")};d.bindPageSpecificCompletion=function(a,b,e,f){c.bind(a,
b,e,f,"conditionalRules")};d.bindOnGetServerComponent=function(a,b,e,f){c.bind(a,b,e,f,"readyForServerComponent")};d.bindDataDefinitionComplete=function(a,b,e,f){c.bind(a,b,e,f,"dataDefinitionComplete")};d.checkHasRun=function(a){if(0===a.length)return!0;for(var b,e=0;e<a.length;++e)if(b=d.getRule(parseInt(a[e],10)),!b||!b.executionData.hasRun)return!1;return!0};c.bindDependency=function(a,b,e,f,g,h,m,q){var t=[];if(!c.checkForInvalidDependencies(b,f,e,g)){"immediate"==!m&&t.push(function(){return window[ensightenOptions.ns].executionState[m]});
t.push(function(){return window[ensightenOptions.ns].checkHasRun(e)});if("function"===typeof a)a=new d.Rule({id:b||-1,deploymentId:f||-1,appId:h||-1,dependencies:t,code:a}),null!=q&&(a.eventTriggerObj=q);else if("object"!==typeof a)return!1;d.registerRule(a)}};d.bindDependencyImmediate=function(a,b,e,f,g,h){c.bindDependency(a,b,e,f,g,h,"immediate")};d.bindDependencyDOMLoaded=function(a,b,e,f,g,h){c.bindDependency(a,b,e,f,g,h,"DOMLoaded")};d.bindDependencyDOMParsed=function(a,b,e,f,g,h){c.bindDependency(a,
b,e,f,g,h,"DOMParsed")};d.bindDependencyPageSpecificCompletion=function(a,b,e,f,g,h){c.bindDependency(a,b,e,f,g,h,"conditionalRules")};d.bindDependencyOnGetServerComponent=function(a,b,e,f,g,h){c.bindDependency(a,b,e,f,g,h,"readyForServerComponent")};d.bindDependencyDataDefinitionComplete=function(a,b,e,f,g,h){c.bindDependency(a,b,e,f,g,h,"dataDefinitionComplete")};d.dataDefinitionIds=[];d.dataDefinitions=[];d.pageSpecificDataDefinitionsSet=!1;d.setPageSpecificDataDefinitionIds=function(a){for(var b=
a?a.length:0,e=0;e<b;e++){var f=a[e];if(Array.prototype.indexOf)-1==d.dataDefinitionIds.indexOf(f)&&d.dataDefinitionIds.push(f);else{for(var g=!1,h=d.dataDefinitionIds.length,m=0;m<h;m++)if(d.dataDefinitionIds[m]===f){g=!0;break}g||d.dataDefinitionIds.push(f)}}d.pageSpecificDataDefinitionsSet=!0;r()};d.DataDefinition=function(a,b){this.id=a;this.registrationFn=b;this.endRegistrationTime=this.startRegistrationTime=null;this.startRegistration=function(){this.startRegistrationTime=new Date};this.endRegistration=
function(){this.endRegistrationTime=new Date}};d.registerDataDefinition=function(a,b){var e=d.dataDefinitions[b];e||(e=new d.DataDefinition(b,a),d.dataDefinitions[b]=e);e.startRegistrationTime||(e.startRegistration(),e.registrationFn(),e.endRegistration());d.pageSpecificDataDefinitionsSet&&r()};d.callOnDataDefintionComplete=function(){d.executionState.dataDefinitionComplete=!0;d.testAll()};d.callOnDOMParsed=function(){window[ensightenOptions.ns].executionState.DOMParsed=!0;window[ensightenOptions.ns].testAll()};
d.callOnDOMLoaded=function(){window[ensightenOptions.ns].executionState.DOMParsed=!0;window[ensightenOptions.ns].executionState.DOMLoaded=!0;window[ensightenOptions.ns].testAll()};d.callOnPageSpecificCompletion=function(){for(var a=document.getElementsByTagName("script"),b=0,e=a.length;b<e;b++)if(a[b].src&&a[b].src.match(/\.ensighten\.com\/(.+?)\/code\/.*/i)&&"loaded"!=a[b].readyState&&"complete"!=a[b].readyState){setTimeout(window[ensightenOptions.ns].callOnPageSpecificCompletion,50);return}setTimeout(function(){window[ensightenOptions.ns].executionState.conditionalRules=
!0;window[ensightenOptions.ns].testAll()},1)};d.callOnGetServerComponent=function(){window[ensightenOptions.ns].executionState.readyForServerComponent=!0;window[ensightenOptions.ns].testAll()};d.hasDOMParsed=function(){return window[ensightenOptions.ns].executionState.DOMParsed};d.hasDOMLoaded=function(){return window[ensightenOptions.ns].executionState.DOMLoaded};d.hasPageSpecificCompletion=function(){return window[ensightenOptions.ns].executionState.conditionalRules};var A=function(){var a=[],b=
!1,e=!1;return{add:function(f){b&&!e?f():"function"==typeof f&&(a[a.length]=f)},exec:function(){e=!0;do{var f=a;a=[];b=!0;for(var g=0;g<f.length;g++)try{f[g].call(window)}catch(h){window[ensightenOptions.ns].reportException(h)}}while(0<a.length);e=!1},haveRun:function(){return b}}};d.new_fArray=function(){return A()};c.timer=null;(function(){function a(f,g){return function(){f.apply(g,arguments)}}window.console||(window.console={});var b=window.console;if(!b.log)if(window.log4javascript){var e=log4javascript.getDefaultLogger();
b.log=a(e.info,e);b.debug=a(e.debug,e);b.info=a(e.info,e);b.warn=a(e.warn,e);b.error=a(e.error,e)}else b.log=function(){};b.debug||(b.debug=b.log);b.info||(b.info=b.log);b.warn||(b.warn=b.log);b.error||(b.error=b.log)})();document.addEventListener?(-1<navigator.userAgent.indexOf("AppleWebKit/")?c.timer=window.setInterval(function(){/loaded|interactive|complete/.test(document.readyState)&&(clearInterval(c.timer),d.callOnDOMParsed())},50):document.addEventListener("DOMContentLoaded",d.callOnDOMParsed,
!1),window.addEventListener("load",d.callOnDOMLoaded,!1)):(setTimeout(function(){var a=window.document,b=function(){try{if(!document.body)throw"continue";a.documentElement.doScroll("left")}catch(e){setTimeout(b,15);return}window[ensightenOptions.ns].callOnDOMParsed()};b()},1),window.attachEvent("onload",function(){window[ensightenOptions.ns].callOnDOMLoaded()}));document.readyState&&"complete"===document.readyState&&(d.executionState.DOMParsed=!0,d.executionState.DOMLoaded=!0);"true"===c.options.enableTagAuditBeacon&&
d.sampleBeacon()&&window.setTimeout(function(){if(window[ensightenOptions.ns]&&!window[ensightenOptions.ns].mobilePlatform)try{for(var a=[],b,e,f,g,h=0;h<c.ruleList.length;++h)e=c.ruleList[h],f=e.executionData.hasRun?"1":"0",g=e.deploymentId.toString()+"|"+e.id.toString()+"|"+f,a.push(g);b="["+a.join(";")+"]";var m=c.options.protocol+"//"+c.nexus+"/"+encodeURIComponent(l.client)+"/"+encodeURIComponent(l.publishPath)+"/TagAuditBeacon.rnc?cid="+encodeURIComponent(l.clientId)+"&data="+b+"&idx=0&r="+
c.rand;d.imageRequest(m)}catch(q){d.currentRuleId=-1,d.currentDeploymentId=-1,a=new c.BeaconException(q),window[ensightenOptions.ns].reportException(a)}},3E3);window.setInterval(d.testAll,c.options.interval);return d}(ensightenOptions);
"true"===ensightenOptions.enablePagePerfBeacon&&window[ensightenOptions.ns]&&window[ensightenOptions.ns].sampleBeacon()&&window[ensightenOptions.ns].bindDOMParsed(function(){if(!window[ensightenOptions.ns].mobilePlatform){var l=window.performance;if(l){l=l.timing||{};var n=l.navigationStart||0,p={connectEnd:"ce",connectStart:"cs",domComplete:"dc",domContentLoadedEventEnd:"dclee",domContentLoadedEventStart:"dcles",domInteractive:"di",domLoading:"dl",domainLookupEnd:"dle",domainLookupStart:"dls",fetchStart:"fs",
loadEventEnd:"lee",loadEventStart:"les",redirectEnd:"rede",redirectStart:"reds",requestStart:"reqs",responseStart:"resps",responseEnd:"respe",secureConnectionStart:"scs",unloadEventStart:"ues",unloadEventEnd:"uee"};var r="&ns="+encodeURIComponent(l.navigationStart);for(var c in p)if(void 0!==l[c]){var d=l[c]-n;r+="&"+p[c]+"="+(0<d?encodeURIComponent(d):0)}else r+="&"+p[c]+"=-1";window[ensightenOptions.ns].timing=r;c=ensightenOptions.nexus||"nexus.ensighten.com";l=ensightenOptions.staticJavascriptPath||
"";r=l.indexOf("/",0);n=l.indexOf("/code/");l=l.substring(r,n)+"/perf.rnc";l+="?cid="+encodeURIComponent(ensightenOptions.clientId)+window[ensightenOptions.ns].timing;window[ensightenOptions.ns].imageRequest("//"+c+l)}}});

/*
 MIT License (c) copyright 2013 original author or authors */
window[ensightenOptions.ns].data||(window[ensightenOptions.ns].when=function(){function e(g,l,t,w){return v(g).then(l,t,w)}function B(g){this.then=g}function v(g){return f(function(l){l(g)})}function f(g){function l(z){C&&(x=d(z),b(C,x),C=y)}function t(z){l(k(z))}function w(z){C&&b(C,a(z))}var x,C=[];try{g(l,t,w)}catch(z){t(z)}return new B(function(z,F,G){return f(function(H,N,I){C?C.push(function(L){L.then(z,F,G).then(H,N,I)}):n(function(){x.then(z,F,G).then(H,N,I)})})})}function d(g){return g instanceof
B?g:g!==Object(g)?r(g):f(function(l,t,w){n(function(){try{var x=g.then;"function"===typeof x?T(x,g,l,t,w):l(r(g))}catch(C){t(C)}})})}function r(g){var l=new B(function(t){try{return"function"==typeof t?d(t(g)):l}catch(w){return k(w)}});return l}function k(g){var l=new B(function(t,w){try{return"function"==typeof w?d(w(g)):l}catch(x){return k(x)}});return l}function a(g){var l=new B(function(t,w,x){try{return"function"==typeof x?a(x(g)):l}catch(C){return a(C)}});return l}function b(g,l){n(function(){for(var t,
w=0;t=g[w++];)t(l)})}function c(g,l,t,w,x){p(2,arguments);return e(g,function(C){return f(function(z,F,G){function H(M){P(M)}function N(M){Q(M)}var I;var L=C.length>>>0;var O=Math.max(0,Math.min(l,L));var R=[];var W=L-O+1;var U=[];if(O){var P=function(M){U.push(M);--W||(Q=P=q,F(U))};var Q=function(M){R.push(M);--O||(Q=P=q,z(R))};for(I=0;I<L;++I)I in C&&e(C[I],N,H,G)}else z(R)}).then(t,w,x)})}function h(g,l,t,w){p(1,arguments);return u(g,A).then(l,t,w)}function u(g,l){return e(g,function(t){return f(function(w,
x,C){var z,F;var G=z=t.length>>>0;var H=[];if(G){var N=function(I,L){e(I,l).then(function(O){H[L]=O;--G||w(H)},x,C)};for(F=0;F<z;F++)F in t?N(t[F],F):--G}else w(H)})})}function n(g){1===E.push(g)&&K(m)}function m(){for(var g,l=0;g=E[l++];)g();E=[]}function p(g,l){for(var t,w=l.length;w>g;)if(t=l[--w],null!=t&&"function"!=typeof t)throw Error("arg "+w+" must be a function");}function q(){}function A(g){return g}e.defer=function(){var g,l;var t={promise:y,resolve:y,reject:y,notify:y,resolver:{resolve:y,
reject:y,notify:y}};t.promise=g=f(function(w,x,C){t.resolve=t.resolver.resolve=function(z){if(l)return v(z);l=!0;w(z);return g};t.reject=t.resolver.reject=function(z){if(l)return v(k(z));l=!0;x(z);return g};t.notify=t.resolver.notify=function(z){C(z);return z}});return t};e.resolve=v;e.reject=function(g){return e(g,k)};e.join=function(){return u(arguments,A)};e.all=h;e.map=u;e.reduce=function(g,l){var t=T(V,arguments,1);return e(g,function(w){var x=w.length;t[0]=function(C,z,F){return e(C,function(G){return e(z,
function(H){return l(G,H,F,x)})})};return X.apply(w,t)})};e.any=function(g,l,t,w){return c(g,1,function(x){return l?l(x[0]):x[0]},t,w)};e.some=c;e.isPromise=function(g){return g&&"function"===typeof g.then};B.prototype={otherwise:function(g){return this.then(y,g)},ensure:function(g){function l(){return v(g())}return this.then(l,l).yield(this)},yield:function(g){return this.then(function(){return g})},spread:function(g){return this.then(function(l){return h(l,function(t){return g.apply(y,t)})})},always:function(g,
l){return this.then(g,g,l)}};var y;var E=[];var D=setTimeout;var K="function"===typeof setImmediate?"undefined"===typeof window?setImmediate:setImmediate.bind(window):"object"===typeof process&&process.nextTick?process.nextTick:function(g){D(g,0)};var J=Function.prototype;var S=J.call;var T=J.bind?S.bind(S):function(g,l){return g.apply(l,V.call(arguments,2))};J=[];var V=J.slice;var X=J.reduce||function(g){var l=0;var t=Object(this);var w=t.length>>>0;var x=arguments;if(1>=x.length)for(;;){if(l in
t){x=t[l++];break}if(++l>=w)throw new TypeError;}else x=x[1];for(;l<w;++l)l in t&&(x=g(x,t[l],l,t));return x};return e}(),function(){function e(d,r){return v.all(r||[],function(k){return d.apply(null,k)})}function B(d){var r=f.call(arguments,1);return function(){return e(d,r.concat(f.call(arguments)))}}var v=window[ensightenOptions.ns].when;var f=[].slice;v.apply=e;v.call=function(d){return e(d,f.call(arguments,1))};v.lift=B;v.bind=B;v.compose=function(d){var r=f.call(arguments,1);return function(){var k=
f.call(arguments);k=e(d,k);return v.reduce(r,function(a,b){return b(a)},k)}}}(),window[ensightenOptions.ns].data=function(e,B){function v(a,b){this.name="DataDefinitionException";this.message=b||"Data definitions cannot be resolved as there are invalid id(s): "+a}var f={engines:{memory:{get:function(a){if(d.utils.isArray(a)){for(var b=[],c=0;c<a.length;c++)b.push(f.data[a[c]]);return e[ensightenOptions.ns].when.resolve(b)}b=f.dataDefinitions[a]||{storage:{get:function(){}}};b=b.storage.get(b);f.data[a]=
b;return e[ensightenOptions.ns].when.resolve(f.data[a])},set:function(a,b){if(d.utils.isArray(a))for(var c in a)f.data[a[c]]=b[c];else f.data[a]=b;return e[ensightenOptions.ns].when.resolve(!0)},remove:function(a){if(d.utils.isArray(a))for(var b in a)delete f.data[a[b]];else delete f.data[a];return e[ensightenOptions.ns].when.resolve(!0)},clear:function(a){f.data={};f.definitions={};return e[ensightenOptions.ns].when.resolve(!0)},all:function(){return e[ensightenOptions.ns].when.resolve(f.data)}}},
normalizeInputArgs:function(a,b){var c={key:[],val:B},h;if(d.utils.isPlainObject(a))for(h in c.val=[],a)c.key.push(h),c.val.push(a[h]);else d.utils.isArray(a),c.key=a,c.val=b;return c},definitions:{},data:{}},d={utils:{isPlainObject:function(a){return!!a&&"[object Object]"===Object.prototype.toString.call(a)},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},escapeRegEx:function(a){try{return a.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}catch(b){return a}}}},r=function(){return e[ensightenOptions.ns].when.reject("Not Implemented.")};
v.prototype=Error();v.prototype||(v.prototype={});v.prototype.constructor=v;f.DataDefinitionException=v;f.checkForInvalidDataDefinitions=function(a){d.utils.isArray(a)||(a=[a]);return a&&0<a.length&&(a=a.join(","),-1<a.indexOf("invalid_id"))?(e[ensightenOptions.ns].reportException(new f.DataDefinitionException(a)),!0):!1};f.collectAvailableDataDefinitions=function(a){for(var b=[],c=0;c<a.length;c++){var h=parseInt(a[c],10),u=e[ensightenOptions.ns].dataDefinitions[h];if(null===u||u===B)if(u=d.storage.session.get({id:h}),
null!==u&&u!==B)d.set(h,u),f.dataDefinitions[h]={id:h,load:"visitor",storage:d.storage.visitor,missingDDFromCache:!0},b.push(e[ensightenOptions.ns].data.get(""+h));else return e[ensightenOptions.ns].reportException(new f.DataDefinitionException(a,"Invalid data definition used: "+h)),{promises:[],isInvalid:!0};else b.push(e[ensightenOptions.ns].data.get(""+a[c]))}return{promises:b,isInvalid:!1}};f.getSync=function(a){function b(q){var A=q.extract||h,y=q.transform||u,E=!1,D=null,K=null;try{D=A()}catch(J){D=
null,E=!0}try{K=y(D)}catch(J){K=null,E=!0}E&&c.push(q.id);return K}var c=[],h=function(){return document},u=function(q){return null!==q&&q!==B?q.toString():null},n=parseInt(a);a="string"===typeof a?a.split("."):[];var m={},p="";if(!isNaN(n)&&"undefined"===typeof f.dataDefinitions[n])return e[ensightenOptions.ns].reportException(new f.DataDefinitionException(n,"Error resolving data definition: "+n+".  Does not exist on the page.")),"Data definition specified does not exist on the page";if(isNaN(n)&&
"undefined"===typeof f.dataDefinitionsBySourceCollName[""+a[0]+"."+a[1]+"."+a[2]])return e[ensightenOptions.ns].reportException(new f.DataDefinitionException(a,"Error resolving data definition: "+a[0]+"."+a[1]+"."+a[2]+".  Does not exist on the page.")),"Data definition specified does not exist on the page";isNaN(n)?3==a.length&&(m=d.getDataDefinitionBySourceCollectionName(a[0],a[1],a[2])):m=d.getDataDefinitionById(n);p=m.load&&m.load.match(/(session|visitor)/i)&&m.storage&&m.storage.get?m.storage.get(m):
b(m);0<c.length&&e[ensightenOptions.ns].reportException(new f.DataDefinitionException(c,"Error resolving data definitions synchronously: "+c));return p};f.dataDefinitions={};f.dataDefinitionsBySourceCollName={};d.defineEngine=function(a,b){var c=["get","set","remove","clear","all"];f.engines[a]=b;if(!b.returnsPromise)for(a=0;a<c.length;a++){var h=c[a];b[h]=e[ensightenOptions.ns].when.lift(b[h])}};d.storage={instance:{set:function(a,b){},get:function(a){return f.getSync(a.id)}},page:{set:function(a,
b){},get:function(a){return f.data[a.id]}},session:{set:function(a,b){var c=d.storage.session.get({id:a}),h=new Date,u=h.getTime();h.setTime(u+18E5);null!=c&&(b=c);e[ensightenOptions.ns].data.cookie.utils.set(a,b,{expires:h.toGMTString()});b={expires:h.getTime(),value:b};e[ensightenOptions.ns].data.local.utils.set(a,b)},get:function(a){var b=e[ensightenOptions.ns].data.cookie.utils.get(a.id),c=e.JSON&&e.JSON.stringify?e.JSON:e[ensightenOptions.ns].JSON;c=c||{};var h=new Date;h=h.getTime();if(null===
b){try{var u=c.parse(e[ensightenOptions.ns].data.local.utils.get(a.id))}catch(n){u=null}null!=u&&(u.expires=+u.expires,h<=u.expires?b=u.value:""==u.expires&&u.value!=B?b=u.value:e[ensightenOptions.ns].data.local.utils.remove(a.id))}return b}},visitor:{set:function(a,b){var c=d.storage.session.get({id:a});null!=c&&(b=c);e[ensightenOptions.ns].data.cookie.utils.set(a,b);e[ensightenOptions.ns].data.local.utils.set(a,{expires:"",value:b})},get:function(a){return d.storage.session.get(a)}}};d.getEngine=
d.engine=function(a){return a?f.engines[a]||{get:r,set:r,remove:r,clear:r,all:r}:f.engines};d.all=function(a){return e[ensightenOptions.ns].data.engine(a||"memory").all()};d.get=function(a,b,c){b=b||"memory";c=c||{};-1<a.indexOf(",")?(a=a.split(","),a=f.normalizeInputArgs(a)):a=f.normalizeInputArgs(a);return c.wait?f.getWait(a.key,e[ensightenOptions.ns].data.engine(b),c):f.data&&f.data.hasOwnProperty(a.key)?e[ensightenOptions.ns].data.engine(b).get(a.key):f.getWaitForKey(a.key,e[ensightenOptions.ns].data.engine(b),
c)};f.getWait=function(a,b,c){var h=+new Date,u=e[ensightenOptions.ns].when.defer(),n=function(){var p=b.get(a);if(-1===c.wait)return p;p.then(function(q){c.setCheck(q)?u.resolve(q):setTimeout(m,c.interval)},function(q){setTimeout(m,c.interval)})},m=function(){var p=+new Date-h;-1!==c.wait&&p<c.wait?n():u.reject("Timeout")};c.interval=c.interval||500;c.wait=c.wait||5E3;d.utils.isArray(a)?c.setCheck=c.setCheck||function(p){for(var q=!0,A=0;A<p.length;A++)q=q&&!!p[A];return q}:c.setCheck=c.setCheck||
function(p){return!!p};n();return u.promise};f.getWaitForKey=function(a,b,c){var h=e[ensightenOptions.ns].when.defer(),u=function(){if(f.data&&f.data.hasOwnProperty(a)){var m=b.get(a);if(-1===c.wait)return m;m.then(function(p){h.resolve(p)},function(p){h.reject(p)})}else setTimeout(n,c.interval)},n=function(){u()};c.interval=c.interval||100;c.wait=c.wait||1;u();return h.promise};d.set=function(a,b,c){var h=f.normalizeInputArgs(a,b);Array.prototype.slice.call(arguments);return e[ensightenOptions.ns].data.engine(c||
"memory").set(h.key,h.val)};d.remove=function(a,b){return e[ensightenOptions.ns].data.engine(b||"memory").remove(a)};d.clear=function(a){return e[ensightenOptions.ns].data.engine(a||"memory").clear()};d.define=function(a,b){b&&(a.name=b.id||b.name);if(!a.name)return e[ensightenOptions.ns].when.reject(Error("Invalid parameters: missing 'name'"));a.id=a.name;b=a.load||"page";a.load=a.load||"javascript";a.load=-1<a.load.indexOf("javascript")?a.load:a.load+",javascript";a.trigger=a.trigger||function(){return e[ensightenOptions.ns].when.resolve()};
a.priv=a.priv||!1;a.collection=a.collection||"Data Layer";a.persist=e[ensightenOptions.ns].data.engine("memory");a.storage=d.storage[b.toLowerCase()]||d.storage.page;a.resolved=!1;var c=a.extract||function(){return document},h=a.transform||function(p){return p},u=function(p,q){var A=[];A.push(a.persist.set(p,q));a.storage.set(a.id,q);"object"==typeof e[ensightenOptions.ns].data.dataExport&&e[ensightenOptions.ns].data.dataExport(p,q,a.collection);e[ensightenOptions.ns].when.all(A).then(function(y){n.resolve(y)},
function(y){n.reject(y)})},n=e[ensightenOptions.ns].when.defer();try{var m=a.trigger()}catch(p){e[ensightenOptions.ns].reportException(new f.DataDefinitionException(null,'"'+p+'" error caught in Data Definition trigger: '+a.dataDefName+", ID:"+a.id+". Using bottom of body trigger.")),m=e[ensightenOptions.ns].data.bottomOfBodyTrigger()}m.then(function(){var p=n,q=p.resolve,A=e[ensightenOptions.ns].when,y=A.reduce;try{var E=c()}catch(D){e[ensightenOptions.ns].reportException(new f.DataDefinitionException(null,
'"'+D+'" error caught in Data Definition extractor: '+a.dataDefName+", ID:"+a.id+".")),E=null}q.call(p,y.call(A,[E,function(){try{return h.apply(this,arguments)}catch(D){return e[ensightenOptions.ns].reportException(new f.DataDefinitionException(null,'"'+D+'" error caught in Data Definition transformer: '+a.dataDefName+", ID "+a.id+".")),null}},u],function(D,K,J,S){a.resolved=!0;if(1==J)return K(D);2==J&&K(a.name,D)}))},function(p){n.reject(p)});f.dataDefinitions[a.id]=a;f.dataDefinitionsBySourceCollName[""+
a.source+"."+a.collection+"."+a.dataDefName]=a;return n.promise};d.checkConditions=function(a){var b,c={lt:function(n,m){var p=+n,q=+m;return isNaN(p)||isNaN(q)?(e[ensightenOptions.ns].reportException(new f.DataDefinitionException(null,"Value(s) cannot be converted to number: compareWith: "+n+", compareTo: "+m)),!1):p<q},gt:function(n,m){var p=+n,q=+m;return isNaN(p)||isNaN(q)?(e[ensightenOptions.ns].reportException(new f.DataDefinitionException(null,"Value(s) cannot be converted to number: compareWith: "+
n+", compareTo: "+m)),!1):p>q},eql:function(n,m){return n==m},exists:function(n,m){return n===B?!1:!0},re:function(n,m,p){m=new RegExp(m,p?"i":"");try{return n.match(m)}catch(q){return!1}},starts:function(n,m,p){m=d.utils.escapeRegEx(m);return c.re(n,"^"+m,p)},ends:function(n,m,p){m=d.utils.escapeRegEx(m);return c.re(n,m+"$",p)},contains:function(n,m,p){m=d.utils.escapeRegEx(m);return c.re(n,".*"+m+".*",p)}};c.is=c.eql;c["starts with"]=c.starts;c["ends with"]=c.ends;c["is greater than"]=c.gt;c["is less than"]=
c.lt;c.matches=c.re;for(b=0;b<a.values.length;b++){var h=a.customComparator?a.customComparator[b]?a.customComparator[b]:c[a.comparators[b]]:c[a.comparators[b]],u=h(a.values[b],a.compareTo[b],a.caseInsensitive?a.caseInsensitive[b]||!1:!1);a.not[b]&&(u=!u);if(!u&&h!=c.exists)return!1}return!0};d.triggerPromise=function(a,b,c){c=c||5E3;var h=+new Date,u=e[ensightenOptions.ns].when.defer(),n=function(){var m=a();m!=b?u.resolve(m):+new Date-h<c?setTimeout(n,200):u.reject("timed out")};n();return u.promise};
d.timeoutPromise=function(a,b){var c=e[ensightenOptions.ns].when.defer();b=b||800;a.then(c.resolve,c.reject);setTimeout(function(){c.reject(Error("timed out"))},b);return c.promise};d.delayTrigger=function(a){a=a||10;var b=e[ensightenOptions.ns].when.defer();setTimeout(function(){b.resolve()},a);return b.promise};d.delayUntilTrigger=function(a,b,c,h){c=c||null;h=h||200;var u=+new Date,n=e[ensightenOptions.ns].when.defer(),m=function(){var p=a();p!=b?n.resolve(p):c?+new Date-u<c?setTimeout(m,h):n.reject("timed out"):
setTimeout(m,h)};m();return n.promise};f.applyTrigger=function(a){var b=e[ensightenOptions.ns].when.defer();a(function(){b.resolve(!0)});return b.promise};d.immediateTrigger=function(){return f.applyTrigger(e[ensightenOptions.ns].bindImmediate)};d.bottomOfBodyTrigger=function(){return f.applyTrigger(e[ensightenOptions.ns].bindDOMParsed)};d.whenValueExistsTrigger=function(){return e[ensightenOptions.ns].when.resolve(this.extract())};d.afterEnsightenCompleteTrigger=function(){return f.applyTrigger(e[ensightenOptions.ns].bindPageSpecificCompletion)};
d.afterElementsDownloadedTrigger=function(){return f.applyTrigger(e[ensightenOptions.ns].bindDOMLoaded)};d.getAllDataDefinitionsOnCurrentPage=function(){return f.dataDefinitions};d.getAllDataDefinitionsOnCurrentPage_S_C_N=function(){return f.dataDefinitionsBySourceCollName};d.getDataDefinitionById=function(a){return f.dataDefinitions[a||-1]||{}};d.getDataDefinitionBySourceCollectionName=function(a,b,c){return f.dataDefinitionsBySourceCollName[""+a+"."+b+"."+c]||{}};d.getDataDefinitionByPercentSyntax=
function(a){a=(""+a).split("_");return 1>a.length?{}:f.dataDefinitions[a[1]]||{}};d.resolve=function(a,b){var c=this,h=null;if(!f.checkForInvalidDataDefinitions(a))if(b)e[ensightenOptions.ns].bindDataDefinitionComplete(function(){var m=f.collectAvailableDataDefinitions(a);m.isInvalid||e[ensightenOptions.ns].when.all(m.promises).then(function(p){try{b.apply(c,p)}catch(q){e[ensightenOptions.ns].reportException(new f.DataDefinitionException(a,"Error resolving data definitions: "+a+". Details: "+q))}},
function(p){e[ensightenOptions.ns].reportException(new f.DataDefinitionException(a,"Error resolving data definitions: "+a+". Details: "+p))})});else{h=[];var u=a;d.utils.isArray(a)||(u=[a]);for(var n=0;n<u.length;n++)h.push(f.getSync(u[n]));return h=d.utils.isArray(a)?h:h[0]}};d.extract=function(a,b){var c="",h=function(){for(var q={},A=e.document.getElementsByTagName("META")||[],y=0,E=A.length;y<E;y++){var D=A[y].name||A[y].getAttribute("property")||"";0!==D.length&&(q[D]=A[y].content)}return q}(),
u=function(q){var A=h[q];if(A)return A;A=e.document.getElementsByTagName("META")||[];for(var y=0,E=A.length;y<E;y++){var D=A[y].name||A[y].getAttribute("property")||"";if(q==D)return A[y].content}},n=function(q){return(val=(new RegExp("&"+q+"=([^&]*)")).exec(e.location.search.replace(/^\?/,"&")))?val[0].split("=")[1]:""},m=function(q){return(val=(new RegExp("^"+q+"=.*|;\\s*"+q+"=.*")).exec(e.document.cookie))?val[0].split("=")[1].split(";")[0]:""},p=function(q){(q=getElement(q))&&q.nodeType&&1==q.nodeType&&
(q=q.value||q.innerHTML||"");return q.toString().replace(/\n|\r|\s\s+/g,"")||""};try{return b?"meta"==b?c=u(a):"cookie"==b?c=m(a):"param"==b?c=n(a):"content"==b?c=p(a):"var"==b&&(c=e[a]):c=u(a)||m(a)||n(a)||p(a)||e[a]||"",c||""}catch(q){return""}};d.event_param={};if("undefined"==typeof k)var k={exports:{}};return d}(window),window[ensightenOptions.ns].data.defineEngine("store",function(){var e={},B=window,v,f=Array.isArray||function(k){return"[object Array]"===Object.prototype.toString.call(k)};
e.set=function(k,a){};e.get=function(k){};e.remove=function(k){};e.clear=function(){};try{if("localStorage"in B&&B.localStorage){var d=B.localStorage;e.set=function(k,a){var b,c=window.JSON&&window.JSON.stringify?window.JSON:window[ensightenOptions.ns].JSON;if(f(k)){var h=0;for(b=k.length;h<b;h++)d.setItem(k[h],"string"===typeof a[h]?a[h]:c.stringify(a[h]))}else d.setItem(k,"string"===typeof a?a:c.stringify(a))};e.get=function(k){if(f(k)){var a={},b;var c=0;for(b=k.length;c<b;c++)a[k[c]]=d.getItem(k[c]);
return a}return d.getItem(k)};e.remove=function(k){if(f(k)){var a;var b=0;for(a=k.length;b<a;b++)d.removeItem(k[b])}else d.removeItem(k)};e.clear=function(){d.clear()};e.all=function(){return d}}}catch(k){}var r={};for(v in e)r[v]=e[v];r.testStorage=function(){try{var k="tk_"+Math.ceil(5E7*Math.random());r.set(k,"test");if("test"===r.get(k))return r.remove(k),!0}catch(a){}return!1};e.utils=r;return window[ensightenOptions.ns].data.local=e}()),window[ensightenOptions.ns].data.defineEngine("cookie",
function(e,B){var v=function(){return v.get.apply(v,arguments)},f=v.utils={isArray:Array.isArray||function(d){return"[object Array]"===Object.prototype.toString.call(d)},isPlainObject:window[ensightenOptions.ns].data.utils.isPlainObject,toArray:function(d){return Array.prototype.slice.call(d)},getKeys:Object.keys||function(d){var r=[],k="";for(k in d)d.hasOwnProperty(k)&&r.push(k);return r},escape:function(d){return String(d).replace(/[,;"\\=\s%]/g,function(r){return encodeURIComponent(r)})},retrieve:function(d,
r){return null==d?r:d},getAllCookies:function(){if(""===e.cookie)return{};for(var d=e.cookie.split("; "),r={},k=0,a=d.length;k<a;k++){var b=d[k].split("=");r[decodeURIComponent(b[0])]=decodeURIComponent(b[1])}return r},set:function(d,r,k){k=k||-1;if(f.isPlainObject(d))for(var a in d)d.hasOwnProperty(a)&&v.set(a,d[a],r);else if(f.isArray(d)){var b;a=0;for(b=d.length;a<b;a++)v.set(d[a],r[a],k)}else{a=k.expires!==B?k.expires:v.defaults.expires||"";"number"===typeof a&&(a=new Date(a));a=f.isPlainObject(a)&&
"toGMTString"in a?";expires="+a.toGMTString():f.isPlainObject(a)&&a instanceof Date?";expires="+a.toUTCString():";expires="+a;b=(b=k.path||v.defaults.path)?";path="+b:"";var c=k.domain||v.defaults.domain;c=c?";domain="+c:"";k=k.secure||v.defaults.secure?";secure":"";e.cookie=f.escape(d)+"="+f.escape(r)+a+b+c+k}},get:function(d,r){r=r||B;var k=f.getAllCookies();if(f.isArray(d)){for(var a={},b=0,c=d.length;b<c;b++)a[d[b]]=f.retrieve(k[d[b]],r),a[d[b]]===B&&(a[d[b]]=null);return a}a=f.retrieve(k[d],
r);return a===B?null:a},getGMTString:function(d){var r=new Date;r.setTime(r.getTime()+864E5*d);return r.toGMTString()}};v.defaults={path:"/",expires:f.getGMTString(90)};v.set=function(d,r){f.set(d,r)};v.remove=function(d){d=f.isArray(d)?d:f.toArray(arguments);for(var r=0,k=d.length;r<k;r++)f.set(d[r],"",{expires:-1})};v.clear=function(){return v.remove(f.getKeys(f.getAllCookies()))};v.get=function(d,r){return f.get(d,r)};v.all=function(){return f.getAllCookies()};v.utils=f;return window[ensightenOptions.ns].data.cookie=
v}(document)));
bby_prod_gateway.dataDefinitionIds = [63024,53628];/*
 For license information please see privacy-gateway-2.3.736.min.js.LICENSE.txt */
bby_prod_gateway.bindImmediate(function(){var G=window.bby_prod_gateway;bby_prod_gateway.registerDataDefinition(function(){bby_prod_gateway.data.define({extract:function(){return(window.track||window.dioPageData||{}).missionID||""},load:"page",trigger:G.data.bottomOfBodyTrigger,dataDefName:"GS Missions ID",collection:"tag-datalayer",source:"Manage",priv:"false"},{id:"53628"})},53628)},-1,-1,-1);
bby_prod_gateway.bindImmediate(function(){var G=window.bby_prod_gateway;bby_prod_gateway.registerDataDefinition(function(){bby_prod_gateway.data.define({extract:function(){return window.dioPageData&&window.dioPageData.pageName||"pageName not found"},load:"page",trigger:G.data.bottomOfBodyTrigger,dataDefName:"sample-definition",collection:"tag-datalayer",source:"Manage",priv:"false"},{id:"63024"})},63024)},-1,-1,-1);
bby_prod_gateway.bindImmediate(function(){var G=window.bby_prod_gateway;G.privacy=G.privacy||{};G.privacy.templates={}},3956850,756475,24);
bby_prod_gateway.bindDependencyImmediate(function(){var G=window.bby_prod_gateway;(()=>{function Aa(da){var aa=gb[da];if(void 0!==aa)return aa.exports;aa=gb[da]={exports:{}};return Za[da].call(aa.exports,aa,aa.exports,Aa),aa.exports}var Za={660:function(da,aa,ca){var A=ca(287).hp;da.exports=(()=>(()=>{function t(C){var q=E[C];if(void 0!==q)return q.exports;q=E[C]={exports:{}};return S[C](q,q.exports,t),q.exports}var S={686:()=>{},579:(C,q,L)=>{function R(H,M,p){var B=M;a:if("object"==typeof B&&B){var K=
B[Symbol.toPrimitive];if(void 0!==K){B=K.call(B,"string");if("object"!=typeof B)break a;throw new TypeError("@@toPrimitive must return a primitive value.");}B=String(B)}return(M="symbol"==typeof B?B:B+"")in H?Object.defineProperty(H,M,{value:p,enumerable:!0,configurable:!0,writable:!0}):H[M]=p,H}L.d(q,{w:()=>k});class k{constructor(H){this.destination=H;R(this,"type",void 0);R(this,"start",+new Date);R(this,"end",-1);R(this,"source",null);R(this,"status",null);R(this,"reasons",[]);R(this,"dataPatterns",
[]);R(this,"list",[]);R(this,"id",void 0);var M=this.start;{let p=0;if(null!=H&&0!=H.length)for(let B=0;B<H.length;B++)p=(p<<5)-p+H.charCodeAt(B),p|=0;H=p}this.id=M+H}addReason(H){this.reasons.push(H)}hasReason(H){return 0<this.reasons.length&&(new RegExp(this.reasons.join("|"))).test(H)}numReasons(){return this.reasons.length}}},317:(C,q,L)=>{function R(B,K,Q){var fa=K;a:if("object"==typeof fa&&fa){var oa=fa[Symbol.toPrimitive];if(void 0!==oa){fa=oa.call(fa,"string");if("object"!=typeof fa)break a;
throw new TypeError("@@toPrimitive must return a primitive value.");}fa=String(fa)}return(K="symbol"==typeof fa?fa:fa+"")in B?Object.defineProperty(B,K,{value:Q,enumerable:!0,configurable:!0,writable:!0}):B[K]=Q,B}function k(B,K,Q){var fa=K;a:if("object"==typeof fa&&fa){var oa=fa[Symbol.toPrimitive];if(void 0!==oa){fa=oa.call(fa,"string");if("object"!=typeof fa)break a;throw new TypeError("@@toPrimitive must return a primitive value.");}fa=String(fa)}return(K="symbol"==typeof fa?fa:fa+"")in B?Object.defineProperty(B,
K,{value:Q,enumerable:!0,configurable:!0,writable:!0}):B[K]=Q,B}L.d(q,{l:()=>p});var H=L(616);class M{constructor(B,K,Q,fa,oa,ba,ia){this.activeList=B;this.shouldAddCategoryToList=K;this.environment=Q;this.gatewayData=fa;this.activeEnvironmentCategories=oa;this.allowedTagsInLocalStorage=ba;this.blockedTagsInLocalStorage=ia;R(this,"tagsWithFiltersRegEx",void 0);R(this,"tagsWithAllowPaths",void 0);R(this,"tagsWithBlockPaths",void 0);R(this,"blockedTagListOverride",[]);R(this,"allowedTagListOverride",
[]);R(this,"update",(Y,c,z,J,F)=>{this.activeList=Y;this.environment=c;this.setGlobals(z,J,F)});R(this,"allowRequest",(Y,c,z)=>{var J=this.blockedTagListOverride.filter(X=>(new RegExp(X.tag)).test(Y)).some(X=>!X.paths),F=this.allowedTagListOverride.filter(X=>(new RegExp(X.tag)).test(Y)).some(X=>!X.paths);if(""!==c&&this.tagsWithFiltersRegEx.test(Y)&&!F&&!J){F=this.blockedTagListOverride.some(X=>(new RegExp(X.tag)).test(Y)&&H.B.arrayToRegex(X.paths).test(c));J=this.allowedTagListOverride.some(X=>(new RegExp(X.tag)).test(Y)&&
H.B.arrayToRegex(X.paths).test(c));for(var U=0;U<this.tagsWithAllowPaths.length;U++)if((new RegExp(this.tagsWithAllowPaths[U].tag)).test(Y)){let X=[];if(X=X.concat(this.tagsWithAllowPaths[U].paths),H.B.arrayToRegex(X).test(c))return z=!F,z;z=!1}for(F=0;F<this.tagsWithBlockPaths.length;F++)if((new RegExp(this.tagsWithBlockPaths[F].tag)).test(Y)){U=[];if(U=U.concat(this.tagsWithBlockPaths[F].paths),H.B.arrayToRegex(U).test(c))return z=!!J,z;z=!0}}return z});R(this,"buildPathFilterList",(Y,c,z,J)=>{let F=
[],U=[],X=[];const ma=d=>d.tag,ua=d=>({tag:d.tag,paths:d.paths}),b=d=>{F.push.apply(F,this.extractTagsWithFilters(d,ma));X.push.apply(X,this.extractTagsWithFilters(d,ua,"blockPaths"));U.push.apply(U,this.extractTagsWithFilters(d,ua,"allowPaths"))};for(const d in Y)this.shouldAddCategoryToList(d,c[d])&&b(Y[d]),z&&0<z.length&&(z.forEach(l=>this.allowedTagListOverride.push(l)),b(z),0<F.length&&(F=this.pruneTagListFromLocalStorage(z,F,!0),U=this.pruneTagListFromLocalStorage(z,U,!0,"tag"))),J&&0<J.length&&
(J.forEach(l=>this.blockedTagListOverride.push(l)),b(J),0<F.length&&(F=this.pruneTagListFromLocalStorage(J,F,!1),X=this.pruneTagListFromLocalStorage(J,X,!1,"tag")));return{regEx:H.B.arrayToRegex(F),allowPathTags:U,blockPathTags:X}});R(this,"pruneTagListFromLocalStorage",(Y,c,z,J)=>(H.B.isWhitelist(this.gatewayData,this.environment)===z&&this.checkForFiltersToRemove(Y).forEach(F=>{c=c.filter(U=>(null!=J&&(U=U[J]),U!==F.tag))}),c));R(this,"checkForFiltersToRemove",Y=>Y.filter(c=>void 0===c.filter));
R(this,"setGlobals",(Y,c,z)=>{this.activeEnvironmentCategories=Y;Y=this.buildPathFilterList(this.activeList,this.activeEnvironmentCategories,c,z);this.tagsWithAllowPaths=Y.allowPathTags;this.tagsWithBlockPaths=Y.blockPathTags;this.tagsWithFiltersRegEx=Y.regEx});this.setGlobals(oa,ba,ia)}extractTagsWithFilters(B,K,Q){let fa=oa=>void 0!==oa.filter;return null!=Q&&(fa=oa=>oa.filter===Q),B.filter(fa).map(K)}}class p{constructor(B,K,Q){let fa=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],oa=
4<arguments.length&&void 0!==arguments[4]?arguments[4]:[];this.environment=B;this.gatewayData=K;this.activeEnvironmentCategories=Q;this.allowedUrls=fa;this.blockedUrls=oa;k(this,"activeList",void 0);k(this,"listRegex",RegExp("a^"));k(this,"pathFilterManager",void 0);k(this,"usesAllowlist",!0);k(this,"usesPathFilter",!1);k(this,"isInitialized",!1);k(this,"alwaysAllowedListRegex",RegExp("a^"));k(this,"defaultCategory","default");k(this,"allowRequest",(ba,ia,Y)=>{const c=this.getListRegex();let z=!1;
(!1===this.usesAllowlist?c.test&&!c.test(ba)&&(z=!0):c.test&&c.test(ba)&&(z=!0),null!=this.pathFilterManager&&(z=this.pathFilterManager.allowRequest(ba,Y,z)),z)||(ia.addReason(this.usesAllowlist?"Whitelist":"Blacklist"),ba=this.findMatchedCategories(ba),ia.list=ba,this.gatewayData.enableBotAndFraudProtection&&ia.addReason(this.gatewayData.enableBotAndFraudProtectionReason));return z});k(this,"updateListValues",(ba,ia,Y)=>{this.buildListRegex(this.environment,ba,ia,Y);this.usesPathFilter&&null==this.pathFilterManager&&
(this.pathFilterManager=new M(this.getList(),this.shouldAddToListRegex,this.environment,this.gatewayData,this.activeEnvironmentCategories,this.allowedUrls,this.blockedUrls));null!=this.pathFilterManager&&this.pathFilterManager.update(this.getList(),this.environment,ba,ia,Y)});k(this,"updateEnvironment",(ba,ia,Y,c)=>{this.environment=ba;this.updateListValues(ia,Y,c)});k(this,"getListRegex",()=>this.listRegex);k(this,"getList",()=>this.activeList);k(this,"getAlwaysAllowedListRegex",()=>this.alwaysAllowedListRegex);
k(this,"getTranslatedList",()=>{const ba=this.getList();for(const ia in ba)"default"!==ia&&(ba[ia]=this.getCategoryTranslations(ba[ia]));return ba});k(this,"buildListRegex",(ba,ia,Y,c)=>{this.setUsesAllowlist(ba);this.setActiveList(ba);this.usesAllowlist&&this.buildListRegexForAlwaysAllowedDomains();ba=this.getList();let z=[];for(const J in ba)this.shouldAddToListRegex(J,ia[J])&&(z=z.concat(this.getObjectVals(ba[J],"tag")));this.usesAllowlist?(Y&&0<Y.length&&(z=z.concat(this.getObjectVals(Y,"tag"))),
c&&0<c.length&&(z=z.filter(J=>-1===this.getObjectVals(c,"tag").indexOf(J)))):(c&&0<c.length&&(z=z.concat(this.getObjectVals(c,"tag"))),Y&&0<Y.length&&(z=z.filter(J=>-1===this.getObjectVals(Y,"tag").indexOf(J))));this.listRegex=H.B.arrayToRegex(z,this.usesAllowlist?"i":void 0)});k(this,"shouldAddToListRegex",(ba,ia)=>{let Y=!1;const c=this.gatewayData.enableBotAndFraudProtection;return ba===this.defaultCategory?(Y=!0,Y):(this.usesAllowlist?c?Y=!1:"1"===ia?Y=!0:ia&&"0"===ia||!this.isEnvironmentCategoryEnabled(ba,
1)||(Y=!0):c||"0"===ia?Y=!0:ia&&"1"===ia||!this.isEnvironmentCategoryEnabled(ba,0)||(Y=!0),Y)});k(this,"isEnvironmentCategoryEnabled",(ba,ia)=>this.environment&&this.environment.optVals[ba]===ia);k(this,"getObjectVals",(ba,ia)=>{const Y=[];for(let c=0;c<ba.length;c++){const z=ba[c][ia];""!==z&&void 0!==z&&null!=z&&Y.push(z);ba.filter&&(this.usesPathFilter=!0)}return Y});k(this,"setUsesAllowlist",ba=>{this.usesAllowlist=H.B.isWhitelist(this.gatewayData,ba)});k(this,"setActiveList",ba=>{if(this.usesAllowlist?
ba&&Object.prototype.hasOwnProperty.call(ba,"whitelist")?this.activeList=ba.whitelist:this.activeList=this.gatewayData.whitelist||{}:ba&&Object.prototype.hasOwnProperty.call(ba,"blacklist")?this.activeList=ba.blacklist:this.activeList=this.gatewayData.blacklist||{},Object.prototype.hasOwnProperty.call(this.activeList,this.defaultCategory)||!0!==this.usesAllowlist||(this.activeList[this.defaultCategory]=[]),this.usesAllowlist){const ia=[location.hostname,this.gatewayData.info.nexus,this.gatewayData.info.reporting],
Y=c=>0===this.activeList[this.defaultCategory].filter(function(z){return z.tag===c}).length;for(let c=0;c<ia.length;c++)Y(ia[c])&&this.activeList[this.defaultCategory].push({tag:ia[c]});H.B.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,ba,"enableTCF")&&(Y("ensighten.mgr.consensu.org")&&this.activeList[this.defaultCategory].push({tag:"ensighten.mgr.consensu.org"}),Y("iab.ensighten.com")&&this.activeList[this.defaultCategory].push({tag:"iab.ensighten.com"}))}});k(this,"findMatchedCategories",
ba=>{const ia=[],Y=this.getList();for(const c in Y)for(let z=0;z<Y[c].length;z++)ba.match(Y[c][z].tag)&&ia.push(c);return 0===ia.length&&ia.push(this.usesAllowlist?"Whitelist":"Blacklist"),ia});k(this,"buildListRegexForAlwaysAllowedDomains",()=>{var ba=this.getList()&&this.getList()[this.defaultCategory]||[];ba=this.getObjectVals(ba,"tag");this.alwaysAllowedListRegex=H.B.arrayToRegex(ba,"i")});k(this,"getCategoryTranslations",ba=>{if(this.environment.translation&&this.environment.translation.purposes)for(let ia=
0;ia<ba.length;ia++){const Y=[];if(ba[ia].purpose)for(let c=0;c<ba[ia].purpose.length;c++)Y.push(this.environment.translation.purposes[ba[ia].purpose[c]]);ba[ia].purpose=Y}return ba});this.buildListRegex(B,Q,fa,oa);this.usesPathFilter&&(this.pathFilterManager=new M(this.getList(),this.shouldAddToListRegex,this.environment,this.gatewayData,this.activeEnvironmentCategories,this.allowedUrls,this.blockedUrls))}}},775:(C,q,L)=>{function R(c,z,J){var F=z;a:if("object"==typeof F&&F){var U=F[Symbol.toPrimitive];
if(void 0!==U){F=U.call(F,"string");if("object"!=typeof F)break a;throw new TypeError("@@toPrimitive must return a primitive value.");}F=String(F)}return(z="symbol"==typeof F?F:F+"")in c?Object.defineProperty(c,z,{value:J,enumerable:!0,configurable:!0,writable:!0}):c[z]=J,c}function k(c,z,J){var F=z;a:if("object"==typeof F&&F){var U=F[Symbol.toPrimitive];if(void 0!==U){F=U.call(F,"string");if("object"!=typeof F)break a;throw new TypeError("@@toPrimitive must return a primitive value.");}F=String(F)}return(z=
"symbol"==typeof F?F:F+"")in c?Object.defineProperty(c,z,{value:J,enumerable:!0,configurable:!0,writable:!0}):c[z]=J,c}function H(c,z,J){var F=z;a:if("object"==typeof F&&F){var U=F[Symbol.toPrimitive];if(void 0!==U){F=U.call(F,"string");if("object"!=typeof F)break a;throw new TypeError("@@toPrimitive must return a primitive value.");}F=String(F)}return(z="symbol"==typeof F?F:F+"")in c?Object.defineProperty(c,z,{value:J,enumerable:!0,configurable:!0,writable:!0}):c[z]=J,c}function M(c,z,J){var F=z;
a:if("object"==typeof F&&F){var U=F[Symbol.toPrimitive];if(void 0!==U){F=U.call(F,"string");if("object"!=typeof F)break a;throw new TypeError("@@toPrimitive must return a primitive value.");}F=String(F)}return(z="symbol"==typeof F?F:F+"")in c?Object.defineProperty(c,z,{value:J,enumerable:!0,configurable:!0,writable:!0}):c[z]=J,c}L.d(q,{M:()=>Y});var p=L(579),B=L(616),K=function(c){return c.Block="Block",c.Rewrite="Rewrite",c}(K||{});class Q{constructor(c,z){R(this,"gatewayData",void 0);R(this,"environment",
void 0);R(this,"sslEnforcementMode",void 0);R(this,"insecureProtocolRegex",/http:|ws:/i);this.gatewayData=c;this.environment=z;this.sslEnforcementMode=this.fallbackOrReturnEnforcementMode()}updateEnvironment(c){this.environment=c;this.sslEnforcementMode=this.fallbackOrReturnEnforcementMode()}allowRequest(c,z,J){let F=!0;return B.B.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"requireSSL")&&("https:"===c&&this.insecureProtocolRegex.test(z)&&(F=!1),F||J.addReason("SSL")),
F}shouldRewriteProtocol(c,z){z=B.B.getUrl(c.destination,z).protocol;let J=!1;return this.insecureProtocolRegex.test(z)&&(this.sslEnforcementMode!==K.Rewrite||c.hasReason("Whitelist")||c.hasReason("Blacklist")||!c.hasReason("SSL")||(J=!0)),J}rewriteProtocol(c){return c.replace(/^http:\/\//i,"https://").replace(/^ws:\/\//i,"wss://")}fallbackOrReturnEnforcementMode(){return this.gatewayData.sslConfig||this.environment&&this.environment.sslEnforcementMode?B.B.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.sslConfig,
this.environment,"sslEnforcementMode"):K.Block}}C=L(711);var fa=L.n(C);class oa{constructor(c,z,J){this.enabled=c;this.dataMonitoringParams=z;this.environment=J;k(this,"blockURLParamsRegex",void 0);k(this,"activeMonitoringParams",void 0);k(this,"dataMonitoringAllowedDomainsRegex",void 0);k(this,"mode",void 0);k(this,"maskCharacter",void 0);k(this,"base64Pattern",/((?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?)/g);this.updateEnvironment(J)}validateActivateMonitoring(c){return null!=
c&&(c.mode=c.mode||"block",c.blockURLParamsRegex=c.blockURLParamsRegex||[],c.domainsAllowed=c.domainsAllowed||[],c.monitorBase64Data=c.monitorBase64Data||!1,c.maskCharacter=c.maskCharacter||"~",c.processRequestBody=c.processRequestBody||!1),c}getActiveMonitoringParams(){let c;return c=this.environment&&Object.prototype.hasOwnProperty.call(this.environment,"dataMonitoring")?this.validateActivateMonitoring(this.environment.dataMonitoring):this.validateActivateMonitoring(this.dataMonitoringParams)||
{},c}updateEnvironment(c){this.environment=c;this.activeMonitoringParams=this.getActiveMonitoringParams();c=this.getBlockURLParamsRegexArray(this.activeMonitoringParams);this.blockURLParamsRegex=B.B.arrayToRegex(c);this.dataMonitoringAllowedDomainsRegex=B.B.arrayToRegex(this.activeMonitoringParams.domainsAllowed);this.mode=this.activeMonitoringParams.mode||"block";this.maskCharacter=this.activeMonitoringParams.maskCharacter||"~"}isDataPatternReported(c){return null!=c.blockURLParamsRegex&&0<c.blockURLParamsRegex.length&&
"string"==typeof c.blockURLParamsRegex[0].regex}allowRequest(c,z,J){let F=!0;const U=c.destination;if(this.enabled){const X=B.B.decodeUriComponent(U);if(this.activeMonitoringParams.monitorBase64Data&&(F=!this.checkForBase64Data(U,c)),F&&(F=!this.blockURLParamsRegex.test(X)),this.activeMonitoringParams.processRequestBody&&J)J instanceof FormData?J=this.formDataToString(J):J instanceof URLSearchParams&&(J=J.toString()),this.activeMonitoringParams.monitorBase64Data&&"string"==typeof J&&(F=!this.checkForBase64Data(J,
c)),F&&(F=!this.blockURLParamsRegex.test(J)),this.findMatchedDataPatterns(this.activeMonitoringParams.blockURLParamsRegex,c,J);!1===F&&0<this.activeMonitoringParams.domainsAllowed.length&&(F=this.dataMonitoringAllowedDomainsRegex.test(z));F||(c.addReason("DATA_MONITORING"),this.isDataPatternReported(this.activeMonitoringParams)&&this.findMatchedDataPatterns(this.activeMonitoringParams.blockURLParamsRegex,c,X))}return F}getMaskedUrl(c){return c?this.editQueryString(c,B.B.repeatString(this.maskCharacter,
10)):c}getRedactedUrl(c){return c?this.editQueryString(c,""):c}getMaskedData(c){return c?this.editData(c,B.B.repeatString(this.maskCharacter,10)):c}getRedactedData(c){return c?this.editData(c,""):c}shouldMaskData(c){let z=!1;return"mask"===this.mode&&c.hasReason("DATA_MONITORING")&&(z=!0),z}shouldRedactData(c){let z=!1;return"redact"===this.mode&&c.hasReason("DATA_MONITORING")&&(z=!0),z}shouldMaskUrl(c){let z=!1;return"mask"!==this.mode||c.hasReason("Whitelist")||c.hasReason("Blacklist")||!c.hasReason("DATA_MONITORING")||
(z=!0),z}shouldRedactUrl(c){let z=!1;return"redact"!==this.mode||c.hasReason("Whitelist")||c.hasReason("Blacklist")||!c.hasReason("DATA_MONITORING")||(z=!0),z}editPath(c,z,J){-1<c.indexOf(";")&&(c=this.editSemiColonDelimitedPath(c,z,J));c=c.split("/");for(J=0;J<c.length;J++)if(""!==c[J]&&this.blockURLParamsRegex.test&&this.blockURLParamsRegex.test(c[J]))c[J]=c[J].replace(this.blockURLParamsRegex,z),c[J]=B.B.encodeUriComponent(c[J]),"redact"===this.mode&&""===c[J]&&(c.splice(J,1),J--);else if(this.activeMonitoringParams.monitorBase64Data&&
4<c[J].length&&this.base64Pattern.test(c[J]))try{const F=fa().decode(c[J]);this.blockURLParamsRegex.test&&this.blockURLParamsRegex.test(F)&&(c[J]=c[J].replace(this.base64Pattern,z),c[J]=B.B.encodeUriComponent(c[J]),"redact"===this.mode&&""===c[J]&&(c.splice(J,1),J--))}catch(F){}return c.join("/")}formDataToString(c){const z=[];let J,F;for(c=c.entries();!(J=c.next()).done&&(F=J.value);)z.push(F[0]+"\x3d"+F[1]);return z.join("\x26")}editBase64String(c,z){let J=c;const F=c.match(this.base64Pattern);
for(const U in F){if(4>F[U].length)continue;const X=fa().decode(F[U]);this.blockURLParamsRegex.test(X)&&(J=c.replace(F[U],z))}return J}editData(c,z){if(this.activeMonitoringParams.processRequestBody)if(c instanceof String||"string"==typeof c){if(this.activeMonitoringParams.monitorBase64Data&&(c=this.editBase64String(c,z)),this.blockURLParamsRegex.test&&"string"==typeof c)for(;this.blockURLParamsRegex.test(c);)c=c.replace(this.blockURLParamsRegex,z)}else if(c instanceof FormData){var J=new FormData,
F,U,X;for(F=c.entries();!(U=F.next()).done&&(X=U.value);){c=this.editData(X[0],z);var ma=this.editData(X[1],z);J.append(c,ma)}c=J}else if(c instanceof URLSearchParams){U=new URLSearchParams;for(X=c.entries();!(J=X.next()).done&&(F=J.value);)c=this.editData(F[0],z),ma=this.editData(F[1],z),U.append(c,ma);c=U}return c}editQueryString(c,z){if(!this.enabled||!B.B.isValidUrl(c))return c;const J="redact"===this.mode;let F=z;""===z&&(F="");z=c.split("?")[1];c=B.B.getUrl(c);if(c.pathname=this.editPath(c.pathname,
F,J),"string"==typeof z&&""!==z)this.activeMonitoringParams.monitorBase64Data&&(z=this.editBase64String(z,F)),z=z.split("\x26"),0<z.length&&(c.search=this.editSearchParams(z,F,J),J&&""===c.search&&(c.href=c.href.replace("?","")));return c.href}getBlockURLParamsRegexArray(c){const z=[];if(!this.isDataPatternReported(c))return c.blockURLParamsRegex||[];for(let J=0;J<c.blockURLParamsRegex.length;J++)z.push(c.blockURLParamsRegex[J].regex);return z}findMatchedDataPatterns(c,z,J){for(let F=0;F<c.length;F++){const U=
new RegExp(c[F].regex);U.test&&U.test(J)&&z.dataPatterns.push(c[F].name)}}checkForBase64Data(c,z){c=c.match(this.base64Pattern);for(const J in c){if(4>c[J].length)continue;const F=fa().decode(c[J]);if(this.blockURLParamsRegex.test(F))return this.findMatchedDataPatterns(this.activeMonitoringParams.blockURLParamsRegex,z,F),z.dataPatterns.push("base64"),!0}return!1}editSemiColonDelimitedPath(c,z,J){let F=c.split("/");F=F.filter(function(X){return"string"==typeof X&&""!==X});c="";const U=this;return B.B.each(F,
function(X,ma){const ua=X.split(";");B.B.each(ua,function(b,d){var l=b.split("\x3d");b=l[0];let y;l=B.B.decodeUriComponent(l[1]||"");let N="";if("string"==typeof b&&""!==b&&U.blockURLParamsRegex.test)for(;U.blockURLParamsRegex.test(b);)y=!!J,b=b.replace(U.blockURLParamsRegex,z);if("string"==typeof l&&""!==l&&U.blockURLParamsRegex.test)for(;U.blockURLParamsRegex.test(l);)y=!!J,l=l.replace(U.blockURLParamsRegex,z);"string"==typeof b&&"string"==typeof l&&(l=B.B.encodeUriComponent(l),N+=y&&J?"":""!==
l||y?b+"\x3d"+l:b);""===N?ua.splice(d,1):ua[d]=N});F[ma]=ua.join(";")}),c+=F.join("/"),c}editSearchParams(c,z,J){let F="";c=c.filter(function(X){return"string"==typeof X&&""!==X});const U=this;return B.B.each(c,function(X){var ma=X.split("\x3d");X=ma[0];let ua;ma=B.B.decodeUriComponent(ma[1]||"");if("string"==typeof X&&""!==X&&U.blockURLParamsRegex.test)for(;U.blockURLParamsRegex.test(X);)ua=!!J,X=X.replace(U.blockURLParamsRegex,z);if("string"==typeof ma&&""!==ma&&U.blockURLParamsRegex.test)for(;U.blockURLParamsRegex.test(ma);)ua=
!!J,ma=ma.replace(U.blockURLParamsRegex,z);"string"==typeof X&&"string"==typeof ma&&(ma=B.B.encodeUriComponent(ma),F+=ua&&J?"":""!==ma||ua?X+"\x3d"+ma+"\x26":X+"\x26")}),F=F.slice(0,-1),F}}class ba{static allowProtocolAndBypassProcessing(c,z,J,F){J=this.protoRegex.test(c)&&void 0!==this.allowedProtocols[c]&&(!this.allowedProtocols[c].additionalAllowConditions||this.allowedProtocols[c].additionalAllowConditions(J,z,F));return J||this.addBlockReasonToRequest(c,z),J}static isBlockedRequestBypassed(c){return this.requestBypassRegex.test(c)}static addBlockReasonToRequest(c,
z){z&&"function"==typeof z.addReason&&void 0!==this.allowedProtocols[c]&&z.addReason(this.allowedProtocols[c].blockReason)}}var ia=ba;H(ba,"defaultProtocolConfig",{data:{mediaTypes:[]}});H(ba,"allowedProtocols",{"about:":{blockReason:"ABOUT_PROTOCOL"},"blob:":{blockReason:"BLOB_PROTOCOL"},"mailto:":{additionalAllowConditions:function(c){return!c.blockMailtoLinks},blockReason:"MAIL_TO"},"chrome-extension:":{additionalAllowConditions:function(c){return!c.blockExtensions},blockReason:"CHROME_BROWSER_EXTENSION"},
"data:":{additionalAllowConditions:function(c,z){var J=2<arguments.length&&void 0!==arguments[2]?arguments[2]:ia.defaultProtocolConfig;let F=[-1<z.destination.indexOf("data:image"),"script"===z.type&&c.disableDataProtocolJavascriptRequests];if(c.allowAdditionalDataMediaTypes){var U;J=[...((null==J||null===(U=J.data)||void 0===U?void 0:U.mediaTypes)||[])];F=[...F,...J.map(X=>-1<z.destination.indexOf("data:".concat(X)))]}return F.includes(!0)},blockReason:"DATA_PROTOCOL"},"hblob:":{blockReason:"HBLOB_PROTOCOL"},
"moz-extension:":{additionalAllowConditions:function(c){return!c.blockExtensions},blockReason:"MOZ_BROWSER_EXTENSION"},"safari-extension:":{additionalAllowConditions:function(c){return!c.blockExtensions},blockReason:"SAFARI_BROWSER_EXTENSION"},"tel:":{blockReason:"TEL_PROTOCOL"}});H(ba,"protoRegex",new RegExp(Object.keys(ia.allowedProtocols).join("|"),"i"));H(ba,"requestBypassRegex",RegExp("chrome-extension:|safari-extension:|moz-extension:","i"));class Y{constructor(c,z,J,F){this.gatewayData=c;this.environment=
z;this.historyEntryReporter=J;this.listProcessor=F;M(this,"sslManager",void 0);M(this,"dataGovernanceManager",void 0);M(this,"protoManager",void 0);M(this,"updateEnvironment",(U,X,ma,ua)=>{this.environment=U;this.dataGovernanceManager.updateEnvironment(U);this.sslManager.updateEnvironment(U);this.listProcessor.updateEnvironment(U,X,ma,ua)});M(this,"updateListValues",(U,X,ma)=>{this.listProcessor.updateListValues(U,X,ma)});this.sslManager=new Q(c,z);this.dataGovernanceManager=new oa(c.featureToggles.enableDataMonitoring,
c.dataMonitoring,z);this.protoManager=ba}processURL(c,z,J,F,U){const X={};return this.processURLInternal(c,null,z,J,X,F,U,ma=>{this.historyEntryReporter.resourceComplete(X,ma,"allowed")})}processURLAndBody(c,z,J,F,U,X){const ma={};this.processURLInternal(c,z,J,F,ma,U,X,ua=>{this.historyEntryReporter.resourceComplete(ma,ua,"allowed")})}isVoidURL(c){return"string"!=typeof c||""===c||0===c.indexOf("javascript:")||2===c.indexOf("javascript:")}isValidURL(c,z){try{B.B.getUrl(c,z)}catch(J){return!1}return!0}createEventHandler(c,
z){return()=>{this.historyEntryReporter.resourceComplete(this,c,z)}}generateEnsRequest(c,z,J,F){c=new p.w(B.B.getUrl(c,F).href);return c.source=J,c.type=z,c}processEnsRequest(c,z,J,F,U,X,ma){this.onBefore(c,J,F,U)?ma(c.id):(ma=this.getBlockedSrcString(c.type,c,U),J=this.getBlockedRequestBody(c,J),B.B.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"enableFiltering")&&("function"==typeof X&&void 0!==X&&X(ma,J),z=ma),this.sendBlockReport(c,F,U));return z}getModifiedEnsRequestStatus(c,
z){let J="blocked";return this.dataGovernanceManager.shouldMaskUrl(c)&&(J="masked"),this.dataGovernanceManager.shouldRedactUrl(c)&&(J="redact"),this.sslManager.shouldRewriteProtocol(c,z)&&(J="rewrite"),J}processURLInternal(c,z,J,F,U,X,ma,ua){if(this.isVoidURL(c)||!this.isValidURL(c,X))return c;J=this.generateEnsRequest(c,J,F,X);return this.processEnsRequest(J,c,z,U,X,ma,ua)}sendBlockReport(c,z,J){J=this.getModifiedEnsRequestStatus(c,J);this.historyEntryReporter.resourceComplete(z,c.id,J)}onBefore(c,
z,J,F){return this.historyEntryReporter.createHistoryEntry(c,J),this.allowRequest(c,z,F)}allowRequest(c,z,J){let F=!0;var U=c.destination,X=B.B.getUrl(U,J),ma="string"==typeof J&&""!==J?B.B.getUrl(J).protocol:B.B.getUrl(U).protocol;J=X.hostname;const ua=X.pathname,b=X.protocol;if(this.protoManager.allowProtocolAndBypassProcessing(b,c,this.gatewayData.featureToggles,this.gatewayData.protocolConfig))return!0;if(this.protoManager.isBlockedRequestBypassed(b))return!1;X=!0;""!==U&&(X=this.sslManager.allowRequest(ma,
b,c));ma=U=!0;return ma=this.dataGovernanceManager.allowRequest(c,J,z),this.environment&&(U=this.listProcessor.allowRequest(J,c,ua)),!1!==U&&!1!==X&&!1!==ma||(F=!1),F}getBlockedSrcString(c,z,J){let F=z.destination;const U=function(){let X;return X=["img","image","source"].includes(null==c?void 0:c.trim().toLowerCase())?"":"//javascript:;",X};if(this.sslManager.shouldRewriteProtocol(z,J)){if(F=this.sslManager.rewriteProtocol(z.destination),1===z.reasons.length)return F}else if(z.hasReason("SSL"))return U();
return this.dataGovernanceManager.shouldMaskUrl(z)?this.dataGovernanceManager.getMaskedUrl(F):this.dataGovernanceManager.shouldRedactUrl(z)?this.dataGovernanceManager.getRedactedUrl(F):U()}getBlockedRequestBody(c,z){return this.dataGovernanceManager.shouldMaskData(c)?this.dataGovernanceManager.getMaskedData(z):this.dataGovernanceManager.shouldRedactData(c)?this.dataGovernanceManager.getRedactedData(z):z}}},616:(C,q,L)=>{L.d(q,{B:()=>R});const R={arrayToRegex:function(k){let H=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:void 0;if(Array.isArray(k))return k&&0<k.length&&k.join?new RegExp(k.join("|"),H):RegExp("a^",H)},each:function(k,H,M){void 0!==k&&"length"in k||(k={length:0});for(let p=0;p<k.length;p++)H.call(M,k[p],p,k)},isUriEncoded:function(k){return"string"==typeof k&&k!==decodeURIComponent(k)},isValidUrl:function(k){try{return new URL(k),!0}catch(H){return!1}},isWhitelist:function(k,H){return this.getEnvironmentOverrideOrGlobalDefault(k.featureToggles,H,"usesWhitelist")},
decodeUriComponent:function(k){let H=k;try{if("string"==typeof k)for(;this.isUriEncoded(H);)H=decodeURIComponent(H)}catch(M){console.warn("URI: "+k+". Could not be decoded properly. Original string was returned.")}return H},encodeUriComponent:function(k){let H=k;try{"string"==typeof k&&(H=encodeURIComponent(k))}catch(M){console.warn("URI: "+k+". Could not be encoded properly. Original string was returned.")}return H},repeatString:function(k,H){const M=[];let p=0;for(;p<H;)M[p++]=k;return M.join("")},
getEnvironmentOverrideOrGlobalDefault:function(k,H,M){return H&&Object.prototype.hasOwnProperty.call(H,M)?H[M]:k[M]},getUrl(k,H){let M;return M="string"==typeof H&&""!==H?new URL(k,H):new URL(k),M}}},788:(C,q,L)=>{function R(p,B){return void 0===B&&(B="utf8"),A.isBuffer(p)?H(p.toString("base64")):H(A.from(p,B).toString("base64"))}function k(p){return p=p.toString(),M.default(p).replace(/\-/g,"+").replace(/_/g,"/")}function H(p){return p.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var M=
L(931);R.encode=R;R.decode=function(p,B){return void 0===B&&(B="utf8"),A.from(k(p),"base64").toString(B)};R.toBase64=k;R.fromBase64=H;R.toBuffer=function(p){return A.from(k(p),"base64")};q.default=R},931:(C,q)=>{Object.defineProperty(q,"__esModule",{value:!0});q.default=function(L){var R=L.length,k=R%4;if(!k)return L;var H=R;k=4-k;R=A.alloc(R+k);for(R.write(L);k--;)R.write("\x3d",H++);return R.toString()}},711:(C,q,L)=>{C.exports=L(788).default;C.exports.default=C.exports}},E={};t.n=C=>{var q=C&&
C.__esModule?()=>C.default:()=>C;return t.d(q,{a:q}),q};t.d=(C,q)=>{for(var L in q)t.o(q,L)&&!t.o(C,L)&&Object.defineProperty(C,L,{enumerable:!0,get:q[L]})};t.o=(C,q)=>Object.prototype.hasOwnProperty.call(C,q);t.r=C=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"});Object.defineProperty(C,"__esModule",{value:!0})};var v={};return(()=>{t.r(v);t.d(v,{EnsRequest:()=>L.w,ListProcessor:()=>R.l,UrlProcessor:()=>C.M,utilities:()=>q.B});var C=t(775),
q=t(616),L=t(579),R=t(317),k=t(686),H={};for(const M in k)0>["default","UrlProcessor","utilities","EnsRequest","ListProcessor"].indexOf(M)&&(H[M]=()=>k[M]);t.d(v,H)})(),v})())()},347:(da,aa,ca)=>{function A(a,e,m,h){return new (m||(m=Promise))(function(r,u){function D(g){try{w(h.next(g))}catch(f){u(f)}}function O(g){try{w(h.throw(g))}catch(f){u(f)}}function w(g){var f;g.done?r(g.value):(f=g.value,f instanceof m?f:new m(function(n){n(f)})).then(D,O)}w((h=h.apply(a,e||[])).next())})}function t(a){return parseInt(a,
10)||0}function S(a){return!function(e){return function(m){return"12"===v(m,/\(iP.+; CPU .*OS (\d+)[_\d]*.*\) AppleWebKit\//,1)||function(h,r,u){const D=/\(Macintosh;.*Mac OS X (\d+)_(\d+)[_\d]*.*\) AppleWebKit\//;return v(u,D,1)===String(h)&&v(u,D,2)===String(r)}(10,14,m)&&(function(h){return null!=h.match(/Version\/.* Safari\//)&&!E(h,/Chrom(e|ium)/)}(m)||E(m,/^Mozilla\/[\.\d]+ \(Macintosh;.*Mac OS X [_\d]+\) AppleWebKit\/[\.\d]+ \(KHTML, like Gecko\)$/))}(e)||function(m){var h;if(!(h=E(m,/Chrom(e|ium)/)&&
C(51,m)&&!C(67,m))&&(h=E(m,/UCBrowser\//))){const r=/UCBrowser\/(\d+)\.(\d+)\.(\d+)[\.\d]* /;h=t(v(m,r,1));const u=t(v(m,r,2));m=t(v(m,r,3));h=!(12!==h?12<h:13!==u?13<u:2<=m)}return h}(e)}(String(a))}function E(a,e){return null!=a.match(e)}function v(a,e,m){a=a.match(e);return null!=a&&void 0!==a[m]?a[m]:null}function C(a,e){return t(v(e,/Chrom[^ \/]+\/(\d+)[\.\d]* /,1))>=a}function q(a,e,m){for(const h in a)void 0!==a[h][e]&&!1!==a[h][e]&&a[m].push(h)}function L(a){var e=window.XMLHttpRequest.prototype.open,
m=window.XMLHttpRequest.prototype.send,h=p.utilities.getReferrer();return window.XMLHttpRequest.prototype.send=function(r){let u=this.url;return void 0!==this.url&&""!==this.url?a.processURLAndBody(u,r,"xhr",p.utilities.apiToSource("xhr"),h,function(D,O){u=D;r=O}):u=a.processURL(u,"xhr",p.utilities.apiToSource("xhr"),h),m.apply(this,[r])},window.XMLHttpRequest.prototype.open=function(r,u,D,O,w){if((u=a.processURL(u,"xhr",p.utilities.apiToSource("xhr"),h))&&"//javascript:;"!==u)return this.url=u,arguments[1]=
u,e.apply(this,arguments);this.setRequestHeader=function(){};this.send=function(){}},{resetHandlers:function(){window.XMLHttpRequest.prototype.send=m;window.XMLHttpRequest.prototype.open=e}}}function R(a,e){function m(w){return Promise.reject(e?Error(w+" fetch blocked by privacy-gateway"):w+" fetch blocked by privacy-gateway")}function h(w){return""!==w&&a.isVoidURL(w)}const r=window.fetch,u=window.Request,D=void 0!==window.fetch&&void 0!==window.Request,O=p.utilities.getReferrer();return D&&(window.fetch=
function(w){if("string"==typeof w||w instanceof String){const g=w;if(h(w=a.processURL(w,"fetch",p.utilities.apiToSource("fetch"),O)))return m(g)}return w instanceof window.Request&&!0===w.ensBlocked?m(""):r.apply(this,arguments)},window.Request=function(w,g){if(w instanceof URL&&(w=w.toString()),!h(w))if(g&&g.body?a.processURLAndBody(w,g.body,"request",p.utilities.apiToSource("request"),O,function(f,n){w=f;g.body=n}):a.processURL(w,"request",p.utilities.apiToSource("request"),O,function(f){w=f}),
!h(w))return new u(w,g);this.ensBlocked=!0},window.Request.prototype=u.prototype),{resetHandlers:function(){window.fetch=r;window.Request=u;void 0!==u&&(window.Request.prototype=u.prototype)}}}function k(a,e){const m=window.navigator.sendBeacon,h=p.utilities.getReferrer();return window.navigator.sendBeacon=function(r,u){if(void 0!==m){if("string"==typeof r||r instanceof String){if(-1!==r.indexOf(a))return m.apply(this,[r,u]);if(void 0!==u){if(e.processURLAndBody(r,u,"sendBeacon",p.utilities.apiToSource("sendBeacon"),
h,function(D,O){r=D;u=O}),e.isVoidURL(r))return}else if(r=e.processURL(r,"sendBeacon",p.utilities.apiToSource("sendBeacon"),h),e.isVoidURL(r))return}return m.apply(this,[r,u])}},{resetHandlers:function(){return window.navigator.sendBeacon=m},sendBeacon:function(r,u){return window.navigator.sendBeacon(r,u)}}}ca.r(aa);ca.d(aa,{Gateway:()=>nb});Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;class H{static getSuffix(a){return A(this,void 0,void 0,function*(){const e=`https://${H.proxyDNS}/resolve?type=PTR&name=${a}.query.publicsuffix.zone`;
try{return(yield(yield fetch(e)).json()).Answer.filter(m=>12===m.type)[0].data.slice(0,-1)}catch(m){return m}})}}H.proxyDNS="doh.cq0.co";class M{constructor(a,e,m,h,r){this.clientName=a;this.cookieDomain_=e;this.isNetworkOnlyEnabled=m;this.customGetter=h;this.customSetter=r;this.defaultCookieRetentionLength=31536E6;e.then(u=>{this.setCookieDomain(u);const D=a.toUpperCase()+M.ensightenPrivacy;this.isNetworkOnlyEnabled||localStorage.setItem(D+`${M.tldPrefix}-${window.location.hostname}`,u)});this.cookieDomainPath=
"/"}static calculateCookieDomain(a,e,m,h,r){return A(this,void 0,void 0,function*(){let u=a||window.location.hostname;const D=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/gm.test(u);if("localhost"===u||D)return u;if(!r&&h&&M.getTLDSuffixCookie(h,u))return M.getTLDSuffixCookie(h,u);try{const O=(e?M.getPublicSuffix(u,m):yield H.getSuffix(u)).split(".").length+1;return u.split(".").slice(-O).join(".")}catch(O){return u}})}static getPublicSuffix(a,
e){e=e.join("|");a=(new RegExp(e)).exec(a)[0];return a.startsWith(".")&&(a=a.substring(1)),a}static build(a,e,m,h,r,u){e=M.calculateCookieDomain(window.location.hostname,e,m,a,h);return new M(a,e,h,r,u)}deleteAllCookies(){return A(this,void 0,void 0,function*(){return this.cookieDomain_.then(a=>{a=document.cookie.split(";");for(let m=0;m<a.length;m++){var e=a[m];const h=e.indexOf("\x3d");e=-1<h?e.substr(0,h):e;document.cookie=e+"\x3d; path\x3d/; expires\x3dThu, 01 Jan 1970 00:00:00 GMT; domain\x3d"+
this.getCookieDomain()}})})}deleteCookie(a){return A(this,void 0,void 0,function*(){return this.cookieDomain_.then(e=>{this.clientName=this.clientName.toUpperCase();e=this.clientName+M.ensightenPrivacy+this._parseCookieSuffix(a);const m=document.cookie.split(";");for(let r=0;r<m.length;r++){var h=m[r];const u=h.indexOf("\x3d");h=-1<u?h.substr(0,u):h;h.trim()===e.trim()&&(document.cookie=h+"\x3d; path\x3d/; expires\x3dThu, 01 Jan 1970 00:00:00 GMT; domain\x3d"+this.getCookieDomain())}})})}getCategoryMapFromCookieTypes(a){const e=
{};for(let m=0;m<a.length;m++){const h=a[m];e[h]=this.getCookie(h)}return e}getCookie(a){return"function"==typeof this.customGetter?this.customGetter(a):this.defaultGetCookie(a)}defaultGetCookie(a){a=this.clientName.toUpperCase()+M.ensightenPrivacy+this._parseCookieSuffix(a);const e=document.cookie.match(new RegExp(a+"\x3d([^;]+)"));if(e)return e[1];if(a=document.cookie.match(new RegExp(a+"\x3d([^;]+)")))return a[1]}getCookiesFromTypes(a){const e={};for(let m=0;m<a.length;m++){const h=a[m],r=this.getCookie(h);
void 0!==r&&null!=r&&(e[this.clientName.toUpperCase()+M.ensightenPrivacy+this._parseCookieSuffix(h)]=r)}return e}setDefaultCookieRetentionPeriod(a){this.defaultCookieRetentionLength=this.parseRetentionPeriod(a)}getRetentionPeriodUTCString(a){return(new Date(+new Date+a)).toUTCString()}parseRetentionPeriod(a){a=parseInt(a,10);return isNaN(a)?this.defaultCookieRetentionLength:a}setCookie(a,e,m){return A(this,void 0,void 0,function*(){return"number"!=typeof m&&(m=this.parseRetentionPeriod(m)),"function"==
typeof this.customSetter?Promise.resolve(this.customSetter(a,e,m)):yield this.defaultSetCookie(a,e,m)})}setCookies(a,e){return A(this,void 0,void 0,function*(){for(const m in a)yield this.setCookie(m,a[m],e)})}defaultSetCookie(a,e,m){return A(this,void 0,void 0,function*(){return this.cookieDomain_.then(h=>{h=this.clientName.toUpperCase()+M.ensightenPrivacy;const r=this._parseCookieSuffix(a);let u="";const D=/https:/.test(location.protocol),O=this.getRetentionPeriodUTCString(m);S(navigator.userAgent)&&
(u=" SameSite\x3d"+(D?"None":"Lax")+";");D&&(u+=" Secure;");h=h+r+"\x3d"+e+"; path\x3d"+this.cookieDomainPath+";"+u+" domain\x3d"+this.getCookieDomain()+"; expires\x3d"+O;return document.cookie=h,h})})}setCookieDomain(a){this.cookieDomain=a}getCookieDomain(){return this.cookieDomain}setCookieDomainPath(a){this.cookieDomainPath=a}getCookieDomainPath(){return this.cookieDomainPath}_parseCookieSuffix(a){return a.replace(/ /g,"_")}}M.ensightenPrivacy="_ENSIGHTEN_PRIVACY_";M.tldPrefix="TLD";M.getTLDSuffixCookie=
(a,e)=>{a=a.toUpperCase()+M.ensightenPrivacy;return localStorage.getItem(a+`${M.tldPrefix}-${e}`)};var p=ca(514);class B{constructor(a,e,m,h,r,u,D,O){this.environmentChangeCallbacks=[];this.activeEnvironmentTranslation=this.activeEnvironment=null;this.enableAsyncEnvironments=!1;this.getAsyncEnvironmentFromStorage=w=>JSON.parse(window.localStorage.getItem("environments-"+w.name));this.hasEnvironmentHashChanged=w=>{const g=this.getAsyncEnvironmentFromStorage(w);let f;g&&(f=null==g?void 0:g.asyncEnvironmentUrl);
return f!==w.asyncEnvironmentUrl};this.getAsyncEnvironmentFromPromise=(w,g,f)=>{const n=this.nexusDomain+`/privacy/environments/${this.clientName}/${this.publishPath}/`+w.asyncEnvironmentUrl;w.asyncEnvironmentUrl;if(this.hasEnvironmentHashChanged(w))w.asyncEnvironmentUrl&&fetch("//"+n).then(x=>{if(!x.ok)throw Error(`Network response was not ok for translation ${w.name} `+x.statusText);return x.json()}).then(x=>{x?(this.setAsyncEnvironmentParameters(w,x),window.localStorage.setItem("environments-"+
w.name,JSON.stringify(w)),f.forEach(I=>I(w))):console.log(`No DATA retrieved for ${w.name} translation on ${g}`)}).catch(x=>{console.error(`There has been a problem with your fetch operation  ${w.name} translation on ${g}:`,x)});else{const x=this.getAsyncEnvironmentFromStorage(w);this.setAsyncEnvironmentParameters(w,x);f.forEach(I=>I(x))}};this.getAsyncEnvironmentHtml=(w,g)=>{fetch("//"+(this.nexusDomain+`/privacy/environments/${this.clientName}/${this.publishPath}/`+w.bannerHtmlUrl)).then(f=>{if(!f.ok)throw Error(`Network response was not ok for translation ${w.name} `+
f.statusText);return f.text()}).then(f=>{f?g.forEach(n=>n(w,f)):console.log(`No html retrieved for ${w.name}`)}).catch(f=>{console.error(`There has been a problem with your fetch operation for the ${w.name} banner`,f)})};this.clearEnvironment=()=>A(this,void 0,void 0,function*(){yield this.cookieManager.deleteCookie("LOCALE");yield this.setEnvironment(void 0)});this.evalCondition=w=>{let g,f=!1;switch(w.type){case "host":g=this.document.location.hostname;break;case "url":g=this.document.URL;break;
case "cookie":g=this.getCookie(w.key);break;case "jsVar":g=this.getJSVarValue(w.key);break;default:console.warn("Error evaluating environment target")}switch(w.operator){case "equals":f=this.evaluateEquals(g,w);break;case "contains":f=this.evaluateContains(g,w);break;case "exists":f=this.evaluateExists(g);break;case "regexp":f=this.evaluateRegExp(g,w);break;default:console.warn("Error evaluating comparator for environment")}return!1===w.shouldBePositive&&(f=!0!==f),!0===f&&w._and&&(f=this.evalCondition(w._and)),
!1===f&&w._or&&(f=this.evalCondition(w._or)),f};this.getEnvironmentByLocale=w=>{let g=null;for(let f=0;f<this.environmentsCount;f++)this.localeMatches(this.environmentConfigs[f],w)&&(g=this.environmentConfigs[f]);return g};this.environmentExists=w=>null!=this.getEnvironmentByLocale(w);this.getActiveEnvironment=()=>this.activeEnvironment;this.getActiveLocale=()=>this.activeEnvironment.languageCode;this.getAvailableLocales=()=>{const w=[];for(let g=0;g<this.environmentsCount;g++)w.push(this.environmentConfigs[g].languageCode);
return w};this.registerEnvironmentChangeCallback=w=>{this.environmentChangeCallbacks.push(w)};this.setEnvironment=w=>A(this,void 0,void 0,function*(){this.environmentExists(w)?(yield this.cookieManager.setCookie("LOCALE",w),this.initializeActiveEnvironment(),this.fireEnvironmentChangeCallbacks()):w||(this.initializeActiveEnvironment(),this.activeEnvironment=this.getActiveEnvironment(),this.fireEnvironmentChangeCallbacks())});this.evaluateContains=(w,g)=>!!w&&(w=w.toString(),g.caseInsensitive?-1!==
w.toLowerCase().indexOf(g.value.toLowerCase()):-1!==w.indexOf(g.value));this.evaluateEquals=(w,g)=>!!w&&(g.caseInsensitive?w.toLowerCase()==g.value.toLowerCase():w==g.value);this.evaluateExists=w=>{let g=!1;return w&&(g=!0),g};this.evaluateRegExp=(w,g)=>{let f=new RegExp(g.value);return g.caseInsensitive&&(f=new RegExp(g.value,"i")),void 0!==w&&""!==w&&f.test(w)};this.fireEnvironmentChangeCallbacks=()=>{const w=this.environmentChangeCallbacks.length;for(let g=0;g<w;g++)"function"==typeof this.environmentChangeCallbacks[g]&&
this.environmentChangeCallbacks[g](this.activeEnvironment)};this.getCookie=w=>{if(w=this.document.cookie.match(new RegExp(w+"\x3d([^;]+)")))return w[1]};this.getDefaultEnvironment=()=>{let w=null;for(let g=0;g<this.environmentConfigs.length;g++)if(this.defaultEnvName&&this.environmentConfigs[g].name===this.defaultEnvName){w=this.environmentConfigs[g];break}return w};this.getEnvironmentByConditions=()=>{const w=p.utilities.getBrowserLocale();for(let g=0;g<this.environmentsCount;g++)if(this.hasConditions(this.environmentConfigs[g])){if(this.evalCondition(this.environmentConfigs[g].condition))return this.environmentConfigs[g]}else if(this.localeMatches(this.environmentConfigs[g],
w))return this.environmentConfigs[g];return null};this.hasConditions=w=>w.condition&&w.condition.type&&w.condition.operator;this.localeMatches=(w,g)=>{if(w&&g){if(w.languageCode===g)return!0;g=g.split("-")[0];if(w.languageCode===g)return!0}return!1};this.getEnvironmentByLocaleCookie=()=>{let w=null;const g=this.cookieManager.getCookie("LOCALE");return g&&(w=this.getEnvironmentByLocale(g)),w};this.initializeActiveEnvironment=()=>{let w;(w=this.getEnvironmentByLocaleCookie())||(w=this.getEnvironmentByConditions());
w||(w=this.getDefaultEnvironment());w&&w.translation&&(w.translation.save=w.translation.save||"SAVE",w.translation.cancel=w.translation.cancel||"CANCEL",w.translation.close=w.translation.close||"CLOSE");this.activeEnvironment=w};this.getJSVarValue=w=>{let g=void 0!==window[w]?window[w]:void 0;if(w&&"string"==typeof w&&!g){let f,n=0;w=w.split(".");const x=w.length;for(;n<x;n++)f=f?f[w[n]]:window[w[n]],g=void 0!==f?f:void 0}return g};this.environmentConfigs=e;this.environmentsCount=this.environmentConfigs.length;
this.document=a;this.nexusDomain=D;this.defaultEnvName=m;this.clientName=h;this.cookieManager=r;this.enableAsyncEnvironments=u;this.publishPath=O;this.initializeActiveEnvironment()}setAsyncEnvironmentParameters(a,e){a.translation=e.translation;a.bannerConfig=e.bannerConfig;a.consentModalConfig=e.consentModalConfig;null!==e.privacyNoticeCustomConfig&&(a.privacyNoticeCustomConfig=e.privacyNoticeCustomConfig);null!==e.consentModalCustomConfig&&(a.consentModalCustomConfig=e.consentModalCustomConfig)}}
var K=ca(897);da=ca(711);var Q=ca.n(da);class fa{constructor(){this.consoleLoggingEnabled=!1;this.checkForConsoleLoggingParam()}checkForConsoleLoggingParam(){let a;const e={},m=window.location.href.slice(window.location.href.indexOf("?")+1).split("\x26");for(let h=0;h<m.length;h++)a=m[h].split("\x3d"),e[a[0]]=a[1];e.ensLogger&&"true"===e.ensLogger&&this.enableConsoleLogging()}disableConsoleLogging(){this.setConsoleLoggingState(!1)}enableConsoleLogging(){this.setConsoleLoggingState(!0)}getConsoleLoggingState(){return this.consoleLoggingEnabled}consoleLog(...a){this.consoleLoggingEnabled&&
window.console&&console.log(a)}setConsoleLoggingState(a){this.consoleLoggingEnabled=a}}var oa=ca(287).hp;class ba{constructor(){this.instanceId=(268435456*(1+Math.random())|0).toString(36);this.ensLogger=new fa;this.options={maxUrlSize:32E3};this.beaconCounter=0;this.version="1.0.0"}setEnvironment(a){this.environmentName=a?a.name:"none";this.defaultOptions=a?a.optVals:{}}compressReportString(a){const e=oa.from(a).length;var m=oa.from(a);a=oa.alloc(K.utils.compressBound(m.length));m=K.utils.compress(m,
a);return{encodedBody:Q().encode(a.slice(0,m)),rawLength:e}}beacon(a,e){if(null==e||0>=e||null==a||0>=a.length)return"";e=`${this.urlPath}?n=${this.beaconCounter++}&c=${this.clientId}&i=${this.instanceId}&${this.publishPath?`p=${encodeURIComponent(this.publishPath)}&`:""}s=${e}&d=${a}`;this.sendBeaconReportingDisabled||"function"!=typeof this.sendBeacon?(new this.imageReference).src=e:this.sendBeacon(e,a);return e}}class ia extends ba{constructor(a,e,m,h,r,u,D,O,w,g,f,n,x,I,V,T,W){super();this.imageReference=
a;this.environmentName=e;this.modalType=m;this.defaultOptions=h;this.clientId=r;this.clientName=u;this.publishPath=D;this.mode=O;this.cookiesTypes=w;this.gatewayVersion=g;this.reportingEnabled=f;this.cookieManager=n;this.nexusDomain=x;this.customReporter=I;this.sendBeaconReportingDisabled=V;this.sendBeacon=T;this.useCategoryNameInExternalConsentNotifications=W;this.cookiesTypesMap=new Map;this.pendingEvents=[];this.urlPath=`//${this.nexusDomain}/privacy/v1/c/b.rnc`;this.cookiesTypes.forEach(ka=>this.cookiesTypesMap.set(ka.replace(/ /g,
"_"),ka))}sendReport(a,e){if(this.reportingEnabled){const m=this.generateRawReport(a,e);if(0<m.events.length){const {encodedBody:h,rawLength:r}=this.compressReportString(JSON.stringify(m));return"function"==typeof this.customReporter&&null!=a&&null!=e&&this.executeCustomReporter(a,e),this.pendingEvents=[],this.beacon(h,r)}}}generateRawReport(a,e){return{version:this.version,gateway:this.gatewayVersion,clientId:this.clientId,clientName:this.clientName,publishPath:this.publishPath,mode:this.mode,cookies:this.cookieManager.getCookiesFromTypes(this.cookiesTypes.concat("MODAL_VIEWED",
"MODAL_LOADED","LOCALE","BANNER_VIEWED","BANNER_LOADED")),dt:Date.now(),settings:{modal:this.modalType,environment:this.environmentName,defaults:this.defaultOptions},events:null!=a&&null!=e?this.buildEvents(a,e).concat(this.pendingEvents):this.pendingEvents}}buildEvents(a,e){const m=[];for(const r in e)if(a.hasOwnProperty(r)){if(e[r]!==a[r]){var h=this.buildEvent(r,e[r]);m.push(h)}}else h=this.buildEvent(r,e[r]),m.push(h);return m}addCustomEvent(a){return!(!this.reportingEnabled||null==a)&&(a.hasOwnProperty("event")?
(this.pendingEvents.push(a),!0):(this.ensLogger.consoleLog("customConsentEvent's must contain the key 'event'"),!1))}buildEvent(a,e){const m={event:"cookieChanged",dt:Date.now()};return m[p.utilities.cookieNameToCookieType(this.clientName,a)]=e,m}executeCustomReporter(a,e){a=this.buildEvents(a,e);for(e=0;e<a.length;e++){var m=a[e],h=Object.keys(m)[2];m=m[h];this.useCategoryNameInExternalConsentNotifications&&this.cookiesTypesMap.has(h)&&(h=this.cookiesTypesMap.get(h));this.customReporter(h,m)}for(a=
0;a<this.pendingEvents.length;a++)e=this.pendingEvents[a],h=Object.keys(e)[1],m=e[h],e.isTag&&this.customReporter(h,m)}}var Y,c=ca(660);!function(a){a[a.BANNER_CSS=0]="BANNER_CSS";a[a.BANNER_HTML=1]="BANNER_HTML";a[a.CONSENT_MODAL_CSS=2]="CONSENT_MODAL_CSS";a[a.CONSENT_MODAL_HTML=3]="CONSENT_MODAL_HTML";a[a.NO_TOGGLES_MODAL_HTML=4]="NO_TOGGLES_MODAL_HTML";a[a.CONSENT_WIDGET_CSS=5]="CONSENT_WIDGET_CSS";a[a.CONSENT_WIDGET_HTML=6]="CONSENT_WIDGET_HTML";a[a.CONTACT_INFO_CSS=7]="CONTACT_INFO_CSS";a[a.CONTACT_INFO_HTML=
8]="CONTACT_INFO_HTML";a[a.COOKIE_MODAL_CSS=9]="COOKIE_MODAL_CSS";a[a.COOKIE_MODAL_HTML=10]="COOKIE_MODAL_HTML";a[a.REQUEST_CONFIRMATION_MODAL_HTML=11]="REQUEST_CONFIRMATION_MODAL_HTML";a[a.REQUEST_CONFIRMATION_MODAL_CSS=12]="REQUEST_CONFIRMATION_MODAL_CSS"}(Y||(Y={}));const z={};class J{constructor(a){let e;for(e in this.getTemplate=function(m){return this.useLocalTemplates?z[m]:this.getModalBannerError()},this.getModalBannerError=function(){throw Error("Ensighten API error: Your modal template is not implemented.");
},this.useLocalTemplates=a,Y)z[e]=G.privacy.templates[Y[e]]}}var F;class U{constructor(a,e,m,h){this.isGcmEnabled=!1;this.gcmPreviousState={};this.consentTypes=[...Object.values(F)];this.init=function(){this.checkCMP();this.gtag=this.setGTag();this.initGoogleConsent(this.defaultConsent);"{}"!==JSON.stringify(this.consent)&&this.updateGoogleConsent(this.consent,!1);this.gcm_options.url_passthrough&&this.gtag("set","url_passthrough",this.gcm_options.url_passthrough);this.gcm_options.ads_data_redaction&&
this.gtag("set","ads_data_redaction",this.gcm_options.ads_data_redaction)};this.checkCMP=()=>{const r=window[`${this.dataLayer||"dataLayer"}`];for(let u=0;u<(r||[]).length;u++)if(!["gtm.js","gtm.dom","gtm.load"].includes(r[u].event)&&"js"!==r[u][0]){console.warn("Privacy: Google Consent Mode configuration warning - Privacy must load before any Google tags in order to maintain compliance.");break}};this.setGTag=()=>{const r=this.dataLayer||"dataLayer";window[`${r}`]=window[`${r}`]||[];return function(){try{window[`${r}`].push(arguments)}catch(u){console.error(u+
" \n Data Layer is not valid format: \n",window[`${r}`])}}};this.retrievePartialGcm=function(r,u){return Object.keys(this.gcm_options).filter(D=>u(D)).reduce((D,O)=>(D[O]=r[O],D),{})};this.initGoogleConsent=r=>{this.gcmPreviousState=r=this.getGCMState(r);"{}"!==JSON.stringify(r)&&(this.gtag("set","developer_id.dNjQwYj",!0),this.gtag("consent","default",r))};this.updateGoogleConsent=r=>{const u=this.getGCMState(r),D={};Object.keys(this.gcmPreviousState).forEach(O=>{this.gcmPreviousState[O]!==u[O]&&
(D[O]=u[O])});this.gcmPreviousState=u;"{}"!==JSON.stringify(D)&&this.gtag("consent","update",D)};this.getGCMState=r=>{let u=new X(this.gcm_options);const D=this.retrievePartialGcm(u,w=>w.includes("_tag")||w.includes("_category"));this.consentTypes.forEach(w=>{var g;null===D[`${w+"_category"}`]?null!==D[`${w+"_tag"}`]&&((g=[].concat(...Object.keys(r).map(f=>r[f].tags)).find(f=>f.tagName===u[w+"_tag"]))&&g.tagEnabled?u[w]="granted":u[w]="denied"):(null===(g=r[u[w+"_category"]])||void 0===g?0:g.categoryEnabled)?
u[w]="granted":u[w]="denied"});u=this.retrievePartialGcm(u,w=>null!==u[w]);const O={};return this.consentTypes.forEach(w=>{u.hasOwnProperty(w)&&(O[w]=u[w])}),O};this.defaultConsent=a;this.consent=e;this.isGcmEnabled=h||!1;this.gcm_options=new X(m);this.dataLayer=this.gcm_options.dataLayer;this.init()}}U.getInstance=(a,e,m,h)=>(U.instance||(U.instance=new U(a,e,m,h)),U.instance);(function(a){a.ad_storage="ad_storage";a.ad_user_data="ad_user_data";a.ad_personalization="ad_personalization";a.analytics_storage=
"analytics_storage";a.functionality_storage="functionality_storage";a.personalization_storage="personalization_storage";a.security_storage="security_storage"})(F||(F={}));class X{constructor(a){this.security_storage_tag=this.personalization_storage_tag=this.functionality_storage_tag=this.analytics_storage_tag=this.ad_personalization_tag=this.ad_storage_tag=this.ad_user_data_tag=this.security_storage_category=this.personalization_storage_category=this.functionality_storage_category=this.analytics_storage_category=
this.ad_user_data_category=this.ad_storage_category=this.ad_personalization_category=null;this[ma]=null;this[ua]=null;this[b]=null;this[d]=null;this[l]=null;this[y]=null;this[N]=null;this.dataLayer="dataLayer";this.ads_data_redaction=this.url_passthrough=!1;Object.keys(this).forEach(e=>{a[e]?this[e]=a[e]:this[e]=null})}}var ma=F.ad_personalization;var ua=F.functionality_storage;var b=F.personalization_storage;var d=F.security_storage;var l=F.ad_storage;var y=F.ad_user_data;var N=F.analytics_storage;
class Z{constructor(a,e,m,h,r,u){this.cookieManager=a;this.listProcessor=e;this.consentReporter=m;this.environment=h;this.tagAccessManager=r;this.gatewayData=u;this.setConsentStatus=(D,O,w,g)=>A(this,void 0,void 0,function*(){var f={};f[D]=this.getConsentStatus(D);var n=this.cookieManager.getCookiesFromTypes([D]);this.allowPerTagOptOut&&this.tagAccessManager.clearTags();const x=O?"1":"0";yield this.cookieManager.setCookie(D,x,w);const I=this.cookieManager.getCookiesFromTypes([D]);this.tagAccessManager&&
this.allowPerTagOptOut&&this.allowOrBlockTags(D,x,g);null!=this.consentReporter&&this.consentReporter.sendReport(n,I);n={};n[D]=this.getConsentStatus(D);f=this.calculateConsentDiff(f,n);this.googleConsentManager&&this.googleConsentManager.isGcmEnabled&&this.googleConsentManager.updateGoogleConsent(n);Z.fireConsentChangeCallbacks(f)});this.setConsentStatuses=(D,O,w)=>A(this,void 0,void 0,function*(){var g=this.getConsentStatus(),f=[];const n={};for(var x in D)f.push(x),n[x]=D[x]?"1":"0";x=this.cookieManager.getCookiesFromTypes(f);
yield this.cookieManager.setCookies(n,O);const I=this.cookieManager.getCookiesFromTypes(f);if(this.tagAccessManager)for(const V in n)this.allowPerTagOptOut&&this.allowOrBlockTags(V,n[V],w);this.listProcessor.updateListValues(this.cookieManager.getCategoryMapFromCookieTypes(f),this.tagAccessManager.getAllowedTags(),this.tagAccessManager.getBlockedTags());null!=this.consentReporter&&this.consentReporter.sendReport(x,I);f=this.getConsentStatus();g=this.calculateConsentDiff(g,f);this.googleConsentManager&&
this.googleConsentManager.isGcmEnabled&&this.googleConsentManager.updateGoogleConsent(f);Z.fireConsentChangeCallbacks(g)});this.retrieveTagStatuses=(D,O,w,g)=>D.map(f=>w);this.setAllowPerTagOptOut(h,u.featureToggles);this.setGoogleConsentManager(h,u.featureToggles,u)}setAllowPerTagOptOut(a,e){this.allowPerTagOptOut=c.utilities.getEnvironmentOverrideOrGlobalDefault(e,a,"allowPerTagOptOut")}getAllowPerTagOptOut(){return this.allowPerTagOptOut}getGoogleConsentManager(){return this.googleConsentManager}setGoogleConsentManager(a,
e,m){const h=this.getConsentStatus(),r=this.getDefaultConsent();e=c.utilities.getEnvironmentOverrideOrGlobalDefault(e,a,"enableGoogleConsent");a=c.utilities.getEnvironmentOverrideOrGlobalDefault(m,a,"gcm_options");e&&a&&(this.googleConsentManager=U.getInstance(r,h,a,e))}denyAll(a){return A(this,void 0,void 0,function*(){const e={};a.cookieTypes.forEach(m=>e[m]=!1);yield this.setConsentStatuses(e,null,{ignoreModalState:!0})})}allowAll(a){return A(this,void 0,void 0,function*(){const e={};a.cookieTypes.forEach(m=>
e[m]=!0);yield this.setConsentStatuses(e,null,{ignoreModalState:!0})})}getConsentStatus(a,e){var m={};if(a)e?(m="1"===this.cookieManager.getCookie(a),m=this.computeCategoryConsentStatus(a,m).tags.find(h=>h.tagName===e)):(m="1"===this.cookieManager.getCookie(a),m=this.computeCategoryConsentStatus(a,m));else{a=[];this.environment&&this.environment.optVals&&(a=Object.keys(this.environment.optVals));a=this.cookieManager.getCategoryMapFromCookieTypes(a);for(const h of Object.keys(a))null==a[h]&&(a[h]=
this.environment.optVals[h].toString());for(const h in a)m[h]=this.computeCategoryConsentStatus(h,"1"===a[h])}return m}getDefaultConsent(){let a={},e=[];return this.environment&&this.environment.optVals&&(e=Object.keys(this.environment.optVals)),e.forEach(m=>{a[m]=this.computeCategoryConsentStatus(m,1===this.environment.optVals[m])}),a}calculateConsentDiff(a,e){const m={};for(const h in e)if(a[h]){const r=a[h],u=e[h],D={};r.categoryEnabled!==u.categoryEnabled&&(D.categoryEnabled=u.categoryEnabled);
const O=[];for(const w of u.tags)r.tags.find(g=>g.tagName===w.tagName).tagEnabled!==w.tagEnabled&&O.push(w);0<O.length&&(D.tags=O);0<Object.keys(D).length&&(m[h]=D)}else m[h]=e[h];return m}allowOrBlockTags(a,e,m){const h=this.listProcessor.getList()[a]||[];m=this.retrieveTagStatuses(h,a,e,m);this.tagAccessManager.computeOptInOptOutEvents(h,m,a,e).map(r=>{this.tagAccessManager[r.tagStatus?"allowTag":"blockTag"](r.tag,r.tagStatusChanged)})}checkCategories(a,e){return a.find(m=>"object"==typeof m?m.name===
e:m===e)}computeCategoryConsentStatus(a,e){if(this.gatewayData.enableBotAndFraudProtection){var m=c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData,this.environment,"globalPrivacyControlCategories");c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"honorGlobalPrivacyControl")&&(0===m.length||this.checkCategories(m,a))&&(e=!1)}m={categoryEnabled:e,tags:[]};a=this.listProcessor.getList()[a]||[];for(let h=0;h<a.length;h++){const r=this.shouldTagBeChecked(e,
a[h]);m.tags.push({tagName:a[h].displayName,tag:a[h].tag,tagEnabled:r})}return m}static registerConsentChangeCallback(a){Z.consentChangeCallbacks.push(a)}static fireConsentChangeCallbacks(a){for(const e of Z.consentChangeCallbacks)"function"==typeof e&&e(a)}shouldTagBeChecked(a,e){let m;return a?(m=!0,this.tagAccessManager.isTagInBlockedList(e)&&(m=!1)):(m=!1,this.tagAccessManager.isTagInAllowedList(e)&&(m=!0)),m}}Z.consentChangeCallbacks=[];class pa extends Z{constructor(a,e,m,h,r,u,D,O,w){super(a,
e,m,h,O,r);this.gatewayData=r;this.updateListValues=u;this.templateManager=D;this.cookieVals=[];this.modalHtmlString="";this.ESC_KEYCODE=27;this.cookieValsState=[];this.injectModalDelay=100;this.openModalDelay=150;this.buttonTranslation={ensAcceptAll:"consentModalAllowAll",ensRejectAll:"consentModalDenyAll",ensSave:"save",ensCancel:"cancel"};this.getConsentStatus=(g,f)=>super.getConsentStatus(g,f);this.retrieveTagStatuses=(g,f,n,x)=>(null==x?0:x.ignoreModalState)?g.map(I=>n):g.map(I=>{I=this.generateTagSlideId(f,
I);return document.getElementById(I).checked?"1":"0"});this.modalLoaded=()=>A(this,void 0,void 0,function*(){const g=this.cookieManager.getCookiesFromTypes(["MODAL_LOADED"]);yield this.cookieManager.setCookie("MODAL_LOADED","1");const f=this.cookieManager.getCookiesFromTypes(["MODAL_LOADED"]);this.consentReporter.sendReport(g,f)});this.modalViewed=()=>A(this,void 0,void 0,function*(){const g=this.cookieManager.getCookiesFromTypes(["MODAL_VIEWED"]);yield this.cookieManager.setCookie("MODAL_VIEWED",
"1");const f=this.cookieManager.getCookiesFromTypes(["MODAL_VIEWED"]);this.consentReporter.sendReport(g,f)});this.getCurrentCookieVal=g=>{g=document.getElementById(g+"Slide");let f=0;return g&&g.checked&&(f=1),f};this.saveNewCookieValues=()=>{const g=this.cookieManager.getCategoryMapFromCookieTypes(this.gatewayData.cookieTypes);for(const f in this.cookieManager.getCategoryMapFromCookieTypes(this.gatewayData.cookieTypes))g[f]=1===this.getCurrentCookieVal(f);this.setConsentStatuses(g)};this.getCookieValsState=
()=>{const g=document.querySelectorAll(".ensCheckbox");for(let f=0;f<g.length;f++)this.cookieValsState.push(g[f].checked)};this.resetCookieValsState=()=>{this.cookieValsState=[]};this.setCookieValsState=()=>{if(0!==this.cookieValsState.length){var g=document.querySelectorAll(".ensCheckbox");for(let f=0;f<g.length;f++)g[f].checked=this.cookieValsState[f]}};this.openModal=()=>{var g,f;"function"==typeof(null===(f=null===(g=null===G||void 0===G?void 0:G.privacy)||void 0===g?void 0:g.cookieModal)||void 0===
f?void 0:f.beforeOpen)&&G.privacy.cookieModal.beforeOpen(this.cookieModal);p.utilities.domReady(()=>{setTimeout(()=>{var n,x;if(this.cookieModal.style.display="block",this.getIncludeModalCustomization(this.environment))this.addModalCustomization();else{const I=window.innerWidth/2,V=window.innerHeight/2,T=parseInt(window.getComputedStyle(this.cookieModal).width)/2,W=parseInt(window.getComputedStyle(this.cookieModal).height)/2;this.cookieModal.style.left=I-T+"px";this.cookieModal.style.top=V-W+"px"}this.onOpenModal();
this.modalLoaded();"function"==typeof(null===(x=null===(n=null===G||void 0===G?void 0:G.privacy)||void 0===n?void 0:n.cookieModal)||void 0===x?void 0:x.afterOpen)&&G.privacy.cookieModal.afterOpen(this.cookieModal)},this.openModalDelay)})};this.getIncludeModalCustomization=function(g){return c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,g,"includeConsentModalCustomConfig")};this.addModalCustomization=function(){const g=this.getModalCustomization();this.setModalSize(g);
this.setModalPosition(g);this.setModalColor(g)};this.getModalCustomization=function(){return c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"consentModalCustomConfig")};this.setModalSize=g=>{this.cookieModal.style.width=g.consentModalHSize+"%";this.cookieModal.style.height=g.consentModalVSize+"%";this.cookieModal.style.overflow="scroll"};this.setModalPosition=g=>{"Left"===g.consentModalHPosition?this.cookieModal.style.left=g.consentModalHMargin+
"%":"Right"===g.consentModalHPosition?this.cookieModal.style.right=g.consentModalHMargin+"%":this.cookieModal.style.left=(100-g.consentModalHSize)/2+"%";"Top"===g.consentModalVPosition?this.cookieModal.style.top=g.consentModalVMargin+"%":"Bottom"===g.consentModalVPosition?this.cookieModal.style.bottom=g.consentModalVMargin+"%":this.cookieModal.style.top=(100-g.consentModalVSize)/2+"%"};this.setModalColor=g=>{this.cookieModal.style.backgroundColor=g.consentModalBackgroundHex;const f=document.querySelector(".ensTitle"),
n=document.querySelector(".consentDescription"),x=document.querySelector(".ensModal");f.style.color=g.consentModalTextHex;n.style.color=g.consentModalTextHex;x.style.color=g.consentModalTextHex};this.initializeFocus=()=>{this.previousFocusedElement=document.activeElement;const g=document.querySelector(".ensCheckbox:enabled");g&&"function"==typeof g.focus&&g.focus()};this.onOpenModal=()=>{document.body.addEventListener("keydown",this.escapeCloseModal);this.initializeFocus()};this.escapeCloseModal=
g=>{this.gatewayData.featureToggles.disableEscapeKeyboardCommands||g.keyCode!==this.ESC_KEYCODE||(this.closeModal(),this.setCookieValsState())};this.closeModal=()=>{var g,f,n,x;"function"==typeof(null===(f=null===(g=null===G||void 0===G?void 0:G.privacy)||void 0===g?void 0:g.cookieModal)||void 0===f?void 0:f.beforeClose)&&G.privacy.cookieModal.beforeClose(this.cookieModal);this.modalViewed();this.cookieModal.style.display="none";this.onCloseModal();"function"==typeof(null===(x=null===(n=null===G||
void 0===G?void 0:G.privacy)||void 0===n?void 0:n.cookieModal)||void 0===x?void 0:x.afterClose)&&G.privacy.cookieModal.afterClose(this.cookieModal)};this.cancelCloseModal=()=>{this.closeModal();this.setCookieValsState()};this.onCloseModal=()=>{document.removeEventListener("keydown",this.escapeCloseModal);this.previousFocusedElement&&"function"==typeof this.previousFocusedElement.focus&&this.previousFocusedElement.focus()};this.getCheckedString=g=>g?" checked ":"";this.shouldCategoryBeChecked=(g,f)=>
{const n=c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData,this.environment,"globalPrivacyControlCategories");if(c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"honorGlobalPrivacyControl")&&navigator.globalPrivacyControl&&(0===n.length||this.checkCategories(n,f)))return!1;f=this.cookieManager.getCookie(f);return(1==f||1==g)&&0!=f};this.getStyleString=()=>this.templateManager.getTemplate(Y.COOKIE_MODAL_CSS);this.getModalHtmlString=
()=>this.modalHtmlString;this.setModalHtmlString=function(g,f,n,x){for(var I in g)this.cookieVals.push(g[I]);I=document.createElement("div");I.innerHTML=this.templateManager.getTemplate(Y.COOKIE_MODAL_HTML);I.querySelector("#ensTitle").innerHTML=f.consentTitle;I.querySelector("#ensDescription").innerHTML=f.consentDescription;const V=I.querySelector(".ensToggleRowWrapper");for(const W in f.cookies){this.setAllowPerTagOptOut(x,this.gatewayData.featureToggles);var T=this.getAllowPerTagOptOut()?"ensToggleLabel chevron right":
"ensToggleLabel";const ka=this.shouldCategoryBeChecked(g[W],W);if("default"!==W||!0===n){const na=document.createElement("div");na.className="ensToggleRow";"default"===W&&na.setAttribute("style","opacity: .5;");const ha=document.createElement("label");ha.className=T;ha.innerHTML=f.cookies[W].title;ha.setAttribute("for",W+"Slide");T=document.createElement("div");T.className="card";const ea=document.createElement("input");ea.className="ensCheckbox";ea.setAttribute("aria-describedby",W+"description");
ea.id=W+"Slide";ea.type="checkbox";ea.name=W+"Slide";(ka||"default"===W)&&ea.setAttribute("checked","");ea.disabled="default"===W;const za=document.createElement("span");za.className="switch";const Ja=document.createElement("span");Ja.className="toggle";T.appendChild(ea);T.appendChild(za);T.appendChild(Ja);ha.appendChild(T);T=document.createElement("div");T.className="description";T.id=W+"description";T.innerHTML=f.cookies[W].description;this.getAllowPerTagOptOut()&&this.buildPerTagOptOutTemplate(W,
ka||"default"===W);na.appendChild(ha);na.appendChild(T);na.innerHTML+=this.getAllowPerTagOptOut()?this.buildPerTagOptOutTemplate(W,ka||"default"===W):"";V.appendChild(na);V.appendChild(document.createElement("hr"))}}c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"enableDoNotSellModal")&&c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"showDoNotSellOnConsentModal")?(g=I.querySelector("#ensDoNotSellModalLink"),
g.setAttribute("style","display: true;"),g.innerHTML=f.doNotSellModal.link,g.setAttribute("aria-label",g.innerHTML)):I.querySelector("#ensDoNotSellModalLink").remove();c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"enableRequestDataModal")&&c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"showRequestDataOnConsentModal")?(g=I.querySelector("#ensRequestDataModalLink"),g.setAttribute("style","display: true;"),
g.innerHTML=f.requestDataModal.link,g.setAttribute("aria-label",g.textContent)):I.querySelector("#ensRequestDataModalLink").remove();c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"enableDeleteDataModal")&&c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"showDeleteDataOnConsentModal")?(g=I.querySelector("#ensDeleteDataModalLink"),g.setAttribute("style","display: true;"),g.innerHTML=f.deleteDataModal.link,
g.setAttribute("aria-label",g.textContent)):I.querySelector("#ensDeleteDataModalLink").remove();this.modalHtmlString=I.innerHTML};this.isEnabledConsentModal=function(g){return g&&g.hasOwnProperty("enableConsentModal")?g.enableConsentModal:this.gatewayData.featureToggles.enableConsentModal};this.isShowedTrustedDomains=function(g){return!!c.utilities.isWhitelist(this.gatewayData,g)&&(g&&g.hasOwnProperty("showTrustedDomains")?g.showTrustedDomains:this.gatewayData.featureToggles.showTrustedDomains)};
this.addEventListeners=()=>{if(c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"enableDoNotSellModal")){var g=document.getElementById("ensDoNotSellModalLink");null!=g&&g.addEventListener("click",()=>{this.closeModal();G.gateway.openDoNotSellModal()})}c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"enableRequestDataModal")&&(g=document.getElementById("ensRequestDataModalLink"),null!=g&&g.addEventListener("click",
()=>{this.closeModal();G.gateway.openRequestDataModal()}));c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"enableDeleteDataModal")&&(g=document.getElementById("ensDeleteDataModalLink"),null!=g&&g.addEventListener("click",()=>{this.closeModal();G.gateway.openDeleteDataModal()}));(()=>{const f=document.querySelectorAll(".card input[type\x3dcheckbox]");for(let n=0;n<f.length;n++){const x=f[n];x.addEventListener("focus",function(){this.parentNode.style.outline=
"rgba(0, 103, 244, 0.247) auto 5px"});x.addEventListener("blur",function(){this.parentNode.style.outline=""})}})();this.getAllowPerTagOptOut()&&this.addRowsEventsPerTagOptOut()};this.saveCookies=()=>{this.resetCookieValsState();this.closeModal();requestAnimationFrame(()=>{setTimeout(()=>{this.getCookieValsState();this.saveNewCookieValues()},0)})};this.acceptAllClickHandler=()=>A(this,void 0,void 0,function*(){this.closeModal();yield this.allowAll(this.gatewayData)});this.rejectAllClickHandler=()=>
A(this,void 0,void 0,function*(){this.closeModal();yield this.denyAll(this.gatewayData)});this.acceptAllKeyDownHandler=function(g){switch(g.which){case 13:case 32:return g.stopPropagation(),g.preventDefault(),this.closeModal(),this.allowAll(this.gatewayData)}return!0};this.rejectAllKeyDownHandler=function(g){switch(g.which){case 13:case 32:return g.stopPropagation(),g.preventDefault(),this.closeModal(),this.denyAll(this.gatewayData)}return!0};this.handleKeyCancel=function(g){switch(g.which){case 13:case 32:return g.stopPropagation(),
g.preventDefault(),this.cancelCloseModal()}return!0};this.handleKeySave=function(g){switch(g.which){case 13:case 32:return g.stopPropagation(),g.preventDefault(),this.saveCookies()}return!0};this.updateButtonConfig=function(g){var f,n,x,I,V,T,W,ka,na,ha,ea,za;this.buttonConfig={ensAcceptAll:{show:null!==(x=null===(n=null===(f=null==g?void 0:g.consentModalConfig)||void 0===f?void 0:f.ensConsentAcceptAll)||void 0===n?void 0:n.show)&&void 0!==x&&x,clickHandler:this.acceptAllClickHandler,keyDownHandler:this.acceptAllKeyDownHandler},
ensRejectAll:{show:null!==(T=null===(V=null===(I=null==g?void 0:g.consentModalConfig)||void 0===I?void 0:I.ensConsentRejectAll)||void 0===V?void 0:V.show)&&void 0!==T&&T,clickHandler:this.rejectAllClickHandler,keyDownHandler:this.rejectAllKeyDownHandler},ensSave:{show:null!==(na=null===(ka=null===(W=null==g?void 0:g.consentModalConfig)||void 0===W?void 0:W.ensSaveModal)||void 0===ka?void 0:ka.show)&&void 0!==na&&na,clickHandler:this.saveCookies,keyDownHandler:this.handleKeySave},ensCancel:{show:null===
(za=null===(ea=null===(ha=null==g?void 0:g.consentModalConfig)||void 0===ha?void 0:ha.ensCloseModal)||void 0===ea?void 0:ea.show)||void 0===za||za,clickHandler:this.cancelCloseModal,keyDownHandler:this.handleKeyCancel}}};this.updateModalDOM=function(g){var f,n,x,I;this.isEnabledConsentModal(g)&&(("function"==typeof(null===(n=null===(f=null===G||void 0===G?void 0:G.privacy)||void 0===f?void 0:f.cookieModal)||void 0===n?void 0:n.beforeLoad)&&G.privacy.cookieModal.beforeLoad(this.cookieModal),this.setModalHtmlString(g.optVals,
g.translation,this.isShowedTrustedDomains(g),g),this.cookieModal.innerHTML=this.getModalHtmlString(),this.updateButtonConfig(g),null==document.getElementById("ensModalWrapper"))?p.utilities.domReady(()=>{setTimeout(()=>{var V,T;this.gatewayData.featureToggles.disableDefaultStyles||p.utilities.addStyleElement(this.getStyleString());document.body.insertBefore(this.cookieModal,document.body.lastChild);this.setCookieModalWrapperAccessibilitySettings();this.addEventListeners();this.getCookieValsState();
this.generateButtonsFromConfig(this.buttonConfig,g.translation);"function"==typeof(null===(T=null===(V=null===G||void 0===G?void 0:G.privacy)||void 0===V?void 0:V.cookieModal)||void 0===T?void 0:T.afterLoad)&&G.privacy.cookieModal.afterLoad(this.cookieModal)},this.injectModalDelay)}):(this.resetCookieValsState(),this.updateCheckboxes(g),this.addEventListeners(),this.getCookieValsState(),this.generateButtonsFromConfig(this.buttonConfig,g.translation),"function"==typeof(null===(I=null===(x=null===G||
void 0===G?void 0:G.privacy)||void 0===x?void 0:x.cookieModal)||void 0===I?void 0:I.afterLoad)&&G.privacy.cookieModal.afterLoad(this.cookieModal)))};this.update=g=>{this.environment=g;this.environmentManager.enableAsyncEnvironments?this.environmentManager.getAsyncEnvironmentFromPromise(g,"Cookie Modal",[f=>this.updateModalDOM(f)]):this.updateModalDOM(g)};this.setCookieModalWrapperAccessibilitySettings=()=>{const g=document.getElementById("ensModalWrapper");g.setAttribute("role","dialog");g.setAttribute("aria-labelledby",
"ensTitle");g.setAttribute("aria-describedby","ensDescription");g.setAttribute("focusable","true");g.setAttribute("aria-modal","true")};this.buildPerTagOptOutTemplate=function(g,f){const n=this.listProcessor.getList()[g]||[],x="default"===g;let I="\x3cdiv class\x3d'ensTagsContent'"+(x?" style\x3d'opacity: .5;'":"")+"\x3e";for(let V=0;V<n.length;V++){const T=n[V].displayName||n[V].tag,W=this.generateTagSlideId(g,n[V]),ka=this.shouldTagBeChecked(f,n[V]);I+="\x3cdiv class\x3d'tagContainer'\x3e\x3clabel for\x3d'"+
W+"' class\x3d'ensToggleLabel'\x3e"+T+"\x3cdiv class\x3d'card'\x3e\x3cinput class\x3d'ensCheckbox' type\x3d'checkbox' id\x3d'"+W+"' name\x3d'"+W+"'"+this.getCheckedString(ka)+(x?" disabled/\x3e":"/\x3e")+"\x3cspan class\x3d'switch'\x3e\x3c/span\x3e\x3cspan class\x3d'toggle'\x3e\x3c/span\x3e\x3c/div\x3e\x3c/label\x3e";I+="\x3c/div\x3e"}return I+="\x3c/div\x3e",I};this.updateTagSlides=function(g,f,n){g=this.listProcessor.getList()[f]||[];for(let I=0;I<g.length;I++){var x=this.generateTagSlideId(f,g[I]);
const V=1===n;x=document.getElementById(x);null!=x&&(x.checked=V)}};this.updateConsentDiffTagSlides=function(g,f){if(f.tags)for(let x=0;x<f.tags.length;x++){f.tags[x].displayName=f.tags[x].tagName;var n=this.generateTagSlideId(g,f.tags[x]);n=document.getElementById(n);null!=n&&(n.checked=f.tags[x].tagEnabled)}};this.addRowsEventsPerTagOptOut=()=>{const g=document.getElementsByClassName("ensToggleRow"),f=n=>{const x=n.target.className;return-1<x.indexOf("ensToggleLabel")?this.handleExpandableEvent(n):
-1<x.indexOf("ensCheckbox")&&this.handleSwitchEvent(n),!1};for(let n=0;n<g.length;n++)g[n].addEventListener("click",f)};this.handleExpandableEvent=function(g){const f=g.target,n=f.parentNode.querySelector(".ensTagsContent");n&&("block"===n.style.display?(n.style.display="none",f.className=f.className.replace(/\bbottom\b/g,"right")):(n.style.display="block",f.className=f.className.replace(/\bright\b/g,"bottom")));g.preventDefault()};this.handleKeySwitch=g=>{switch(g.which){case 13:case 32:return g.stopPropagation(),
g.preventDefault(),this.handleSwitchEvent(g)}return!0};this.handleSwitchEvent=g=>{var f=g.target;g=f.checked;f=f.parentNode.parentNode.parentNode;if(-1<f.className.indexOf("ensToggleRow")&&(f=f.querySelector(".ensTagsContent"))){f=f.querySelectorAll(".ensCheckbox");for(let n=0;n<f.length;n++)f[n].checked=g}};this.generateTagSlideId=(g,f)=>(g+"-"+(f.displayName||"")+"-"+f.tag+"-slide").replace(/[,.]/g,"").replace(/\s/g,"-");this.addChoiceButtonCustomization=function(g){const f=this.getModalCustomization(this.environment);
g.style.backgroundColor=f.consentModalAccButtonHex;g.style.color=f.consentModalAccTextHex};this.addCancelButtonCustomization=function(g){const f=this.getModalCustomization(this.environment);g.style.backgroundColor=f.consentModalCancelButtonHex;g.style.color=f.consentModalCancelTextHex};this.templateManager=D;this.cookieModal=document.createElement("section");this.cookieModal.id="ensModalWrapper";this.openModalDelay=this.injectModalDelay+50;this.environmentManager=w;this.update(h);Z.registerConsentChangeCallback(g=>
{this.resetCookieValsState();this.updateCheckboxes(this.environment);for(const f in g)this.updateConsentDiffTagSlides(f,g[f]);this.getCookieValsState()})}updateCheckboxes(a){const e=a.optVals;var m=a.translation;if(null===document.getElementById("ensModalWrapper"))this.update(a);else for(const h in m.cookies)"default"!==h&&(a=this.shouldCategoryBeChecked(e[h],h),m=document.getElementById(h+"Slide"),null!=m&&(m.checked=!!a))}generateButtonsFromConfig(a,e){const m=document.querySelector(".ensModal .ensButtons");
m.innerHTML="";for(const h in a)if(a.hasOwnProperty(h)&&a[h].show){const r=document.createElement("button");r.id=h;r.tabIndex=0;null==m||m.appendChild(r);const u=document.createElement("div");u.innerHTML=e[this.buttonTranslation[h]];u.id=h+"Text";u.className="ensCenter";r.appendChild(u);r.setAttribute("aria-label",u.innerHTML);r.addEventListener("click",a[h].clickHandler.bind(this));r.addEventListener("keydown",a[h].keyDownHandler.bind(this));this.getIncludeModalCustomization(this.environment)?(r.className=
"button raised","ensCancel"===h?this.addCancelButtonCustomization(r):this.addChoiceButtonCustomization(r)):r.className="ensCancel"===h?"button raised grey":"button raised blue"}}}class ra extends Z{constructor(a,e,m,h,r,u,D,O,w,g){super(r,a,D,m,w,e);this.gatewayData=e;this.tagPurposes=h;this.cookieManager=r;this.updateListValues=u;this.templateManager=O;this.tagAccessManager=w;this.environmentManager=g;this.sectionElement=document.createElement("section");this.styleString=this.templateManager.getTemplate(Y.CONSENT_MODAL_CSS);
this.ensShowMore=()=>{const f=document.getElementById("ensShowMoreLink"),n=document.getElementById("ensTagsTableContainer");"Show More"===f.innerText?(f.innerText="Show Less",n.style.display="block"):(f.innerText="Show More",n.style.display="none")};this.isEnabledConsentModal=function(f){return f&&f.hasOwnProperty("enableConsentModal")?f.enableConsentModal:this.gatewayData.featureToggles.enableConsentModal};this.cookieVals=[];this.closeModal=()=>{var f,n,x,I;"function"==typeof(null===(n=null===(f=
null===G||void 0===G?void 0:G.privacy)||void 0===f?void 0:f.consentModal)||void 0===n?void 0:n.beforeClose)&&G.privacy.consentModal.beforeClose(this.sectionElement);this.sectionElement.style.display="none";this.onCloseModal();"function"==typeof(null===(I=null===(x=null===G||void 0===G?void 0:G.privacy)||void 0===x?void 0:x.consentModal)||void 0===I?void 0:I.afterClose)&&G.privacy.consentModal.afterClose(this.sectionElement)};this.getInnerModalString=()=>"";this.init=()=>{this.update(this.environment)};
this.injectModal=()=>{var f,n;this.gatewayData.featureToggles.disableDefaultStyles||p.utilities.addStyleElement(this.styleString);document.body.insertBefore(this.sectionElement,document.body.lastChild);this.setHTMLBindings();this.setConsentModalWrapperAccessibilitySettings();"function"==typeof(null===(n=null===(f=null===G||void 0===G?void 0:G.privacy)||void 0===f?void 0:f.consentModal)||void 0===n?void 0:n.afterLoad)&&G.privacy.consentModal.afterLoad(this.sectionElement)};this.modalLoaded=()=>A(this,
void 0,void 0,function*(){const f=this.cookieManager.getCookiesFromTypes(["MODAL_LOADED"]);yield this.cookieManager.setCookie("MODAL_LOADED","1");const n=this.cookieManager.getCookiesFromTypes(["MODAL_LOADED"]);this.consentReporter.sendReport(f,n)});this.modalViewed=()=>A(this,void 0,void 0,function*(){const f=this.cookieManager.getCookiesFromTypes(["MODAL_VIEWED"]);yield this.cookieManager.setCookie("MODAL_VIEWED","1");const n=this.cookieManager.getCookiesFromTypes(["MODAL_VIEWED"]);this.consentReporter.sendReport(f,
n)});this.openModal=()=>{var f,n;"function"==typeof(null===(n=null===(f=null===G||void 0===G?void 0:G.privacy)||void 0===f?void 0:f.consentModal)||void 0===n?void 0:n.beforeOpen)&&G.privacy.consentModal.beforeOpen(this.sectionElement);this.sectionElement.style.display="block";p.utilities.domReady(()=>{var x,I;if(this.getIncludeModalCustomization(this.environment))this.addModalCustomization();else{const V=window.innerWidth/2,T=window.innerHeight/2,W=parseInt(window.getComputedStyle(this.sectionElement).width)/
2,ka=parseInt(window.getComputedStyle(this.sectionElement).height)/2;this.sectionElement.style.left=V-W+"px";this.sectionElement.style.top=T-ka+"px"}this.modalLoaded();this.onOpenModal();"function"==typeof(null===(I=null===(x=null===G||void 0===G?void 0:G.privacy)||void 0===x?void 0:x.consentModal)||void 0===I?void 0:I.afterOpen)&&G.privacy.consentModal.afterOpen(this.sectionElement)})};this.getIncludeModalCustomization=function(f){return c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,
f,"includeConsentModalCustomConfig")};this.addModalCustomization=function(){const f=this.getModalCustomization();this.setModalSize(f);this.setModalPosition(f);this.setModalColor(f)};this.getModalCustomization=function(){return c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"consentModalCustomConfig")};this.setModalSize=f=>{this.sectionElement.style.width=f.consentModalHSize+"%";this.sectionElement.style.height=f.consentModalVSize+"%";this.sectionElement.style.overflow=
"scroll"};this.setModalPosition=f=>{"Left"===f.consentModalHPosition?this.sectionElement.style.left=f.consentModalHMargin+"%":"Right"===f.consentModalHPosition?this.sectionElement.style.right=f.consentModalHMargin+"%":this.sectionElement.style.left=(100-f.consentModalHSize)/2+"%";"Top"===f.consentModalVPosition?this.sectionElement.style.top=f.consentModalVMargin+"%":"Bottom"===f.consentModalVPosition?this.sectionElement.style.bottom=f.consentModalVMargin+"%":this.sectionElement.style.top=(100-f.consentModalVSize)/
2+"%"};this.setModalColor=f=>{this.sectionElement.style.backgroundColor=f.consentModalBackgroundHex;const n=document.querySelector(".ensModal"),x=document.querySelector(".ensTitle"),I=document.querySelector(".consentDescription"),V=document.querySelector("#ensShowMoreLink");n.style.color=f.consentModalTextHex;x.style.color=f.consentModalTextHex;I.style.color=f.consentModalTextHex;V.style.color=f.consentModalTextHex};this.initializeFocus=()=>{this.previousFocusedElement=document.activeElement;const f=
document.getElementById("ensShowMoreLink");f&&"function"==typeof f.focus&&f.focus()};this.onOpenModal=()=>{document.body.addEventListener("keydown",this.escapeCloseModal);this.initializeFocus()};this.escapeCloseModal=f=>{this.gatewayData.featureToggles.disableEscapeKeyboardCommands||27!==f.keyCode||this.closeModal()};this.onCloseModal=()=>{document.body.removeEventListener("keydown",this.escapeCloseModal);this.previousFocusedElement&&"function"==typeof this.previousFocusedElement.focus&&this.previousFocusedElement.focus()};
this.getModalHtmlString=()=>{var f=!1,n=this.templateManager.getTemplate(Y.CONSENT_MODAL_HTML);const x=document.createElement("div");x.innerHTML=n;x.querySelector("#ensConsentDescription").innerHTML=this.environment.translation.consentDescription;x.querySelector("#ensConsentTitle").innerHTML=this.environment.translation.consentTitle;for(var I in this.tagPurposes)if("default"!==I){n=this.tagPurposes[I];const T=this.checkIfPurposesNotEmpty(n);f||(T&&(f=document.createElement("th"),f.classList.add("mdl-data-table__cell--non-numeric"),
f.innerText="Purposes",x.querySelector("#ensTagsTableTitleRow").appendChild(f)),f=!0);for(let W=0;W<n.length;W++){var V=n[W];const ka=Array.isArray(V.purpose)?V.purpose.join(", "):"",na=document.createElement("tr"),ha=document.createElement("td");if(ha.classList.add("mdl-data-table__cell--non-numeric"),ha.innerText=V.displayName,na.appendChild(ha),T)V=document.createElement("td"),V.classList.add("mdl-data-table__cell--non-numeric"),V.innerText=ka,na.appendChild(V);x.querySelector("#ensTagsTable").appendChild(na)}}c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,
this.environment,"enableDoNotSellModal")&&c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"showDoNotSellOnConsentModal")&&(x.querySelector(".ensModal").appendChild(document.createElement("br")),I=document.createElement("a"),I.id="ensDoNotSellModalLink",I.href="javascript:void(0)",I.innerText=this.environment.translation.doNotSellModal.link,x.querySelector(".ensModal").appendChild(I));c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,
this.environment,"enableRequestDataModal")&&c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"showRequestDataOnConsentModal")&&(x.querySelector(".ensModal").appendChild(document.createElement("br")),I=document.createElement("a"),I.id="ensRequestDataModalLink",I.href="javascript:void(0)",I.innerText=this.environment.translation.requestDataModal.link,x.querySelector(".ensModal").appendChild(I));c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,
this.environment,"enableDeleteDataModal")&&c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"showDeleteDataOnConsentModal")&&(x.querySelector(".ensModal").appendChild(document.createElement("br")),I=document.createElement("a"),I.id="ensDeleteDataModalLink",I.href="javascript:void(0)",I.innerText=this.environment.translation.deleteDataModal.link,x.querySelector(".ensModal").appendChild(I));return x.querySelector("#innerModal").innerHTML=this.getInnerModalString(),
x.innerHTML};this.setHTMLBindings=()=>{};this.setConsentModalWrapperAccessibilitySettings=()=>{const f=document.getElementById("ensModalWrapper");f.setAttribute("role","dialog");f.setAttribute("aria-labelledby","ensConsentTitle");f.setAttribute("aria-describedby","ensConsentDescription");f.setAttribute("focusable","true");f.setAttribute("aria-modal","true")};this.updateDOM=function(f){var n,x,I,V;this.isEnabledConsentModal(f)&&("function"==typeof(null===(x=null===(n=null===G||void 0===G?void 0:G.privacy)||
void 0===n?void 0:n.consentModal)||void 0===x?void 0:x.beforeLoad)&&G.privacy.consentModal.beforeLoad(this.sectionElement),this.environment=f,this.sectionElement.innerHTML=this.getModalHtmlString(),null==document.getElementById(this.sectionElement.id)?p.utilities.domReady(this.injectModal):"function"==typeof(null===(V=null===(I=null===G||void 0===G?void 0:G.privacy)||void 0===I?void 0:I.consentModal)||void 0===V?void 0:V.afterLoad)&&G.privacy.consentModal.afterLoad(this.sectionElement))};this.update=
function(f){this.environmentManager.enableAsyncEnvironments?this.environmentManager.getAsyncEnvironmentFromPromise(f,"Consent Modal",[n=>this.updateDOM(n)]):this.updateDOM(f)};this.checkIfPurposesNotEmpty=function(f){let n=!1;for(let x=0;x<f.length;x++)if(Array.isArray(f[x].purpose)&&f[x].purpose.length){n=!0;break}return n};this.environmentManager=g;this.templateManager=O;this.gatewayData=e;this.sectionElement.id="ensModalWrapper"}}class Ga extends ra{constructor(a,e,m,h,r,u,D,O,w,g){super(a,e,m,
h,r,u,D,O,w,g);this.getInnerModalString=()=>{const f=document.createElement("div");return f.innerHTML=this.templateManager.getTemplate(Y.NO_TOGGLES_MODAL_HTML),f.querySelector("#ensDenyText").innerText=this.environment.translation.deny,f.querySelector("#ensAllowText").innerText=this.environment.translation.allow,f.innerHTML};this.addChoiceButtonCustomization=function(f){const n=this.getModalCustomization();f.style.backgroundColor=n.consentModalAccButtonHex;f.style.color=n.consentModalAccTextHex};
this.addCancelButtonCustomization=function(f){const n=this.getModalCustomization();f.style.backgroundColor=n.consentModalCancelButtonHex;f.style.color=n.consentModalCancelTextHex};this.setHTMLBindings=()=>{const f=document.getElementById("ensAllow"),n=document.getElementById("ensDeny");this.getIncludeModalCustomization(this.environment)&&(this.addChoiceButtonCustomization(f),this.addCancelButtonCustomization(n));var x=document.getElementById("ensDoNotSellModalLink");c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,
this.environment,"enableDoNotSellModal")&&c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"showDoNotSellOnConsentModal")?x.addEventListener("click",()=>{this.closeModal();G.gateway.openDoNotSellModal()}):null!==x&&x.remove();x=document.getElementById("ensRequestDataModalLink");c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"enableRequestDataModal")&&c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,
this.environment,"showRequestDataOnConsentModal")?x.addEventListener("click",()=>{this.closeModal();G.gateway.openRequestDataModal()}):null!==x&&x.remove();x=document.getElementById("ensDeleteDataModalLink");c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"enableDeleteDataModal")&&c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"showDeleteDataOnConsentModal")?x.addEventListener("click",()=>{this.closeModal();
G.gateway.openDeleteDataModal()}):null!==x&&x.remove();f.addEventListener("click",()=>A(this,void 0,void 0,function*(){yield this.allowAll(this.gatewayData);this.closeViewedModal()}));n.addEventListener("click",()=>A(this,void 0,void 0,function*(){yield this.denyAll(this.gatewayData);this.closeViewedModal()}))};this.templateManager=O;this.update(m)}closeViewedModal(){this.closeModal();this.modalViewed()}}class Ia{constructor(a,e,m,h,r,u,D,O,w){if(this.consentModal=null,this.templateManager=D,a.featureToggles.enableGdprModal){const g=
m.getTranslatedList();this.consentModal=new Ga(m,a,e,g,h,u,r,D,O,w)}else this.consentModal=new pa(h,m,r,e,a,u,D,O,w)}getConsentModal(){return this.consentModal}}class Oa extends Z{constructor(a,e,m,h,r,u,D,O,w,g){var f;super(r,a,u,m,w,e);this.listProcessor=a;this.gatewayData=e;this.environment=m;this.consentModal=h;this.cookieManager=r;this.consentReporter=u;this.templateManager=D;this.updateListValues=O;this.tagAccessManager=w;this.environmentManager=g;this.sectionElement=document.createElement("section");
this.customBannerSet=!1;this.buttonTranslation={ensAcceptAll:"notificationBannerAllowAll",ensRejectAll:"notificationBannerDenyAll",ensOpenModal:"notificationBannerPreferences",ensCloseBanner:"close"};this.getConsentStatus=(n,x)=>super.getConsentStatus(n,x);this.bannerLoaded=function(){return A(this,void 0,void 0,function*(){const n=this.cookieManager.getCookiesFromTypes(["BANNER_LOADED"]);yield this.cookieManager.setCookie("BANNER_LOADED","1");const x=this.cookieManager.getCookiesFromTypes(["BANNER_LOADED"]);
this.consentReporter.sendReport(n,x)})};this.bannerViewed=function(){return A(this,void 0,void 0,function*(){const n=this.cookieManager.getCookiesFromTypes(["BANNER_VIEWED"]);yield this.cookieManager.setCookie("BANNER_VIEWED","1");const x=this.cookieManager.getCookiesFromTypes(["BANNER_VIEWED"]);this.consentReporter.sendReport(n,x)})};this.checkCopyForLinks=function(){this.bannerCopy=this.bannerCopy.replace(/{{/gi,"\x3cspan id\x3d'ensModalLink' role\x3d'button' class\x3d'ensModalLink' aria-label\x3d'Cookie Consent Tool' tabindex\x3d'0'\x3e");
this.bannerCopy=this.bannerCopy.replace(/}}/gi,"\x3c/span\x3e")};this.closeEnsBanner=function(){var n,x,I,V;const T=this.findBannerElement();"function"==typeof(null===(x=null===(n=null===G||void 0===G?void 0:G.privacy)||void 0===n?void 0:n.banner)||void 0===x?void 0:x.beforeClose)&&G.privacy.banner.beforeClose(T);this.bannerViewed();T.style.display="none";this.onCloseEnsBanner();"function"==typeof(null===(V=null===(I=null===G||void 0===G?void 0:G.privacy)||void 0===I?void 0:I.banner)||void 0===V?
void 0:V.afterClose)&&G.privacy.banner.afterClose(T)};this.onCloseEnsBanner=function(){this.previousFocusedElement&&"function"==typeof this.previousFocusedElement.focus&&this.previousFocusedElement.focus();document.body.removeEventListener("keydown",this.escapeBanner)};this.ensBannerShowModal=function(){this.closeEnsBanner();this.consentModal.openModal&&this.consentModal.openModal()};this.openBannerCheck=function(){this.cookieManager.getCookie("BANNER_VIEWED")||this.openEnsBanner()};this.openEnsBanner=
function(){var n,x,I,V;const T=this.findBannerElement();("function"==typeof(null===(x=null===(n=null===G||void 0===G?void 0:G.privacy)||void 0===n?void 0:n.banner)||void 0===x?void 0:x.beforeOpen)&&G.privacy.banner.beforeOpen(T),T.style.display="block",this.getIncludeBannerCustomization(this.environment))?this.addBannerCustomization(T):(n=window.innerWidth/2,x=parseInt(window.getComputedStyle(T).width)/2,T.style.left=n-x+"px");this.onOpenEnsBanner();this.bannerLoaded();"function"==typeof(null===(V=
null===(I=null===G||void 0===G?void 0:G.privacy)||void 0===I?void 0:I.banner)||void 0===V?void 0:V.afterOpen)&&G.privacy.banner.afterOpen(T)};this.onOpenEnsBanner=function(){this.previousFocusedElement=document.activeElement;const n=document.querySelector(".ensModalLink");null!=n&&"function"==typeof n.focus&&n.focus();document.body.addEventListener("keydown",this.escapeBanner)};this.addBannerCustomization=function(n){const x=this.getBannerCustomization(this.environment);n.style.backgroundColor=x.privacyNoticeBackgroundHex;
n.style.color=x.privacyNoticeTextHex;n.style.opacity="1";n.style.width=x.privacyNoticeHSize+"%";n.style.left=(100-x.privacyNoticeHSize)/2+"%";"Top"===x.privacyNoticeVPosition?(n.style.top=x.privacyNoticeVMargin+"%",n.style.bottom="auto"):n.style.bottom=x.privacyNoticeVMargin+"%"};this.addChoiceButtonCustomization=function(n){const x=this.getBannerCustomization(this.environment);n.style.backgroundColor=x.privacyNoticeAccButtonHex;n.style.color=x.privacyNoticeAccTextHex};this.addCancelButtonCustomization=
function(n){const x=this.getBannerCustomization(this.environment);n.style.backgroundColor=x.privacyNoticeCancelButtonHex;n.style.color=x.privacyNoticeCancelTextHex};this.getStyleString=()=>this.templateManager.getTemplate(Y.BANNER_CSS);this.setBannerCopy=function(n){this.bannerCopy=n;this.checkCopyForLinks()};this.setBannerMarkup=function(){this.bannerMarkup=this.templateManager.getTemplate(Y.BANNER_HTML)};this.isCustomBannerSet=function(){return this.customBannerSet};this.getBannerMarkup=function(){return this.bannerMarkup};
this.findBannerElement=function(){return document.getElementById("ensNotifyBanner")};this.isEnabledPrivacyNotice=function(n){return c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,n,"enablePrivacyNotice")};this.isEnabledAutoShowModal=function(n){return!c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,n,"shouldNotAutoShowModal")};this.getIncludeBannerCustomization=function(n){return c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,
n,"includePrivacyNoticeCustomConfig")};this.getBannerCustomization=function(n){return c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,n,"privacyNoticeCustomConfig")};this.isEnabledAutoShowBanner=function(n){return!c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,n,"shouldNotAutoShowBanner")};this.updateButtonConfig=function(n){var x,I,V,T,W,ka,na,ha,ea,za,Ja,Ba;this.buttonConfig={ensAcceptAll:{show:null!==(V=null===(I=null===(x=null==
n?void 0:n.bannerConfig)||void 0===x?void 0:x.ensAcceptAll)||void 0===I?void 0:I.show)&&void 0!==V&&V,clickHandler:this.acceptAllClickHandler,keyDownHandler:this.acceptAllKeyDownHandler},ensRejectAll:{show:null!==(ka=null===(W=null===(T=null==n?void 0:n.bannerConfig)||void 0===T?void 0:T.ensRejectAll)||void 0===W?void 0:W.show)&&void 0!==ka&&ka,clickHandler:this.rejectAllClickHandler,keyDownHandler:this.rejectAllKeyDownHandler},ensOpenModal:{show:null!==(ea=null===(ha=null===(na=null==n?void 0:n.bannerConfig)||
void 0===na?void 0:na.ensOpenModal)||void 0===ha?void 0:ha.show)&&void 0!==ea&&ea,clickHandler:this.ensBannerShowModal,keyDownHandler:this.handleKeyOpen},ensCloseBanner:{show:null===(Ba=null===(Ja=null===(za=null==n?void 0:n.bannerConfig)||void 0===za?void 0:za.ensCloseBanner)||void 0===Ja?void 0:Ja.show)||void 0===Ba||Ba,clickHandler:this.closeEnsBanner,keyDownHandler:this.handleKeyClose}}};this.injectBanner=(n,x)=>{var I,V;this.isCustomBannerSet()||(document.body.insertBefore(this.sectionElement,
document.body.lastChild),x?this.updateButtonHandlers():(this.updateBanner(n.translation),this.gatewayData.featureToggles.disableDefaultStyles||p.utilities.addStyleElement(this.getStyleString())),this.addEventListeners());"function"==typeof(null===(V=null===(I=null===G||void 0===G?void 0:G.privacy)||void 0===I?void 0:I.banner)||void 0===V?void 0:V.afterLoad)&&G.privacy.banner.afterLoad(this.findBannerElement());this.isEnabledAutoShowBanner(n)&&this.openBannerCheck()};this.updateDOM=function(n,x){var I,
V,T,W,ka,na;if(this.isEnabledPrivacyNotice(n)){const ha=this.findBannerElement(),ea=document.getElementById("ensModalWrapper");"function"==typeof(null===(V=null===(I=null===G||void 0===G?void 0:G.privacy)||void 0===I?void 0:I.banner)||void 0===V?void 0:V.beforeLoad)&&G.privacy.banner.beforeLoad(ha);this.updateButtonConfig(n);null==ha?(this.isCustomBannerSet()||(x?this.sectionElement.innerHTML=x:(this.setBannerCopy(n.translation.notificationBannerContent),this.checkCopyForLinks(),this.setBannerMarkup(),
this.sectionElement.innerHTML=this.bannerMarkup)),p.utilities.domReady(()=>this.injectBanner(n,x))):(this.bannerDisplayStyle=ha.style.display,this.modalDisplayStyle=null!=ea?ea.style.display:"",x?(this.sectionElement.innerHTML=x,this.updateButtonHandlers()):(this.setBannerCopy(n.translation.notificationBannerContent),this.setBannerMarkup(),this.sectionElement.innerHTML=this.bannerMarkup,this.updateBanner(n.translation)),"block"===this.bannerDisplayStyle&&this.openEnsBanner(),"block"===this.modalDisplayStyle&&
this.ensBannerShowModal(),this.addEventListeners(),"function"==typeof(null===(W=null===(T=null===G||void 0===G?void 0:G.privacy)||void 0===T?void 0:T.banner)||void 0===W?void 0:W.afterLoad)&&(null===(na=null===(ka=null===G||void 0===G?void 0:G.privacy)||void 0===ka?void 0:ka.banner)||void 0===na||na.afterLoad(ha)))}else this.consentModal.isEnabledConsentModal(n)&&this.isEnabledAutoShowModal(n)&&setTimeout(()=>{this.cookieManager.getCookie("MODAL_VIEWED")||this.consentModal.openModal()},500)};this.update=
function(n){this.environmentManager.enableAsyncEnvironments?c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,n,"enablePrivacyNoticeAdvancedMode")?this.environmentManager.getAsyncEnvironmentHtml(n,[(x,I)=>this.updateDOM(x,I)]):this.environmentManager.getAsyncEnvironmentFromPromise(n,"Banner",[x=>this.updateDOM(x)]):this.updateDOM(n)};this.addEventListeners=()=>{const n=document.getElementsByClassName("ensModalLink");document.getElementById("ensCloseBanner");for(let x=
0;x<n.length;x++)n[x].addEventListener("click",this.ensBannerShowModal.bind(this)),n[x].addEventListener("keydown",this.handleKeyOpen.bind(this))};this.escapeBanner=n=>{this.gatewayData.featureToggles.disableEscapeKeyboardCommands||27!==n.keyCode||this.closeEnsBanner()};this.handleKeyOpen=n=>{switch(n.which){case 13:case 32:return n.stopPropagation(),n.preventDefault(),this.ensBannerShowModal()}return!0};this.handleKeyClose=function(n){switch(n.which){case 13:case 32:return n.stopPropagation(),n.preventDefault(),
this.closeEnsBanner()}return!0};this.init=function(){this.update(this.environment)};this.testObject={bannerViewed:this.bannerViewed,ensBannerShowModal:this.ensBannerShowModal,bannerLoaded:this.bannerLoaded};this.acceptAllClickHandler=()=>A(this,void 0,void 0,function*(){this.closeEnsBanner();yield this.allowAll(this.gatewayData)});this.rejectAllClickHandler=()=>A(this,void 0,void 0,function*(){this.closeEnsBanner();yield this.denyAll(this.gatewayData)});this.acceptAllKeyDownHandler=function(n){switch(n.which){case 13:case 32:return n.stopPropagation(),
n.preventDefault(),this.closeEnsBanner(),this.allowAll(this.gatewayData)}return!0};this.rejectAllKeyDownHandler=function(n){switch(n.which){case 13:case 32:return n.stopPropagation(),n.preventDefault(),this.closeEnsBanner(),this.denyAll(this.gatewayData)}return!0};this.updateBanner=function(n){document.getElementById("ensBannerDescription").innerHTML=this.bannerCopy;this.generateButtonsFromConfig(this.buttonConfig,n)};this.updateButtonHandlers=function(){const n=document.querySelector("#ensNotifyBanner .ensButtons");
for(const x in this.buttonConfig){const I=n.querySelector(`#${x}`);null!=I&&(I.setAttribute("aria-label",I.innerHTML),I.removeEventListener("click",this.buttonConfig[x].clickHandler.bind(this)),I.removeEventListener("keydown",this.buttonConfig[x].keyDownHandler.bind(this)),I.addEventListener("click",this.buttonConfig[x].clickHandler.bind(this)),I.addEventListener("keydown",this.buttonConfig[x].keyDownHandler.bind(this)))}};this.environmentManager=g;this.templateManager=D;this.gatewayData=e;this.bannerCopy=
null===(f=this.environment.translation)||void 0===f?void 0:f.notificationBannerContent;this.init()}generateButtonsFromConfig(a,e){const m=document.querySelector(".ensNotifyBanner .ensButtons");m.innerHTML="";for(const h in a)if(a.hasOwnProperty(h)&&a[h].show){const r=document.createElement("button");r.id=h;null==m||m.appendChild(r);r.innerHTML=e[this.buttonTranslation[h]];r.setAttribute("aria-label",r.innerHTML);r.addEventListener("click",a[h].clickHandler.bind(this));r.addEventListener("keydown",
a[h].keyDownHandler.bind(this));this.getIncludeBannerCustomization(this.environment)?(r.className="button raised","ensCloseBanner"===h?this.addCancelButtonCustomization(r):this.addChoiceButtonCustomization(r)):r.className="ensCloseBanner"===h?"button raised grey":"button raised blue"}}}class ob{constructor(a,e,m,h,r){this.environment=a;this.gatewayData=e;this.whichModal=m;this.templateManager=h;this.requestConfirmationModal=document.createElement("section");this.modalHtmlString="";this.injectModalDelay=
100;this.openModalDelay=this.injectModalDelay+50;this.requestModalConfig={doNotSellConfirmation:{cssPrefix:"ensDoNotSellConfirmationModal",prevEventModal:"doNotSellModal",ariaLabel:"Do Not Sell Confirmation",prevModalFeatureToggle:"enableDoNotSellModal"},requestDataConfirmation:{cssPrefix:"ensRequestDataConfirmationModal",prevEventModal:"requestDataModal",ariaLabel:"Request Data Confirmation",prevModalFeatureToggle:"enableRequestDataModal"},deleteDataConfirmation:{cssPrefix:"ensDeleteDataConfirmationModal",
prevEventModal:"deleteDataModal",ariaLabel:"Delete Data Confirmation",prevModalFeatureToggle:"enableDeleteDataModal"}};this.openModal=()=>{p.utilities.domReady(()=>{setTimeout(()=>{this.requestConfirmationModal.style.display="block";const u=window.innerWidth/2,D=window.innerHeight/2,O=parseInt(window.getComputedStyle(this.requestConfirmationModal).width)/2,w=parseInt(window.getComputedStyle(this.requestConfirmationModal).height)/2;this.requestConfirmationModal.style.left=u-O+"px";this.requestConfirmationModal.style.top=
D-w+"px";this.onOpenModal()},this.openModalDelay)})};this.onOpenModal=()=>{document.body.addEventListener("keydown",this.escapeCloseModal);(()=>{this.previousFocusedElement=document.activeElement;const u=document.getElementById(this.modalCSSPrefix+"Close");u&&"function"==typeof u.focus&&u.focus()})()};this.escapeCloseModal=u=>{this.gatewayData.featureToggles.disableEscapeKeyboardCommands||27!==u.keyCode||this.closeModal()};this.closeModal=()=>{this.requestConfirmationModal.style.display="none";this.onCloseModal()};
this.onCloseModal=()=>{document.removeEventListener("keydown",this.escapeCloseModal);this.previousFocusedElement&&"function"==typeof this.previousFocusedElement.focus&&this.previousFocusedElement.focus()};this.styleString=this.templateManager.getTemplate(Y.REQUEST_CONFIRMATION_MODAL_CSS);this.getModalHtmlString=()=>this.modalHtmlString;this.setModalHtmlString=u=>{this.modalHtmlString=this.templateManager.getTemplate(Y.REQUEST_CONFIRMATION_MODAL_HTML).replace(/modalCSSPrefix/g,this.modalCSSPrefix).replace(/modalAriaLabel/g,
this.modalAriaLabel).replace(/translation\[prevEventModal\]\.title/g,u[this.prevEventModal].title).replace(/translation\[prevEventModal\]\.confirmationDescription/g,u[this.prevEventModal].confirmationDescription).replace(/translation\[prevEventModal\]\.close/g,u[this.prevEventModal].close)};this.isConfirmationModalEnabled=u=>u&&u.hasOwnProperty(this.prevModalFeatureToggle)?u[this.prevModalFeatureToggle]:this.gatewayData.featureToggles[this.prevModalFeatureToggle];this.addEventListeners=()=>{const u=
document.getElementById(this.modalCSSPrefix+"Close");u.addEventListener("click",this.closeModal);u.addEventListener("keydown",function(D){switch(D.which){case 13:case 32:return D.stopPropagation(),D.preventDefault(),this.closeModal()}return!0})};this.updateDOM=u=>{(this.setModalHtmlString(u.translation),this.requestConfirmationModal.innerHTML=this.getModalHtmlString(),null==document.getElementById(this.modalCSSPrefix+"Wrapper"))?p.utilities.domReady(()=>{this.gatewayData.featureToggles.disableDefaultStyles||
p.utilities.addStyleElement(this.styleString);document.body.insertBefore(this.requestConfirmationModal,document.body.lastChild);this.setConfirmationModalWrapperAccessibilitySettings();this.addEventListeners()}):this.addEventListeners()};this.update=u=>{this.isConfirmationModalEnabled(u)&&(this.environmentManager.enableAsyncEnvironments?this.environmentManager.getAsyncEnvironmentFromPromise(u,"Request Confirmation Modal",[D=>this.updateDOM(D)]):this.updateDOM(u))};this.setConfirmationModalWrapperAccessibilitySettings=
()=>{const u=document.getElementById(this.modalCSSPrefix+"Wrapper");u.setAttribute("role","dialog");u.setAttribute("aria-labelledby",this.modalCSSPrefix+"Title");u.setAttribute("aria-describedby",this.modalCSSPrefix+"Description");u.setAttribute("focusable","true");u.setAttribute("aria-modal","true")};this.templateManager=h;this.prevEventModal=this.requestModalConfig[m].prevEventModal;this.modalCSSPrefix=this.requestModalConfig[m].cssPrefix;this.modalAriaLabel=this.requestModalConfig[m].ariaLabel;
this.requestConfirmationModal.id=this.modalCSSPrefix+"Wrapper";this.requestConfirmationModal.style.display="none";this.environmentManager=r;this.prevModalFeatureToggle=this.requestModalConfig[m].prevModalFeatureToggle;this.update(a)}}class $a{constructor(a,e,m,h,r,u,D,O,w,g){this.cookieManager=a;this.updateListValues=e;this.consentReporter=m;this.environment=h;this.gatewayData=r;this.whichModal=u;this.ccpaEventAPI=D;this.templateManager=O;this.tagAccessManager=w;this.environmentManager=g;this.contactInfoModal=
document.createElement("section");this.modalHtmlString="";this.allowPerTagOptOut=c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"allowPerTagOptOut");this.autoDoNotSellAllCategories=c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"autoDoNotSellAllCategories");this.ESC_KEYCODE=27;this.modalConfig={doNotSellModal:{event:"doNotSellChanged",cssPrefix:"ensDoNotSellModal",ariaLabel:"Do Not Sell",featureToggle:"enableDoNotSellModal",
cookieType:"DO_NOT_SELL_MODAL_VIEWED",loadedCookieType:"DO_NOT_SELL_MODAL_LOADED",requestConfirmationModalString:"doNotSellConfirmation",close:"Close"},requestDataModal:{event:"requestData",cssPrefix:"ensRequestDataModal",ariaLabel:"Request Data",featureToggle:"enableRequestDataModal",cookieType:"REQUEST_DATA_MODAL_VIEWED",loadedCookieType:"REQUEST_DATA_MODAL_LOADED",requestConfirmationModalString:"requestDataConfirmation",close:"Close"},deleteDataModal:{event:"deleteData",cssPrefix:"ensDeleteDataModal",
ariaLabel:"Delete Data",featureToggle:"enableDeleteDataModal",cookieType:"DELETE_DATA_MODAL_VIEWED",loadedCookieType:"DELETE_DATA_MODAL_LOADED",requestConfirmationModalString:"deleteDataConfirmation",close:"Close"}};this.injectModalDelay=100;this.openModalDelay=this.injectModalDelay+50;this.modalLoaded=()=>A(this,void 0,void 0,function*(){const f=this.cookieManager.getCookiesFromTypes([this.loadedCookieType]);yield this.cookieManager.setCookie(this.loadedCookieType,"1");const n=this.cookieManager.getCookiesFromTypes([this.loadedCookieType]);
this.consentReporter.sendReport(f,n)});this.modalViewed=()=>A(this,void 0,void 0,function*(){const f=this.cookieManager.getCookiesFromTypes([this.modalCookieType]);yield this.cookieManager.setCookie(this.modalCookieType,"1");const n=this.cookieManager.getCookiesFromTypes([this.modalCookieType]);this.consentReporter.sendReport(f,n)});this.openModal=()=>{var f;"function"==typeof(null===(f=null===G||void 0===G?void 0:G.privacy[this.whichModal])||void 0===f?void 0:f.beforeOpen)&&G.privacy[this.whichModal].beforeOpen(this.contactInfoModal);
p.utilities.domReady(()=>{setTimeout(()=>{var n;this.contactInfoModal.style.display="block";const x=window.innerWidth/2,I=window.innerHeight/2,V=parseInt(window.getComputedStyle(this.contactInfoModal).width)/2,T=parseInt(window.getComputedStyle(this.contactInfoModal).height)/2;this.contactInfoModal.style.left=x-V+"px";this.contactInfoModal.style.top=I-T+"px";this.onOpenModal();this.modalLoaded();"function"==typeof(null===(n=null===G||void 0===G?void 0:G.privacy[this.whichModal])||void 0===n?void 0:
n.afterOpen)&&G.privacy[this.whichModal].afterOpen(this.contactInfoModal)},this.openModalDelay)})};this.onOpenModal=()=>{document.body.addEventListener("keydown",this.escapeCloseModal);document.getElementById(this.modalCSSPrefix+"FirstName").required=!0;document.getElementById(this.modalCSSPrefix+"LastName").required=!0;document.getElementById(this.modalCSSPrefix+"Email").required=!0;document.getElementById(this.modalCSSPrefix+"Address").required=!0;(()=>{this.previousFocusedElement=document.activeElement;
const f=document.querySelector("."+this.modalConfig[this.whichModal].cssPrefix+" input");f&&"function"==typeof f.focus&&f.focus()})()};this.escapeCloseModal=f=>{this.gatewayData.featureToggles.disableEscapeKeyboardCommands||f.keyCode!==this.ESC_KEYCODE||this.closeModal()};this.closeModalClick=f=>{var n,x;"function"==typeof(null===(n=null===G||void 0===G?void 0:G.privacy[this.whichModal])||void 0===n?void 0:n.beforeClose)&&G.privacy[this.whichModal].beforeClose(this.contactInfoModal);f.preventDefault();
this.modalViewed();this.contactInfoModal.style.display="none";this.onCloseModal();"function"==typeof(null===(x=null===G||void 0===G?void 0:G.privacy[this.whichModal])||void 0===x?void 0:x.afterClose)&&G.privacy[this.whichModal].afterClose(this.contactInfoModal)};this.closeModal=()=>{var f,n;"function"==typeof(null===(f=null===G||void 0===G?void 0:G.privacy[this.whichModal])||void 0===f?void 0:f.beforeClose)&&G.privacy[this.whichModal].beforeClose(this.contactInfoModal);this.modalViewed();this.contactInfoModal.style.display=
"none";this.onCloseModal();"function"==typeof(null===(n=null===G||void 0===G?void 0:G.privacy[this.whichModal])||void 0===n?void 0:n.afterClose)&&G.privacy[this.whichModal].afterClose(this.contactInfoModal)};this.onCloseModal=()=>{var f;document.removeEventListener("keydown",this.escapeCloseModal);document.getElementById(this.modalCSSPrefix+"FirstName").required=!1;document.getElementById(this.modalCSSPrefix+"LastName").required=!1;document.getElementById(this.modalCSSPrefix+"Email").required=!1;
document.getElementById(this.modalCSSPrefix+"Address").required=!1;"function"==typeof(null===(f=this.previousFocusedElement)||void 0===f?void 0:f.focus)&&this.previousFocusedElement.focus()};this.getModalHtmlString=()=>this.modalHtmlString;this.setModalHtmlString=f=>{this.modalHtmlString=this.templateManager.getTemplate(Y.CONTACT_INFO_HTML).replace(/modalCSSPrefix/g,this.modalCSSPrefix).replace(/modalAriaLabel/g,this.modalAriaLabel).replace(/translation\[whichModal\]\.title/g,f[this.whichModal].title).replace(/translation\[whichModal\]\.description/g,
f[this.whichModal].description).replace(/translation\[whichModal\]\.cancel/g,f[this.whichModal].cancel).replace(/translation\[whichModal\]\.save/g,f[this.whichModal].save)};this.isModalEnabled=f=>f&&f.hasOwnProperty(this.modalFeatureToggle)?f[this.modalFeatureToggle]:this.gatewayData.featureToggles[this.modalFeatureToggle];this.addEventListeners=()=>{const f=document.getElementById(this.modalCSSPrefix+"Save"),n=document.getElementById(this.modalCSSPrefix+"Cancel");f.addEventListener("keydown",x=>
{switch(x.which){case 13:case 32:return this.openRequestConfirmationModal(x)}return!0});f.addEventListener("click",this.openRequestConfirmationModal);n.addEventListener("click",this.closeModalClick);n.addEventListener("keydown",x=>{switch(x.which){case 13:case 32:return x.stopPropagation(),x.preventDefault(),this.closeModal()}return!0})};this.openRequestConfirmationModal=f=>{var n=document.querySelector("#"+this.modalCSSPrefix+"Wrapper form");if(n&&n.checkValidity()){f.preventDefault();f=document.getElementById(this.modalCSSPrefix+
"FirstName");n=document.getElementById(this.modalCSSPrefix+"LastName");const x=document.getElementById(this.modalCSSPrefix+"Email"),I=document.getElementById(this.modalCSSPrefix+"Address"),V=document.getElementById(this.modalCSSPrefix+"Comments");f={dt:Date.now(),firstName:f.value,lastName:n.value,email:x.value,address:I.value,comments:V.value};"doNotSellModal"===this.whichModal&&this.autoDoNotSellAllCategories&&this.blockAllCategories();this.ccpaEventAPI.sendCCPAEvent(this.modalEvent,f);this.closeModal();
this.requestConfirmationModal.openModal()}};this.blockAllCategories=()=>A(this,void 0,void 0,function*(){var f=this.cookieManager.getCookiesFromTypes(this.gatewayData.cookieTypes);this.allowPerTagOptOut&&this.tagAccessManager.clearTags();for(var n=0;n<this.gatewayData.cookieTypes.length;n++)yield this.cookieManager.setCookie(this.gatewayData.cookieTypes[n],0);n=this.cookieManager.getCookiesFromTypes(this.gatewayData.cookieTypes);this.consentReporter.sendReport(f,n);f=this.cookieManager.getCategoryMapFromCookieTypes(this.gatewayData.cookieTypes);
this.updateListValues(f,this.tagAccessManager.getAllowedTags(),this.tagAccessManager.getBlockedTags());f=document.querySelectorAll(".card input[type\x3dcheckbox]");if(0<f.length)for(n=0;n<f.length;n++)f[n].checked=!1});this.updateDOM=f=>{var n,x;("function"==typeof(null===(n=null===G||void 0===G?void 0:G.privacy[this.whichModal])||void 0===n?void 0:n.beforeLoad)&&G.privacy[this.whichModal].beforeLoad(this.contactInfoModal),this.setModalHtmlString(f.translation),this.contactInfoModal.innerHTML=this.getModalHtmlString(),
this.allowPerTagOptOut=c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,f,"allowPerTagOptOut"),this.autoDoNotSellAllCategories=c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,f,"autoDoNotSellAllCategories"),null==document.getElementById(this.modalCSSPrefix+"Wrapper"))?p.utilities.domReady(()=>{setTimeout(()=>{var I;this.gatewayData.featureToggles.disableDefaultStyles||p.utilities.addStyleElement(this.styleString);document.body.insertBefore(this.contactInfoModal,
document.body.lastChild);this.setModalWrapperAccessibilitySettings();this.addEventListeners();"function"==typeof(null===(I=null===G||void 0===G?void 0:G.privacy[this.whichModal])||void 0===I?void 0:I.afterLoad)&&G.privacy[this.whichModal].afterLoad(this.contactInfoModal)},this.injectModalDelay)}):(this.addEventListeners(),"function"==typeof(null===(x=null===G||void 0===G?void 0:G.privacy[this.whichModal])||void 0===x?void 0:x.afterLoad)&&G.privacy[this.whichModal].afterLoad(this.contactInfoModal))};
this.update=f=>{this.isModalEnabled(f)&&(this.environmentManager.enableAsyncEnvironments?this.environmentManager.getAsyncEnvironmentFromPromise(f,"Contact Info Modal",[n=>this.updateDOM(n)]):this.updateDOM(f))};this.setModalWrapperAccessibilitySettings=()=>{const f=document.getElementById(this.modalCSSPrefix+"Wrapper");f.setAttribute("role","dialog");f.setAttribute("aria-labelledby",this.modalCSSPrefix+"Title");f.setAttribute("aria-describedby",this.modalCSSPrefix+"Description");f.setAttribute("focusable",
"true");f.setAttribute("aria-modal","true")};this.templateManager=O;this.modalEvent=this.modalConfig[this.whichModal].event;this.modalCSSPrefix=this.modalConfig[this.whichModal].cssPrefix;this.modalAriaLabel=this.modalConfig[this.whichModal].ariaLabel;this.modalFeatureToggle=this.modalConfig[this.whichModal].featureToggle;this.modalCookieType=this.modalConfig[this.whichModal].cookieType;this.loadedCookieType=this.modalConfig[this.whichModal].loadedCookieType;this.requestConfirmationModal=new ob(this.environment,
this.gatewayData,this.modalConfig[this.whichModal].requestConfirmationModalString,O,g);this.environmentManager=g;this.contactInfoModal.id=this.modalCSSPrefix+"Wrapper";this.contactInfoModal.style.display="none";this.contactInfoModal.classList.add("contactInfoModalWrapper");this.styleString=this.templateManager.getTemplate(Y.CONTACT_INFO_CSS).replace(/modalCSSPrefix/g,this.modalCSSPrefix);this.update(h)}}class pb{constructor(a,e,m,h,r,u){this.consentReporter=a;this.updateListValues=e;this.cookieManager=
m;this.tagAccessManager=h;this.gatewayData=r;this.environment=u}sendCCPAEvent(a,e){"string"==typeof a&&/doNotSellChanged|requestData|deleteData/i.test(a)&&null!=e&&(e=this.buildCCPAEvent(a,e),"doNotSellChanged"===a&&c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"autoDoNotSellAllCategories")&&this.blockAllCategories(),this.consentReporter.addCustomEvent(e),this.consentReporter.sendReport())}buildCCPAEvent(a,e){return{event:a,dt:Date.now(),firstName:e.firstName,
lastName:e.lastName,email:e.email,address:e.address,comments:e.comments}}blockAllCategories(){return A(this,void 0,void 0,function*(){const a=this.cookieManager.getCookiesFromTypes(this.gatewayData.cookieTypes);c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"allowPerTagOptOut")&&this.tagAccessManager.clearTags();for(let e=0;e<this.gatewayData.cookieTypes.length;e++)yield this.cookieManager.setCookie(this.gatewayData.cookieTypes[e],"0");this.consentReporter.sendReport(a,
this.cookieManager.getCookiesFromTypes(this.gatewayData.cookieTypes));this.updateListValues(this.cookieManager.getCategoryMapFromCookieTypes(this.gatewayData.cookieTypes),this.tagAccessManager.getAllowedTags(),this.tagAccessManager.getBlockedTags())})}}class qb{constructor(a,e,m,h){this.environmentManager=a;this.environment=e;this.gatewayData=m;this.templateManager=h;this.sectionElement=document.createElement("section");this.isEnabledConsentWidget=function(r){return r&&r.hasOwnProperty("consentWidget")?
r.consentWidget:this.gatewayData.featureToggles.consentWidget};this.updateDOM=function(r){this.isEnabledConsentWidget(r)&&(this.sectionElement.innerHTML=this.getWidgetString(),this.sectionElement.querySelector("#consentWidget__text").innerHTML=r.translation.consentWidgetCopy,null==document.getElementById("ensConsentWidget")&&p.utilities.domReady(this.injectWidget))};this.update=r=>{this.environmentManager.enableAsyncEnvironments?this.environmentManager.getAsyncEnvironmentFromPromise(r,"ConsentWidget",
[u=>this.updateDOM(u)]):this.updateDOM(r)};this.getWidgetString=function(){return this.widgetString};this.injectWidget=()=>{this.gatewayData.featureToggles.disableDefaultStyles||p.utilities.addStyleElement(this.styleString);document.body.insertBefore(this.sectionElement,document.body.lastChild);this.setHTMLBindings()};this.setHTMLBindings=()=>{document.getElementById("ensConsentWidget").addEventListener("click",function(){G.gateway.openModal&&G.gateway.openModal()});document.getElementById("ensConsentWidget").addEventListener("keydown",
function(r){switch(r.which){case 13:case 32:r.stopPropagation(),r.preventDefault(),G.gateway.openModal&&G.gateway.openModal()}return!0})};this.templateManager=h;this.sectionElement.id="ensConsentWidget";this.sectionElement.className="consentWidget";this.sectionElement.setAttribute("aria-label","Cookie Consent Widget");this.widgetString=this.templateManager.getTemplate(Y.CONSENT_WIDGET_HTML);this.styleString=this.templateManager.getTemplate(Y.CONSENT_WIDGET_CSS);this.update(e)}}class hb{constructor(a,
e,m,h,r,u,D,O,w){this.version=a;this.gateway=e;this.clientId=m;this.publishPath=h;this.instanceId=r;this.packet=u;this.mode=D;this.cookies=O;this.environment=w}}class rb extends hb{constructor(a,e,m,h,r,u,D,O,w,g){super(a,e,m,h,r,u,D,O,w);this.version=a;this.gateway=e;this.clientId=m;this.publishPath=h;this.instanceId=r;this.packet=u;this.mode=D;this.cookies=O;this.environment=w;this.documentReferrer=g}}class ib extends ba{constructor(a,e,m,h,r,u,D,O,w,g,f,n,x){super();this.imageReference=a;this.clientId=
e;this.publishPath=m;this.enforceMode=h;this.gatewayVersion=r;this.reportingEnabled=u;this.performanceEnabled=D;this.nexusDomain=w;this.reportingFilter=g;this.sendBeaconReportingDisabled=n;this.sendBeacon=x;this.unreportedResources=[];this.reportedResources=[];this.privacyCookies={};this.stats=[];this.statIndex=0;this.REPORT_STRING_BUFFER=50;this.defaultFilteredProtocols=["data"];this.reportingFilter.filteredProtocols.push(...this.defaultFilteredProtocols);this.protocolRegex=c.utilities.arrayToRegex(this.reportingFilter.filteredProtocols.map(I=>
ib.formatProtocol(I)));this.filterRegex=new RegExp(this.reportingFilter.alwaysAllowedRegex.toString().replace("/","").replace("/",""),"i");this.beacons=[];this.options.reportInterval=2500;this.options.requestCount=3;O&&this.setOptions(O);this.setEnvironment(f);a=this.options.maxUrlSize-this.REPORT_STRING_BUFFER;this.maximumUncompressedSize=.13+4/3*a*Math.exp(-3.15E-5*a);this.urlPath=`//${this.nexusDomain}/privacy/v1/b/b.rnc`;this.startTimer()}sendBillingBeacon(){var a=new c.EnsRequest("");a.type=
"billing";a.source="";a.status="";a=this.compressReportString(this.generateRawReportString([a]));return this.beacon(a.encodedBody,a.rawLength)}generateRawReport(a){const e=0===this.beaconCounter?new rb(this.version,this.gatewayVersion,this.clientId,this.publishPath,this.instanceId,this.beaconCounter,this.enforceMode?"enforce":"observe",this.privacyCookies,this.environmentName,document.referrer):new hb(this.version,this.gatewayVersion,this.clientId,this.publishPath,this.instanceId,this.beaconCounter,
this.enforceMode?"enforce":"observe",this.privacyCookies,this.environmentName);return e.requests=a,e}generateRawReportString(a){return JSON.stringify(this.generateRawReport(a))}doReport(){this.reportingEnabled&&(this.processUnreportedResources(),this.sendBeacons())}sendBeacons(){if(0<this.options.requestCount)for(let a=0;a<this.options.requestCount;a++){if(0<this.beacons.length){const {data:e,length:m}=this.beacons.shift();this.beacon(e,m);this.stats[this.statIndex]&&(this.stats[this.statIndex].written=
!0);this.statIndex++}}else 0<this.beacons.length&&(this.beacons.forEach(a=>{const {data:e,length:m}=a;this.beacon(e,m);this.stats[this.statIndex]&&(this.stats[this.statIndex].written=!0);this.statIndex++}),this.beacons=[])}processUnreportedResources(){const a=this.unreportedResources.map(r=>JSON.stringify(r).length);var e=0;const m=[];for(let r=0;r<=a.length;r++)if(r===a.length&&0<m.length||e+a[r]>this.maximumUncompressedSize){var h=m.splice(0,m.length);const {encodedBody:u,rawLength:D}=this.compressReportString(this.generateRawReportString(h));
if(u.length>this.options.maxUrlSize-this.REPORT_STRING_BUFFER)for(this.ensLogger.consoleLog(`Reporting beacon compressed length was bigger than the maximum,\n                    splitting data into smaller chunks\n                    Actual uncompressed Length: ${e}\n                    Actual compressed Length: ${u.length}`),this.ensLogger.consoleLog(`Uncompressed: ${h}`),this.ensLogger.consoleLog(`Compressed: ${u}`),e=h.splice(0,Math.ceil(h.length/2)),this.unreportedResources=h.reverse().concat(this.unreportedResources),
h=[],h.push(e);0<h.length;){e=h.pop();const {encodedBody:O,rawLength:w}=this.compressReportString(this.generateRawReportString(e));if(O.length+this.REPORT_STRING_BUFFER<this.options.maxUrlSize)this.stats.push({rawLength:w,compressedLength:O.length,written:!1}),this.beacons.push({data:O,length:w}),this.reportedResources=this.reportedResources.concat(e);else{const g=e.splice(0,Math.ceil(e.length/2));this.unreportedResources=e.concat(this.unreportedResources);h.push(g)}}else this.stats.push({rawLength:D,
compressedLength:u.length,written:!1}),this.reportedResources=this.reportedResources.concat(h),this.beacons.push({data:u,length:D});e=0}else m.push(this.unreportedResources.shift()),e+=a[r]}startTimer(){const a=this;if(this.reportingEnabled)return this.doReport(),setTimeout(function(){a.startTimer()},this.options.reportInterval)}addResource(a){this.reportingEnabled&&this.shouldReportEnsRequest(a.destination,a.status)&&(a.source&&(a.source=a.source.substr(0,30)),a.type&&(a.type=a.type.substr(0,30)),
a.status&&(a.status=a.status.substr(0,30)),this.unreportedResources.push(a))}shouldReportEnsRequest(a,e){e=(new Set(["blocked","masked","rewrite","redact"])).has(e);return!this.protocolRegex.test(a)&&(e||!this.filterRegex.test(a))}static formatProtocol(a){return a.endsWith(":")?"^"+a:"^"+a+":"}setCookies(a){this.privacyCookies=a}setOptions(a){for(const e in a)this.options.hasOwnProperty(e)&&(this.options[e]=a[e])}}const sa=function(){const a={img:{elementObserver:!0,processAttribute:["src","srcset"],
previousProcessAttribute:["__src","__srcset"],enswatcher:!0},image:{elementObserver:!0,processAttribute:["src","srcset"],previousProcessAttribute:["__src","__srcset"],enswatcher:!0},source:{elementObserver:!0,processAttribute:["src","srcset"],previousProcessAttribute:["__src","__srcset"],enswatcher:!0},script:{elementObserver:!0,processAttribute:["src"],previousProcessAttribute:["__src"],enswatcher:!0},iframe:{elementObserver:!0,processAttribute:["src"],previousProcessAttribute:["__src"],enswatcher:!0},
a:{elementObserver:!0,processAttribute:["href"],previousProcessAttribute:["__href"],featureFlag:"monitorAnchorTags"},form:{processAttribute:["action"],previousProcessAttribute:["__action"],featureFlag:"monitorFormAction"},link:{processAttribute:["href"],previousProcessAttribute:["__href"],featureFlag:"enableCSSMonitoring",enswatcher:!0},object:{processAttribute:["data"],previousProcessAttribute:["__data"],featureFlag:"enableObjectMonitoring",elementObserver:!0,enswatcher:!0},audio:{processAttribute:["src"],
previousProcessAttribute:["__src"],featureFlag:"enableAudioMonitoring",elementObserver:!0,enswatcher:!0},embed:{processAttribute:["src"],previousProcessAttribute:["__src"],featureFlag:"enableEmbedMonitoring",elementObserver:!0,enswatcher:!0},track:{processAttribute:["src"],previousProcessAttribute:["__src"],featureFlag:"enableTrackMonitoring",elementObserver:!0,enswatcher:!0},video:{processAttribute:["src","poster"],previousProcessAttribute:["__src","__poster"],featureFlag:"enableVideoMonitoring",
elementObserver:!0,enswatcher:!0},button:{processAttribute:["formaction"],previousProcessAttribute:["__formaction"],featureFlag:"enableButtonMonitoring",elementObserver:!0,enswatcher:!0},input:{processAttribute:["formaction"],previousProcessAttribute:["__formaction"],featureFlag:"enableInputMonitoring",elementObserver:!0,enswatcher:!0},area:{processAttribute:["href"],previousProcessAttribute:["__href"],featureFlag:"enableAreaMonitoring",elementObserver:!0,enswatcher:!0},elementObserverTags:[],processElementTags:[],
enswatchTags:[]};return q(a,"elementObserver","elementObserverTags"),q(a,"processAttribute","processElementTags"),q(a,"enswatcher","enswatchTags"),a}(),sb=function(a,e,m){function h(g,f){const n=[];for(const x in f)Array.isArray(f[x].processAttribute)&&f[x].processAttribute.forEach(I=>{-1!==n.indexOf(I)||void 0!==f[x].featureFlag&&!c.utilities.getEnvironmentOverrideOrGlobalDefault(g,e,f[x].featureFlag)||n.push(I)});return n}window.ensClientConfig.ensCreateElement=document.createElement;let r=!1;const u=
function(){const g=document.querySelectorAll("iframe");for(let f=0;f<g.length;f++){const n=g[f];p.utilities.validateRemoveChild(n)&&n.parentNode.removeChild(n)}r=!0},D=new MutationObserver(function(g){for(let I=0;I<g.length;I++){c.utilities.getEnvironmentOverrideOrGlobalDefault(a,e,"removeAllIFrames")&&!r&&u();const V=g[I];if("attributes"===V.type&&m.processElement("mutationObserverA",V.target),"childList"===V.type){var f=V.addedNodes.length;for(var n=0;n<f;n++){var x=void 0;x="[object Array]"===
Object.prototype.toString.call(V.addedNodes)?V.addedNodes[n]:V.addedNodes.item(n);m.processElement("mutationObserverCL",x)}f=V.removedNodes.length;for(n=0;n<f;n++){let T;T="[object Array]"===Object.prototype.toString.call(V.removedNodes)?V.removedNodes[n]:V.removedNodes.item(n);x=T.nodeName.toLowerCase();if(-1<sa.enswatchTags.indexOf(x.toLowerCase())&&(void 0===sa[x].featureFlag||c.utilities.getEnvironmentOverrideOrGlobalDefault(a,e,sa[x].featureFlag))&&Object.isExtensible(T)){T.enswatch||Object.defineProperty(T,
"enswatch",p.utilities.watcher);try{["src","srcset"].forEach(W=>{T.enswatch(W,function(ka,na,ha){if(ka===W){let ea=ha;return m.processURL(ha,this.tagName.toLowerCase(),"Removed_NodeModified",p.utilities.getReferrer(),function(za){ea=za}),ea}})})}catch(W){}}}}}}),O=function(){var g=document,f={attributes:!0,childList:!0,subtree:!0,characterData:!1};f.attributeFilter=h(a,sa);a.isObservingStyle&&f.attributeFilter.push("style");D.observe(g,f);const n=HTMLImageElement.prototype.setAttribute;HTMLImageElement.prototype.setAttribute=
function(T,W,ka){let na=W;const ha=void 0===this.tagName?null:this.tagName.toLowerCase();return!ka&&null!=ha&&sa[ha].processAttribute.includes(T)&&(na=m.processURL(W,ha,"HTMLImage_SETATTRIBUTE",p.utilities.getReferrer())),n.call(this,T,na)};const x=HTMLScriptElement.prototype.setAttribute;HTMLScriptElement.prototype.setAttribute=function(T,W,ka){let na=W;const ha=void 0===this.tagName?null:this.tagName.toLowerCase();return!ka&&null!=ha&&sa[ha].processAttribute.includes(T)&&(na=m.processURL(W,ha,"HTMLScript_SETATTRIBUTE",
p.utilities.getReferrer())),x.call(this,T,na)};const I=HTMLIFrameElement.prototype.setAttribute;HTMLIFrameElement.prototype.setAttribute=function(T,W,ka){let na=W;if(!ka&&"src"===T||"ng-src"===T){let ha=this;c.utilities.getEnvironmentOverrideOrGlobalDefault(a,e,"removeAllIFrames")?p.utilities.validateRemoveChild(ha)?ha.parentNode.removeChild(ha):ha=null:m.processURL(W,this.tagName.toLowerCase(),"HTMLIFRAME_SETATTRIBUTE",p.utilities.getReferrer(),ea=>(na=ea,(p.utilities.isSafari()||c.utilities.getEnvironmentOverrideOrGlobalDefault(a,
e,"removeIFrameOnBlock"))&&m.isVoidURL(ea)&&(p.utilities.validateRemoveChild(ha)?ha.parentNode.removeChild(ha):ha=null),na))}return I.call(this,T,na)};const V=HTMLAnchorElement.prototype.setAttribute;HTMLAnchorElement.prototype.setAttribute=function(T,W,ka){let na=W;const ha=void 0===this.tagName?null:this.tagName.toLowerCase();return!ka&&"href"===T&&null!=ha&&c.utilities.getEnvironmentOverrideOrGlobalDefault(a,e,sa[ha].featureFlag)&&(na=m.processURL(W,ha,"HTMLANCHOR_SETATTRIBUTE",p.utilities.getReferrer())),
V.call(this,T,na)};g=Element.prototype;f=Object.getOwnPropertyDescriptor(g,"innerHTML");if(f.configurable){const T=f.set;Object.defineProperty(g,"innerHTML",{set:function(W){return T.call(this,m.processHTML("innerHTML",W))}})}},w=HTMLLinkElement.prototype.setAttribute;HTMLLinkElement.prototype.setAttribute=function(g,f,n){let x=f;const I=void 0===this.tagName?null:this.tagName.toLowerCase();return!n&&"href"===g&&null!=I&&c.utilities.getEnvironmentOverrideOrGlobalDefault(a,e,sa[I].featureFlag)&&(x=
m.processURL(f,I,"HTMLLINK_SETATTRIBUTE",p.utilities.getReferrer())),w.call(this,g,x)};document.createElement=function(g){const f=Function.prototype.apply.call(window.ensClientConfig.ensCreateElement,document,arguments),n=g.toLowerCase();if(-1<sa.enswatchTags.indexOf(n)&&(void 0===sa[n].featureFlag||c.utilities.getEnvironmentOverrideOrGlobalDefault(a,e,sa[n].featureFlag))&&Object.isExtensible(f)){f.enswatch||Object.defineProperty(f,"enswatch",p.utilities.watcher);try{Array.isArray(sa[n].processAttribute)&&
sa[n].processAttribute.forEach(x=>{f.enswatch(x,function(I,V,T){let W=T;try{T instanceof URL&&(W=T.href)}catch(ka){}return m.processURL(T,this.tagName.toLowerCase(),n+"_DOMAttrModified",p.utilities.getReferrer(),function(ka){W=ka}),W})})}catch(x){}}if(a.isObservingStyle||-1<sa.processElementTags.indexOf(g)){const x={attributes:!0,childList:!1,characterData:!1};x.attributeFilter=h(a,sa);D.observe(f,x)}return f};window.Image=function(g,f){const n=document.createElement("img");return void 0!==g&&n.setAttribute("width",
g),void 0!==f&&n.setAttribute("height",f),n};O();return{updateEnvironment:function(g){(e=g)&&O()}}};class tb{constructor(a){this.clientName=a;this.ALLOWED_KEY=a+"_ENSIGHTEN_ALLOWED_URLS";this.BLOCKED_KEY=a+"_ENSIGHTEN_BLOCKED_URLS";this.INTERACTION_KEY=a+"_ENSIGHTEN_INTERACTED_URLS"}isLocalStorageSupported(){try{return"localStorage"in window&&null!=window.localStorage&&"object"==typeof localStorage&&"function"==typeof localStorage.getItem&&"function"==typeof localStorage.setItem}catch(a){return!1}}allowTag(a,
e=!0){if(this.validateTag(a)&&this.isLocalStorageSupported()){var m=this.getAllowedTags();this.isTagIncluded(m,a)||(m.push(a),localStorage.setItem(this.ALLOWED_KEY,JSON.stringify(m)));m=this.getBlockedTags();return m=m.filter(function(h){return JSON.stringify(h)!==JSON.stringify(a)}),localStorage.setItem(this.BLOCKED_KEY,JSON.stringify(m)),e&&this.consentReporter.addCustomEvent(this.buildTagOptInOptOutEvent(a,1)),a}return this.isLocalStorageSupported()?Error("invalid tag"):Error("Local storage is either disabled or not supported in your browser.")}blockTag(a,
e=!0){if(this.validateTag(a)&&this.isLocalStorageSupported()){var m=this.getBlockedTags();this.isTagIncluded(m,a)||(m.push(a),localStorage.setItem(this.BLOCKED_KEY,JSON.stringify(m)));m=this.getAllowedTags();return m=m.filter(function(h){return JSON.stringify(h)!==JSON.stringify(a)}),localStorage.setItem(this.ALLOWED_KEY,JSON.stringify(m)),e&&this.consentReporter.addCustomEvent(this.buildTagOptInOptOutEvent(a,0)),a}return Error("invalid tag")}clearTags(){this.isLocalStorageSupported()&&(localStorage.setItem(this.ALLOWED_KEY,
""),localStorage.setItem(this.BLOCKED_KEY,""))}getAllowedTags(){return this.isLocalStorageSupported()&&localStorage.getItem(this.ALLOWED_KEY)?JSON.parse(localStorage.getItem(this.ALLOWED_KEY)):[]}getBlockedTags(){return this.isLocalStorageSupported()&&localStorage.getItem(this.BLOCKED_KEY)?JSON.parse(localStorage.getItem(this.BLOCKED_KEY)):[]}isTagInAllowedList(a){return this.validateTag(a)?this.isTagIncluded(this.getAllowedTags(),a):Error("invalid tag")}isTagInBlockedList(a){return this.validateTag(a)?
this.isTagIncluded(this.getBlockedTags(),a):Error("invalid tag")}setConsentReporter(a){this.consentReporter=a}computeOptInOptOutEvents(a,e,m,h){const r=[],u=this.getInteractedTags();if(!(u instanceof Error)){for(let D=a.length;D--;0<=D){const O=this.hasTagBeenInteractedWith(a[D],m,u,Number(e[D]),Number(h));(O||e[D]!==h)&&(r.push({event:this.buildTagOptInOptOutEvent(a[D],Number(e[D])),tag:a[D],tagStatus:Number(e[D]),tagStatusChanged:O}),void 0===u[m]&&(u[m]={}),u[m][a[D].displayName]=Number(e[D]))}localStorage.setItem(this.INTERACTION_KEY,
JSON.stringify(u))}return r}getInteractedTags(){return this.isLocalStorageSupported()?localStorage.getItem(this.INTERACTION_KEY)?JSON.parse(localStorage.getItem(this.INTERACTION_KEY)):{}:Error("Local storage is either disabled or not supported in your browser.")}hasTagBeenInteractedWith(a,e,m,h,r){return void 0!==m[e]&&void 0!==m[e][a.displayName]?m[e][a.displayName]!==h:h!==r}buildTagOptInOptOutEvent(a,e){let m;return m=a.hasOwnProperty("displayName")&&null!==a.displayName&&0<a.displayName.length?
a.displayName:a.tag.slice(0,128),{event:"cookieChanged",[m]:String(e),dt:Date.now(),isTag:1}}validateTag(a){return a&&a.tag}isTagIncluded(a,e){let m=!1;for(let h=a.length;h--;0<=h)if(a[h].displayName===e.displayName&&a[h].tag===e.tag){m=!0;break}return m}}class ub{constructor(a,e,m){this.featureToggles=a;this.environment=e;this.domProcessor=m;this.ensLogger=new fa;this.cssLoadBlocker=this.filterSheet=null;this.sanitizeCount=0;this.seenUrl=[];this.disabledCssHash={};this.matchURLRegEx=/(url\s*\("?'?)(?=(.[^\(|^\|^"|^')]*))/i;
this.observer=new MutationObserver(h=>{c.utilities.each(h,r=>{if(0<r.addedNodes.length&&"link"===r.addedNodes[0].localName||"link"===r.attributeName){let u=!1;(0<r.addedNodes.length&&0<r.addedNodes[0].classList.length&&"__css_exfil_protection_filtered_styles"===r.addedNodes[0].classList&&(u=!0),u)||(r=r.addedNodes[0],null!=r&&r.addEventListener("load",()=>{this.scanCssSingle(document.styleSheets[document.styleSheets.length-1])}))}})});this.observerConfig={attributes:!0,childList:!0,subtree:!0,characterData:!0,
attributeFilter:["href"]};this.startObserving=()=>{this.observer.observe(document,this.observerConfig);window.addEventListener("DOMContentLoaded",this.domContentLoadedListener,!1);window.addEventListener("load",this.loadListener,!1)};this.stopObserving=()=>{this.observer.disconnect();window.removeEventListener("DOMContentLoaded",this.domContentLoadedListener);window.removeEventListener("load",this.loadListener)};this.domContentLoadedListener=()=>{for(var h=0;h<document.styleSheets.length;h++)this.disabledCssHash[window.btoa(document.styleSheets[h].href)]=
document.styleSheets[h].disabled;h=document.createElement("style");h.innerText=this.buildContentLoadBlockerCSS();h.className="__tmp_css_exfil_protection_load_blocker";this.cssLoadBlocker=h;document.head.appendChild(this.cssLoadBlocker);this.filterSheet=this.createFilterSheet();this.incrementSanitize();this.scanCss()};this.loadListener=()=>{this.decrementSanitize()};this.updateEnvironment=h=>{this.environment=h;this.stopObserving();c.utilities.getEnvironmentOverrideOrGlobalDefault(this.featureToggles,
this.environment,"enableCSSMonitoring")&&this.startObserving()};this.getCSSRules=h=>{let r=null;try{null!=h&&(r=h.rules||h.cssRules)}catch(u){this.ensLogger.consoleLog(u)}return r};this.parseCSSRules=h=>{const r=[],u=[];if(null!=h)for(let D=0;D<h.length;D++){null!=h[D].selectorText&&h[D].selectorText.toLowerCase();let O=null;null!=h[D].cssText&&(O=h[D].cssText.toLowerCase());null==O||-1===O.indexOf("url")||-1===O.indexOf("https://")&&-1===O.indexOf("http://")&&-1===O.indexOf("//")||-1!==O.indexOf("xmlns\x3d'http://")||
!0===this.urlAllowed(O,h[D].selectorText)||(r.push(h[D].selectorText),u.push(O))}return null!=r[0]&&null!=h[0]&&this.disableCSS(h[0].parentStyleSheet),[r,u]};this.filterCss=(h,r)=>{for(const u in h)"string"==typeof r[u]&&"function"==typeof r[u].indexOf&&(-1!==r[u].indexOf("background")&&this.filterSheet.sheet.insertRule(h[u]+" { background-image:none !important; }",this.filterSheet.sheet.cssRules.length),-1!==r[u].indexOf("list-style")&&this.filterSheet.sheet.insertRule(h[u]+" { list-style: inherit !important; }",
this.filterSheet.sheet.cssRules.length),-1!==r[u].indexOf("cursor")&&this.filterSheet.sheet.insertRule(h[u]+" { cursor: auto !important; }",this.filterSheet.sheet.cssRules.length),-1!==r[u].indexOf("content")&&this.filterSheet.sheet.insertRule(h[u]+" { content: normal !important; }",this.filterSheet.sheet.cssRules.length));return this.filterSheet};this.createFilterSheet=()=>(this.filterSheet=document.createElement("style"),this.filterSheet.disabled=!1,this.filterSheet.className="__css_exfil_protection_filtered_styles",
this.filterSheet.innerText="",document.head.appendChild(this.filterSheet),this.filterSheet);this.scanCssSingle=h=>{this.filterSheet=document.createElement("style");this.filterSheet.className="__css_exfil_protection_filtered_styles";this.filterSheet.innerText="";document.head.appendChild(this.filterSheet);var r=this.getCSSRules(h);null==r?(this.incrementSanitize(),this.getCrossDomainCSS(h)):(this.incrementSanitize(),this.handleImportedCSS(r),r=this.parseCSSRules(r),this.filterCss(r[0],r[1]),this.checkCSSDisabled(h)&&
this.enableCSS(h),this.decrementSanitize())};this.scanCss=()=>{const h=document.styleSheets,r=D=>{var O=this.getCSSRules(D);null==O?setTimeout(r,1E3):(this.incrementSanitize(),this.handleImportedCSS(O),O=this.parseCSSRules(O),this.filterCss(O[0],O[1]),this.checkCSSDisabled(D)&&this.enableCSS(D),this.decrementSanitize())};for(let D=0;D<h.length;D++){var u=this.getCSSRules(h[D]);const O=h[D];null==u?(this.incrementSanitize(),this.getCrossDomainCSS(O),null==h[D].href?setTimeout(r,1E3,O):(this.incrementSanitize(),
this.getCrossDomainCSS(h[D]))):(this.incrementSanitize(),this.handleImportedCSS(u),u=this.parseCSSRules(u),this.filterCss(u[0],u[1]),this.checkCSSDisabled(h[D])&&this.enableCSS(h[D]),this.decrementSanitize())}};this.handleImportedCSS=h=>{if(null!=h)for(let u=0;u<h.length;u++)if("[object CSSImportRule]"===Object.prototype.toString.call(h[u])){this.incrementSanitize();var r=this.getCSSRules(h[u].styleSheet);null==r?this.getCrossDomainCSS(h[u].styleSheet):(r=this.parseCSSRules(r),this.filterCss(r[0],
r[1]),this.decrementSanitize())}else u=h.length};this.urlAllowed=(h,r)=>{h=this.getHTMLUrl(h);r=this.domProcessor.processURL(h,r||"media","CSS_MANAGER",p.utilities.getReferrer());return!this.domProcessor.isVoidURL(r)};this.getHTMLUrl=h=>(h=h.match(this.matchURLRegEx))&&2<h.length?h[2]:null;this.getCrossDomainCSS=h=>{let r=null,u=null;if(null!=h&&(u=h.href),null!=u){if(-1!==this.seenUrl.indexOf(u))return void this.decrementSanitize();this.seenUrl.push(u)}const D=new XMLHttpRequest;D.open("GET",u,!0);
D.onreadystatechange=()=>{if(4===D.readyState){const O=document.createElement("style");if(O.innerText=D.responseText,document.head.appendChild(O),r=this.getCSSRules(O.sheet),null!=r){this.handleImportedCSS(r);const w=this.parseCSSRules(r);return this.filterCss(w[0],w[1]),p.utilities.validateRemoveChild(O)&&O.parentNode.removeChild(O),this.checkCSSDisabled(h)&&this.enableCSS(h),this.decrementSanitize(),r}setTimeout(function g(){if(r=this.getCSSRules(O.sheet),null!=r){this.handleImportedCSS(r);const f=
this.parseCSSRules(r);return this.filterCss(f[0],f[1]),O.disabled=!0,p.utilities.validateRemoveChild(O)&&O.parentNode.removeChild(O),this.checkCSSDisabled(h)&&this.enableCSS(h),this.decrementSanitize(),r}setTimeout(g,10)},10)}};D.send()};this.disableCSS=h=>{null!=h&&(h.disabled=!0)};this.enableCSS=h=>{null==h||this.disabledCssHash[window.btoa(h.href)]||(h.disabled=!1,window.dispatchEvent(new Event("resize")))};this.checkCSSDisabled=h=>null!=h&&h.disabled;this.disableAndRemoveCSS=h=>{null!=h&&(h.disabled=
!0,p.utilities.validateRemoveChild(h)&&h.parentNode.removeChild(h))};this.incrementSanitize=()=>{this.sanitizeCount=this.sanitizeCount++};this.decrementSanitize=()=>{this.sanitizeCount--;0>=this.sanitizeCount&&this.disableAndRemoveCSS(this.cssLoadBlocker)};this.buildContentLoadBlockerCSS=()=>"input,input ~ * { background-image:none !important; list-style: inherit !important; cursor: auto !important; content:'' !important; } input::before,input::after,input ~ *::before, input ~ *::after { content:'' !important; }";
c.utilities.getEnvironmentOverrideOrGlobalDefault(a,e,"enableCSSMonitoring")&&this.startObserving()}}var ab;!function(a){a.ConfigUpdate="ConfigUpdate";a.Status="status";a.ConfigRequest="ConfigRequest";a.Initialized="Initialized";a.ReportingRequest="ReportingRequest";a.Version="version"}(ab||(ab={}));const Sa=ab;class vb{constructor(a,e,m,h,r,u){this.gatewayData=a;this.environment=e;this.activeCategories=m;this.allowedTags=h;this.blockedTags=r;this.historyEntryReporter=u;this.ensLogger=new fa;this.checkServiceWorkerInitialized=
()=>navigator.serviceWorker&&navigator.serviceWorker.controller&&this.isServiceWorkerInitialized;this.shouldProcessThroughServiceWorker=(D,O,w)=>{const g=["XHR_MANAGER","FETCH_MANAGER","SENDBEACON_MANAGER"],f="img image source link xhr script iframe form".split(" ");return!(!this.checkServiceWorkerInitialized()||!g.includes(D)&&!f.includes(O))&&this.isSameOrigin(O,w)};this.updateMessageHandler=D=>{navigator.serviceWorker.addEventListener("message",D)};this.updateServiceWorkerConfig=(D,O,w,g)=>(this.environment=
D,this.activeCategories=O,this.allowedTags=w,this.blockedTags=g,!(!navigator.serviceWorker||!navigator.serviceWorker.controller)&&(navigator.serviceWorker.controller.postMessage({ensMessageType:Sa.ConfigUpdate,configObject:this.gatewayData,activeEnvironment:this.environment,activeCategories:this.activeCategories,allowedTags:this.allowedTags,blockedTags:this.blockedTags}),!0));this.updateReporterEntries=D=>{for(let O=0;O<D.length;O++)this.historyEntryReporter.createHistoryEntry(D[O].ensRequest,D[O].node),
this.historyEntryReporter.resourceComplete(D[O].node,D[O].ensRequest.id,D[O].status)};this.gatewayData=JSON.parse(JSON.stringify(a));navigator.serviceWorker&&navigator.serviceWorker.addEventListener("message",D=>{switch(D.data.message){case Sa.ConfigRequest:this.isServiceWorkerInitialized=!1;this.updateServiceWorkerConfig(this.environment,this.activeCategories,this.allowedTags,this.blockedTags);break;case Sa.Initialized:this.isServiceWorkerInitialized=D.data;break;case Sa.ReportingRequest:this.updateReporterEntries(D.data.result);
break;default:this.ensLogger.consoleLog(`Unhandled message: ${D.data.message}`)}});this.updateServiceWorkerConfig(this.environment,this.activeCategories,this.allowedTags,this.blockedTags)}setServiceWorkerInitialized(a){this.isServiceWorkerInitialized=a}isSameOrigin(a,e){return"iframe"===a.trim().toLowerCase()?(a=new URL(e),!!window.location.origin.includes(a.origin)):!0}getServiceWorkerVersion(){return!(!navigator.serviceWorker||!navigator.serviceWorker.controller)&&(navigator.serviceWorker.controller.postMessage({ensMessageType:Sa.Version}),
!0)}}class wb{constructor(a,e){this.browserHistoryEntryReporter=a;this.serviceWorkerHistoryEntryReporter=e}getHistory(){const a=this.browserHistoryEntryReporter.getHistory();if(null!=this.serviceWorkerHistoryEntryReporter){const e=this.serviceWorkerHistoryEntryReporter.getHistory();if(null!=e.before)for(const m in e.before)a.before[m]=e.before[m];if(null!=e.complete)for(const m in e.complete)a.complete[m]=e.complete[m]}return a}}class jb{constructor(a,e){this.request=a;this.node=e}}class bb{constructor(a,
e){this.history=a;this.reporter=e;this.ensLogger=new fa;setInterval(this.historyGarbageCollector,250,this)}getHistory(){return this.history}createHistoryEntry(a,e){e.__reference||(this.history.before[a.id]=new jb(a,e))}resourceComplete(a,e,m){e=e||a.__gateway;var h=this.history.before[e];if(!h)return!1;h=h.request;h.end=+new Date;h.status=m;this.history.complete[e]=new jb(h,a);this.ensLogger.consoleLog("resourceComplete: ",m,": ",h);this.reporter.addResource(h);delete this.history.before[e]}historyGarbageCollector(a){for(const e in a.history.before){if(!a.history.before.hasOwnProperty(e))continue;
const m=+new Date;void 0!==a.history.before[e].request&&5E3<m-a.history.before[e].request.start&&(a.resourceComplete(a.history.before.nodeRef,e,"timeout"),delete a.history.before[e])}}}class xb{constructor(a,e){this.featureToggles=a;this.domProcessor=e;this.matchURLRegEx=/(url\s*\("?'?)(?=(.[^\(|^\|^"|^')]*))/i;this.referrer=p.utilities.getReferrer()}processElementStyle(a,e){if(this.getIsObservingStyle()&&this.elementHasCSSUrl(a)){const m=this,h=this.getElementUrl(a),r=a.tagName.toLowerCase();this.domProcessor.processURL(h,
r,e,this.referrer,u=>{a.style=m.replaceElementStyle(a,u)})}return a.style}processHTMLStyle(a,e){const m=this;var h=/style\s*=/i.test(e);this.getIsObservingStyle()&&h&&this.htmlHasCSSUrl(e)&&(h=this.findTagsWithStyle(e),null!=h&&c.utilities.each(h,r=>{const u=m.getHTMLUrl(r);u&&(r=m.getTagName(r),m.domProcessor.processURL(u,r,a,this.referrer,D=>{e=e.replace(u,D)}))}));return e}getIsObservingStyle(){return this.featureToggles.isObservingStyle}replaceElementStyle(a,e){let m=a.getAttribute("style");const h=
a=this.getElementUrl(a);return a=a.replace(a,e),m=m.replace(h,a),m}elementHasCSSUrl(a){if("function"!=typeof a.getAttribute)return!1;const e=a.getAttribute("style");if(null==a.tagName||null==e)return!1;a=e.match(this.matchURLRegEx);return null!=a&&!this.domProcessor.isVoidURL(a[2])}htmlHasCSSUrl(a){a=a.match(this.matchURLRegEx);return null!=a&&!this.domProcessor.isVoidURL(a[2])}getElementUrl(a){return(a=a.getAttribute("style").match(this.matchURLRegEx))&&2<a.length?a[2]:null}getHTMLUrl(a){return(a=
a.match(this.matchURLRegEx))&&2<a.length?a[2]:null}getTagName(a){return(a=a.match(/(<\s*(\w*)[^>]+style\s*=\s*(.*?)[^>]*>)/i))&&2<a.length?a[2]:null}findTagsWithStyle(a){return a.match(/(<\s*(\w*)[^>]+style\s*=\s*(.*?)[^>]*>)/gi)}}class yb extends c.UrlProcessor{constructor(a,e,m,h,r){super(a,e,m,h);this.events=["load","abort","error"];this.referrer=p.utilities.getReferrer();this.styleRequestTracker=new xb(this.gatewayData.featureToggles,this);this.serviceWorkerBridge=r}getIsObservingStyle(){return this.styleRequestTracker.getIsObservingStyle()}processURL(a,
e,m,h,r){return this.serviceWorkerBridge&&this.serviceWorkerBridge.shouldProcessThroughServiceWorker(m,e,a)?a:super.processURL(a,e,m,h,r)}processURLAndBody(a,e,m,h,r,u){this.serviceWorkerBridge&&this.serviceWorkerBridge.shouldProcessThroughServiceWorker(h,m,a)||super.processURLAndBody(a,e,m,h,r,u)}processElement(a,e){let m=e.tagName;const h=Object.getPrototypeOf(e)===DocumentFragment.prototype;let r=+new Date;if(!h){if(null==m||null===e)return e;this.serviceWorkerBridge&&this.serviceWorkerBridge.checkServiceWorkerInitialized()||
this.styleRequestTracker.processElementStyle(e,a);const u=e.tagName.toLowerCase();if(this.hasElementBeenProcessed(e,u))return e;if(e.__gateway=r,(c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"removeIFrameOnBlock")||c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"removeAllIFrames"))&&"iframe"===u)return this.removeIframe(e);sa[u]&&(void 0===sa[u].featureFlag||c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,
this.environment,sa[u].featureFlag))&&sa[u].processAttribute.forEach(D=>{const O=e[D];this.serviceWorkerBridge&&this.serviceWorkerBridge.shouldProcessThroughServiceWorker(a,u,O)||this.processElementByAttribute(e,a,D,function(w){e[D]=w;e[`__${D}`]=e[D]})})}return this.processElementChildren(a,e),m=r=null,e}processHTML(a,e){if(null==e)return e;let m=e;for(const h in sa)e=sa[h],void 0===e.processAttribute||void 0!==e.featureFlag&&!c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,
this.environment,sa[h].featureFlag)||e.processAttribute.forEach(r=>{(new RegExp(r+"\\s*\x3d","i")).test(m.toString())&&(m=p.utilities.handleTrustedHTML(m,u=>this.processHTMLAttribute(a,u,[h],r)))});return this.serviceWorkerBridge&&this.serviceWorkerBridge.checkServiceWorkerInitialized()||(m=p.utilities.handleTrustedHTML(m,h=>this.styleRequestTracker.processHTMLStyle(a,h))),m}processElementChildren(a,e){e.children&&c.utilities.each(Array.from(e.children),m=>{this.processElement(a,m)})}processHTMLAttribute(a,
e,m,h){function r(D){return D.match(RegExp("(\x3c\\s*(iframe)\\s(.*?)*\x3e)(.*?)(\x3c\\s*/\\s*iframe\x3e)+","ig"))}const u="(\x3c\\s*("+m.join("|")+")[^\x3e]+"+h+"\\s*\x3d\\s*(.*?)[^\x3e]*\x3e)";c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"removeAllIFrames")&&r(e)&&(e=function(D){const O=r(D);for(let w=0;w<O.length;w++)D=D.replace(O[w],"");return D}(e));m=e.match(new RegExp(u,"ig"));return m&&c.utilities.each(m,D=>{const O=function(w){return(w=
w.match(new RegExp("\\s*"+h+"\\s*\x3d\\s*('|\")?(.*?)(\\1)(\\s|/\x3e|\x3e|;|$)","i")))&&2<w.length?w[2].trim():null}(D);if(O){const w=function(g){return(g=g.match(new RegExp(u,"i")))&&2<g.length?g[2]:null}(D);super.processURL(O,w,a,this.referrer,g=>{(p.utilities.isSafari()||c.utilities.getEnvironmentOverrideOrGlobalDefault(this.gatewayData.featureToggles,this.environment,"removeIFrameOnBlock"))&&null!==w&&"iframe"===w.toLowerCase()?(g="(\x3c\\s*(iframe)[^\x3e]+src\\s*\x3d\\s*(('|\"|`)?"+O.replace(/[.*+?^${}()|[\]\\]/g,
"\\$\x26")+")[^\x3e]*\x3e)(.*?)(\x3c\\s*/\\s*iframe\x3e)",g=new RegExp(g,"i"),e=e.replace(g,"")):this.serviceWorkerBridge&&this.serviceWorkerBridge.shouldProcessThroughServiceWorker(a,w,O)||(e=e.replace(O,g))})}}),e}processElementByAttribute(a,e,m,h){if("srcset"===m.toLowerCase())return this.processElementSrcSet(a,e,m,h);m=void 0!==m?a[m]:a.src;m="string"==typeof m?m:"";const r=a.tagName.toLowerCase();return this.processURLInternal(m,null,r,e,a,this.referrer,h,u=>{a.addEventListener?c.utilities.each(this.events,
D=>{a.addEventListener(D,this.createEventHandler(u,D),!1)}):a.attachEvent&&c.utilities.each(this.events,D=>{a.attachEvent("on"+D,this.sendBlockReport(u,D,this.referrer))})})}processElementSrcSet(a,e,m,h){m=a[m];if("string"!=typeof m)return"";m=m.split(",");const r=a.tagName.toLowerCase();m=m.map(u=>{var D=u.split(" ")[0];D=this.processURLInternal(D,null,r,e,a,this.referrer,h,O=>{a.addEventListener?c.utilities.each(this.events,w=>{a.addEventListener(w,this.createEventHandler(O,w),!1)}):a.attachEvent&&
c.utilities.each(this.events,w=>{a.attachEvent("on"+w,this.sendBlockReport(O,w,this.referrer))})});return this.isVoidURL(D)?"":u}).filter(u=>""!==u);return 0<m.length?m.reduce((u,D)=>u+", "+D):""}hasElementBeenProcessed(a,e){let m=!1;return a.__gateway&&(-1===sa.processElementTags.indexOf(e)?m=!0:null!=sa[e]&&sa[e].processAttribute.forEach(h=>{a[`__${h}`]===a[h]&&(m=!0)})),m}removeIframe(a){return p.utilities.validateRemoveChild(a)&&a.parentNode.removeChild(a),null}}class zb{constructor(a){this.consentReporter=
a;this.measurePageLoadTime()}measurePageLoadTime(){window.addEventListener("load",()=>{if(p.utilities.isSafari())var a=Date.now()-performance.timing.navigationStart;else a=performance.getEntriesByType("navigation")[0],a=a.domComplete-a.fetchStart;this.pageLoadTime=a;this.reportPageLoadTime()})}reportPageLoadTime(){const a=this.buildPageLoadEvent();"number"!=typeof this.pageLoadTime||Number.isNaN(this.pageLoadTime)||(this.consentReporter.addCustomEvent(a),this.consentReporter.sendReport())}buildPageLoadEvent(){return{dt:Date.now(),
pageLoadTime:this.pageLoadTime,event:"pageLoad"}}}const nb=function(a){function e(P){W.initializeActiveEnvironment();P.whitelist&&P.whitelist.default&&P.whitelist.default.push({tag:H.proxyDNS});m(P);"function"==typeof ta.update&&ta.update(P);null==La||La.update(P);c.utilities.getEnvironmentOverrideOrGlobalDefault(a.featureToggles,P,"consentWidget")&&n.update(P);V.setEnvironment(P);ha.setEnvironment(P);const la=Qa(P);null!=za&&za.updateEnvironment(P);Ja.updateEnvironment(P);wa.updateEnvironment(P,
I.getCategoryMapFromCookieTypes(la),ea.getAllowedTags(),ea.getBlockedTags());Ba&&Ba.updateServiceWorkerConfig(P,I.getCategoryMapFromCookieTypes(la),ea.getAllowedTags(),ea.getBlockedTags())}function m(P){T=P;ja.environment=P}function h(){return"2.3.736"}function r(){function P(va){const Ca=cb.getCookie(va);void 0!==Ca&&(la[va]=Ca)}const la={},qa=cb.getCookieTypes();for(let va=0;va<qa.length;va++)P(qa[va]);return P("MODAL_VIEWED"),P("MODAL_LOADED"),P("BANNER_VIEWED"),P("BANNER_LOADED"),P("LOCALE"),
la}function u(P,la){a.enableBotAndFraudProtection=!0;a.enableBotAndFraudProtectionReason=la;const qa={};for(la=0;la<P.length;la++)qa["object"==typeof P[la]?P[la].name:P[la]]=0;wa.updateListValues(qa,ea.getAllowedTags(),ea.getBlockedTags());!0;(function(va){Ba&&Ba.updateServiceWorkerConfig(W.getActiveEnvironment(),va,ea.getAllowedTags(),ea.getBlockedTags())})(qa);Z.fireConsentChangeCallbacks(()=>qa)}function D(P){u(a.cookieTypes,P)}let O,w,g,f,n,x,I,V,T,W,ka,na,ha,ea,za,Ja,Ba,wa,db,Ta;let Ma,La={},
ta={};const ja={};c.utilities.isWhitelist(a,T)&&(a.whitelist.default=a.whitelist.default||[],a.whitelist.default.push({tag:H.proxyDNS}));a.featureToggles.disableDefaultStyles=void 0!==a.featureToggles.disableDefaultStyles&&a.featureToggles.disableDefaultStyles;a.featureToggles.useLocalTemplates=void 0===a.featureToggles.useLocalTemplates||a.featureToggles.useLocalTemplates;a.featureToggles.overridePublicSuffixEnabled=void 0!==a.featureToggles.overridePublicSuffixEnabled&&a.featureToggles.overridePublicSuffixEnabled;
Ma=new J(a.featureToggles.useLocalTemplates);a.featureToggles.enableDataMonitoring=a.featureToggles.enableDataMonitoring||!1;a.featureToggles.enableGoogleConsent=a.featureToggles.enableGoogleConsent||!1;var eb=["enableObjectMonitoring","enableAudioMonitoring","enableEmbedMonitoring","enableTrackMonitoring","enableVideoMonitoring"];for(var Ra in eb)a.featureToggles[Ra]=void 0===a.featureToggles[Ra]||a.featureToggles[Ra];a.featureToggles.objectFetchRejection=a.featureToggles.objectFetchRejection||!1;
a.featureToggles.disableXHRManager=a.featureToggles.disableXHRManager||!1;a.featureToggles.disableSendBeaconReporting=void 0===a.featureToggles.disableSendBeaconReporting||a.featureToggles.disableSendBeaconReporting;a.featureToggles.useCategoryNameInExternalConsentNotifications=void 0!==a.featureToggles.useCategoryNameInExternalConsentNotifications&&a.featureToggles.useCategoryNameInExternalConsentNotifications;ta.openModal=function(){throw!1===ka?Error("Ensighten API Error: No gateway environment found, the modal cannot work without it."):
Error("Ensighten API Error: You must first register your modal before you can call it. Use Bootstrapper.gateway.setOpenModal to register a function that opens your modal.");};ta.isEnabledConsentModal=function(P){return P&&P.hasOwnProperty("enableConsentModal")?P.enableConsentModal:a.featureToggles.enableConsentModal};const Ua={before:{},complete:{}},kb={before:{},complete:{}};eb={clientName:a.info.name,enableFiltering:a.featureToggles.enableFiltering};const Qa=P=>{let la=[];return P&&P.optVals&&(la=
Object.keys(P.optVals)),la},cb={getCookie:function(P){return I.getCookie(P)},setCookie:function(P,la,qa){return A(this,void 0,void 0,function*(){const va=I.getCookiesFromTypes([P]);yield I.setCookie(P,la,qa);const Ca=I.getCookiesFromTypes([P]);null!=V&&V.sendReport(va,Ca);ta&&ta.updateCheckboxes&&(ta.updateCheckboxes(T),ta.updateTagSlides&&ta.updateTagSlides(T,P,parseInt(la)));console.warn("The setCookie api is deprecated - use the setConsentStatus APIs instead")})},setCookies:function(P,la){return A(this,
void 0,void 0,function*(){var qa=[];for(var va in P)qa.push(va);va=I.getCookiesFromTypes(qa);yield I.setCookies(P,la);qa=I.getCookiesFromTypes(qa);if(null!=V&&V.sendReport(va,qa),ta&&ta.updateCheckboxes&&(ta.updateCheckboxes(T),ta.updateTagSlides))for(const Ca in P)ta.updateTagSlides(T,Ca,P[Ca]);console.warn("The setCookies api is deprecated - use the setConsentStatuses APIs instead")})},saveTcf:function(P,la,qa){return A(this,void 0,void 0,function*(){const va=I.getCookiesFromTypes([P]);yield I.setCookie(P,
la,qa);const Ca=I.getCookiesFromTypes([P]);null!=V&&V.sendReport(va,Ca);ta&&ta.updateCheckboxes&&(ta.updateCheckboxes(T),ta.updateTagSlides&&ta.updateTagSlides(T,P,parseInt(la)))})},getCookieTypes:function(){return a.cookieTypes},calculateCookieDomain:function(P,la,qa){return M.calculateCookieDomain(P,la,a.suffixOverrides,qa,a.featureToggles.enableOnlyTLDNetworkCalls)},setCookieDomain:function(P){I.setCookieDomain(P)},getCookieDomain:function(){return I.getCookieDomain()},setCookieDomainPath:function(P){I.setCookieDomainPath(P)},
getCookieDomainPath:function(){return I.getCookieDomainPath()},setCookieRetentionPeriod:P=>{I.setDefaultCookieRetentionPeriod(P)}};let lb=!0,Va=!1;if(function(){if(I=M.build(a.info.name,a.featureToggles.overridePublicSuffixEnabled,a.suffixOverrides,a.featureToggles.enableOnlyTLDNetworkCalls,a.getCookie,a.setCookie),ea=new tb(a.info.name),W=new B(document,a.environmentConfigs,a.defaultEnv,a.info.name,I,a.featureToggles.enableAsyncEnvironments,a.info.nexus,a.info.publishPath),!0===a.featureToggles.enableEnvironmentMatching&&
null==W.getActiveEnvironment())return void(lb=!1);var P=W.getActiveEnvironment();const la=Qa(P);m(P);W.registerEnvironmentChangeCallback(e);var qa=I.getCategoryMapFromCookieTypes(la);na=new c.ListProcessor(T,a,qa,ea.getAllowedTags(),ea.getBlockedTags());qa=null;const va={alwaysAllowedRegex:/a^/,filteredProtocols:[]};let Ca;!1===a.featureToggles.enableAllowedDomainsReporting&&(va.alwaysAllowedRegex=na.getAlwaysAllowedListRegex());va.filteredProtocols=ensClientConfig.filteredProtocols?ensClientConfig.filteredProtocols:
[];ha=new ib(window.Image,a.info.clientId,a.info.publishPath,a.featureToggles.enableFiltering,h(),a.featureToggles.enableReporting,a.featureToggles.enablePerformanceModeReporting,a.reportingOptions||{maxUrlSize:32E3,reportInterval:2500,requestCount:3},a.info.reporting||a.info.nexus,va,T,a.featureToggles.disableSendBeaconReporting,Ca?Ca.sendBeacon:null);ha.setCookies(r());p.utilities.domReady(function(){ha.sendBillingBeacon()});qa||(qa={enableFiltering:!1});db=new bb(Ua,ha);Ta=new bb(kb,ha);a.featureToggles.enableServiceWorker&&
"serviceWorker"in navigator&&(Ta=new bb(kb,ha),Ba=new vb(a,T,I.getCategoryMapFromCookieTypes(la),ea.getAllowedTags(),ea.getBlockedTags(),Ta),W.registerEnvironmentChangeCallback(()=>{const ya=W.getActiveEnvironment();var Ha=Qa(ya);Ha=I.getCategoryMapFromCookieTypes(Ha);Ba.updateServiceWorkerConfig(ya,Ha,ea.getAllowedTags(),ea.getBlockedTags())}));wa=new yb(a,T,db,na,Ba);W.registerEnvironmentChangeCallback(()=>{var ya=W.getActiveEnvironment();ya=Qa(ya);ya=I.getCategoryMapFromCookieTypes(ya);wa.updateListValues(ya,
ea.getAllowedTags(),ea.getBlockedTags())});T?(ka=!0,V=new ia(window.Image,T.name||"",a.libraryPackage,T.optVals,a.info.clientId,a.info.name,a.info.publishPath,c.utilities.isWhitelist(a,T)?"whitelist":"blacklist",a.cookieTypes,h(),a.featureToggles.enableReporting,I,a.info.reporting||a.info.nexus,a.onConsent,a.featureToggles.disableSendBeaconReporting,Ca?Ca.sendBeacon:null,a.featureToggles.useCategoryNameInExternalConsentNotifications),ea.setConsentReporter(V),c.utilities.getEnvironmentOverrideOrGlobalDefault(a.featureToggles,
T,"enableConsentModal")&&(x=new Ia(a,T,na,I,V,wa.updateListValues,Ma,ea,W),ta=x.getConsentModal()),f=new pb(V,wa.updateListValues,I,ea,a,T),c.utilities.getEnvironmentOverrideOrGlobalDefault(a.featureToggles,T,"enableTagKiller")&&new zb(V),c.utilities.getEnvironmentOverrideOrGlobalDefault(a.featureToggles,T,"enableDoNotSellModal")&&(O=new $a(I,wa.updateListValues,V,T,a,"doNotSellModal",f,Ma,ea,W)),c.utilities.getEnvironmentOverrideOrGlobalDefault(a.featureToggles,T,"enableRequestDataModal")&&(w=new $a(I,
wa.updateListValues,V,T,a,"requestDataModal",f,Ma,ea,W)),c.utilities.getEnvironmentOverrideOrGlobalDefault(a.featureToggles,T,"enableDeleteDataModal")&&(g=new $a(I,wa.updateListValues,V,T,a,"deleteDataModal",f,Ma,ea,W)),La=new Oa(na,a,T,ta,I,V,Ma,wa.updateListValues,ea,W),c.utilities.getEnvironmentOverrideOrGlobalDefault(a.featureToggles,T,"consentWidget")&&(n=new qb(W,T,a,Ma))):ka=!1;!1===a.featureToggles.disableXHRManager&&(new L(wa),new R(wa,a.featureToggles.objectFetchRejection),Ca=new k(a.info.nexus||
"nexus.ensighten.com",wa));za=new ub(a.featureToggles,T,wa);Ja=new sb(a.featureToggles,T,wa);P=c.utilities.getEnvironmentOverrideOrGlobalDefault(a.featureToggles,P,"removeAllIFrames")||c.utilities.getEnvironmentOverrideOrGlobalDefault(a.featureToggles,P,"removeIFrameOnBlock");!function(ya,Ha){function Fa(){c.utilities.each(Ab,function(Da){window["HTML"+Da+"Element"]&&window["HTML"+Da+"Element"].prototype?c.utilities.each(Wa,function(Ka){xa(window["HTML"+Da+"Element"].prototype,Ka)}):p.utilities.couldNotBind("HTML"+
Da+"Element")})}function xa(Da,Ka){if(!Da||!Da[Ka]||p.utilities.isFunctionOverridden(Da,Ka)||"[Interface prototype object]"==Da+"")return!1;const fb=Da[Ka],Db=function(){const Pa=Array.prototype.slice.call(arguments);try{let Ea=Pa[0];const Bb=Object.getPrototypeOf(Ea)===DocumentFragment.prototype;"string"==typeof Ea&&(Ea=Pa[1]);const Cb="string"==typeof this.tagName?this.tagName.toLowerCase():"",mb="string"==typeof Ea.tagName?Ea.tagName.toLowerCase():"";if(-1===sa.elementObserverTags.indexOf(Cb)&&
-1===sa.elementObserverTags.indexOf(mb)&&!Bb)return ya.getIsObservingStyle()&&(Ea=ya.processElement(Ka,Ea),Ea.__gateway=null),Function.prototype.apply.call(fb,this,Pa);if(Ha&&"iframe"===mb||(Ea=ya.processElement(Ka,Ea),Ea.__gateway=null,Ea))return Function.prototype.apply.call(fb,this,Pa)}catch(Ea){return Xa.consoleLog("Privacy Gateway Error",Ea),window.Bootstrapper&&"function"==typeof window.Bootstrapper.reportException&&window.Bootstrapper.reportException(Ea),Function.prototype.apply.call(fb,this,
Pa)}};try{Da[Ka]=Db,p.utilities.markFunctionOverridden(Da,Ka)}catch(Pa){console.log(Pa)}}const Xa=new fa,Ab="Anchor Area Body Button Canvas Div Form Frame Head Html IFrame Input Label LI Link Map Object OList Option Paragraph Pre Span Table TableCell TableCol TableRow TableSection Template UList Unknown".split(" ");var Na=["appendChild","insertBefore","replaceChild","removeChild"];const Wa=["append","prepend","removeChild"];if((document.insertAdjacentElement||window.Element&&Element.prototype.insertAdjacentElement||
window.HTMLElement&&HTMLElement.prototype.insertAdjacentElement)&&Wa.push("insertAdjacentElement"),window.Node&&window.Node.prototype&&window.Node.prototype.appendChild?c.utilities.each(Na,p.utilities.bind(xa,null,window.Node.prototype)):p.utilities.couldNotBind("Node"),window.Element&&window.Element.prototype&&window.Element.prototype.appendChild?c.utilities.each(Wa,p.utilities.bind(xa,null,window.Element.prototype)):p.utilities.couldNotBind("Element"),p.utilities.isNative(document.createElement("div").appendChild)){Na=
document.createElement("div");let Da=0;for(;!Object.prototype.hasOwnProperty.call(Na,"appendChild");)if(Na=Object.getPrototypeOf(Na),5<Da++){p.utilities.couldNotBind("div.appendChild");break}c.utilities.each(Wa,p.utilities.bind(xa,null,Na));Na=Na=Da=null}p.utilities.isNative(document.createElement("div").appendChild)&&Fa()}(wa,P);(function(ya){const Ha=document.write;document.write=function(){let Fa="";for(var xa=0;xa<arguments.length;xa++)Fa+=ya.processHTML("write",arguments[xa]);return Function.prototype.call.call(Ha,
document,Fa),Fa};p.utilities.isNative(document.write)})(wa);(function(ya){var Ha=document.writeln;document.writeln=function(){for(var Fa="",xa=0;xa<arguments.length;xa++)Fa+=ya.processHTML("writeln",arguments[xa]);return Function.prototype.call.call(Ha,document,Fa),Fa};p.utilities.isNative(document.writeln)})(wa);c.utilities.getEnvironmentOverrideOrGlobalDefault(a.featureToggles,T,"enableWindowOpenOverride")&&(ya=>{const Ha=window.open;window.open=(...Fa)=>{let xa=Fa[0];xa instanceof URL&&(xa=xa.toString());
null!=xa&&(ya.processURL(xa,"windowOpen","Window_Open_Called",p.utilities.getReferrer(),function(Xa){xa=Xa}),Fa[0]=xa);try{return Ha.apply(null,Fa)}catch(Xa){}}})(wa);p.utilities.unbound.script=document.all&&!document.addEventListener;Va=!0}(),!lb)return Va=!1,{isInitialized:Va};const Ya=function(){const P=W.getActiveEnvironment();var la=Qa(P);la=I.getCategoryMapFromCookieTypes(la);V.sendReport();wa.updateListValues(la,ea.getAllowedTags(),ea.getBlockedTags());Ba&&Ba.updateServiceWorkerConfig(P,la,
ea.getAllowedTags(),ea.getBlockedTags())};Ra=c.utilities.getEnvironmentOverrideOrGlobalDefault(a.featureToggles,T,"honorGlobalPrivacyControl");return null!=Ra&&Ra&&null!=navigator.globalPrivacyControl&&navigator.globalPrivacyControl&&function(){const P=c.utilities.getEnvironmentOverrideOrGlobalDefault(a,T,"globalPrivacyControlCategories");0===P.length?D("GPC"):u(P,"GPC")}(),ja.isInitialized=Va,ja.templateManager=Ma,ja.cookieModal=ta,ja.consentCookies=cb,ja.banner=La,ja.closeBanner=function(){try{La.closeEnsBanner()}catch(P){throw Error("Ensighten API error:  Your banner is not initialized in your client config "+
P);}},ja.environment=W.activeEnvironment,ja.environmentManager=W,ja.getLog=function(){const P=[{location:window.location.href||null},{cookie:document.cookie||null}];if(window.JSON){for(const la in Ua.complete)P.push({resource:Ua.complete[la].request});console&&console.dir&&console.dir(P);alert(JSON.stringify(P))}},ja.getList=function(){const P=na.getList();return ea.isLocalStorageSupported()&&(P.CUSTOM_ALLOW=ea.getAllowedTags(),P.CUSTOM_BLOCK=ea.getBlockedTags()),P},ja.getVersion=h,ja.getHistory=
()=>(new wb(db,Ta)).getHistory(),ja.history=Ua,ja.isWhitelist=function(){return c.utilities.isWhitelist(a,T)},ja.allowTag=function(P){return ea.allowTag(P),Ya(),P},ja.blockTag=function(P){return ea.blockTag(P),Ya(),P},ja.clearTags=function(){ea.clearTags();Ya()},ja.modal=ta,ja.sendCCPAEvent=function(P,la){try{f.sendCCPAEvent(P,la)}catch(qa){throw!1===ka?Error("Ensighten API Error: No gateway environment found, the modal cannot work without it."+qa):Error("Ensighten API error:  Your modal is not initialized in your client config "+
qa);}},ja.doNotSellModal=O,ja.openDoNotSellModal=function(){try{O.openModal()}catch(P){throw!1===ka?Error("Ensighten API Error: No gateway environment found, the do not sell modal cannot work without it."+P):Error("Ensighten API error: Your do not sell modal is not initialized in your client config "+P);}},ja.requestDataModal=w,ja.openRequestDataModal=function(){try{w.openModal()}catch(P){throw!1===ka?Error("Ensighten API Error: No gateway environment found, the request data modal cannot work without it."+
P):Error("Ensighten API error: Your request data modal is not initialized in your client config "+P);}},ja.deleteDataModal=g,ja.openDeleteDataModal=function(){try{g.openModal()}catch(P){throw!1===ka?Error("Ensighten API Error: No gateway environment found, the delete data modal cannot work without it."+P):Error("Ensighten API error: Your delete data modal is not initialized in your client config "+P);}},ja.openBanner=function(){try{La.openEnsBanner()}catch(P){throw!1===ka?Error("Ensighten API Error: No gateway environment found, the banner cannot work without it."+
P):Error("Ensighten API error:  Your banner is not initialized in your client config "+P);}},ja.openModal=function(){try{ta.openModal()}catch(P){throw!1===ka?Error("Ensighten API Error: No gateway environment found, the modal cannot work without it."+P):Error("Ensighten API error:  Your modal is not initialized in your client config "+P);}},ja.closeModal=function(){try{ta.closeModal()}catch(P){throw!1===ka?Error("Ensighten API Error: No gateway environment found, the modal cannot work without it."+
P):Error("Ensighten API error: Your modal is not initialized in your client config "+P);}},ja.options=eb,ja.reporter=ha,ja.resetEnvironment=()=>A(this,void 0,void 0,function*(){yield I.deleteCookie("LOCALE");W.setEnvironment();m(W.getActiveEnvironment())}),ja.setOpenModal=function(P){ta.openModal=P;a.featureToggles.enableConsentModal&&(P=document.getElementById("ensModalWrapper"),p.utilities.validateRemoveChild(P)&&P.parentElement.removeChild(P))},ja.setOpenBanner=function(P){La.customElementSet=
!0;La.openEnsBanner=P;P=document.getElementById("ensNotifyBanner");p.utilities.validateRemoveChild(P)&&P.parentElement.removeChild(P)},ja.getUserPreferences=()=>{const P=W.getActiveEnvironment();var la=Qa(P);la=I.getCategoryMapFromCookieTypes(la);for(const qa of Object.keys(la))null==la[qa]&&(la[qa]=P.optVals[qa].toString());return la},ja.getUserPreference=P=>{const la=W.getActiveEnvironment(),qa=I.getCookie(P);let va;return console.warn("The getUserPreference api is deprecated - use the getConsentStatus APIs instead"),
va=null!=qa?qa:la.optVals[P],va},ja.updatePreferences=Ya,ja.getPrivacyCookies=r,ja.enableCSSMonitoring=!0===a.featureToggles.enableCSSMonitoring,ja.monitorFormAction=!0===a.featureToggles.monitorFormAction,ja.monitorAnchorTags=!0===a.featureToggles.monitorAnchorTags,ja.blockAllCategories=D,ja.getServiceWorkerVersion=null==Ba?void 0:Ba.getServiceWorkerVersion,ja.enableBotAndFraudProtectionReason=a.enableBotAndFraudProtectionReason,ja.getSuffix=H.getSuffix,ja.calculateCookieDomain=M.calculateCookieDomain,
ja.addCustomReportingEvent=function(P){return V.addCustomEvent(P)},ja.registerConsentChangeCallback=ta.constructor.registerConsentChangeCallback,ja}},514:(da,aa,ca)=>{ca.r(aa);ca.d(aa,{utilities:()=>A});const A=new class{constructor(){this.overriddenFunctionProperty="ensOverriddenFunctions";this.unbound={};this.watcher={enumerable:!1,configurable:!0,writable:!0,value:function(t,S){let E=this[t],v=E;const C=function(){if("function"==typeof this.getAttribute){const L=this.getAttribute(t);L&&(v=L)}return v},
q=function(L){return E=v,v=S.call(this,t,E,L),this.setAttribute&&this.setAttribute(t,v,!0),v};delete this[t]&&Object.defineProperty(this,t,{get:C,set:q,enumerable:!0,configurable:!0})}}}addStyleElement(t){const S=document.head||document.getElementsByTagName("head")[0],E=document.createElement("style");E.type="text/css";E.appendChild(document.createTextNode(t));S.appendChild(E)}apiToSource(t){return t.toUpperCase()+"_MANAGER"}couldNotBind(t){this.unbound[t]=!0}bind(t,S,E){return E=Array.prototype.slice.call(arguments),
t=E.shift(),S=E.shift(),function(){return t.apply(S,E.concat(Array.prototype.slice.call(arguments)))}}cookieNameToCookieType(t,S){return S.replace(t.toUpperCase()+"_ENSIGHTEN_PRIVACY_","")}getReferrer(){return window.location.toString()}domReady(t){let S=!1;const E=function(){S||"function"!=typeof document.addEventListener&&"load"!==event.type&&"complete"!==document.readyState||(S=!0,"function"==typeof document.addEventListener&&(document.removeEventListener("DOMContentLoaded",E),window.removeEventListener("load",
E)),t())};"complete"===document.readyState?t():(document.addEventListener("DOMContentLoaded",E),window.addEventListener("load",E))}getCookieTLD(){return"ac ad co ed go gr lg ne or com co org edu info gov net mod nhs plc sch ltd".split(" ")}getCookieSLD(){return"af ax al dz as ad ao ai aq ag ar am aw au at az bh bs bd bb by be bz bj bm bt bo bq ba bw bv br io bn bg bf bi kh cm ca cv ky cf td cl cn cx cc co km cg cd ck cr ci hr cu cw cy cz dk dj dm do ec eg sv gq er ee et fk fo fj fi fr gf pf tf ga gm ge de gh gi gr gl gd gp gu gt gg gn gw gy ht hm va hn hk hu is in id ir iq ie im il it jm jp je jo kz ke ki kp kr kw kg la lv lb ls lr ly li lt lu mo mk mg mw my mv ml mt mh mq mr mu yt mx fm md mc mn me ms ma mz mm na nr np nl nc nz ni ne ng nu nf mp no om pk pw ps pa pg py pe ph pn pl pt pr qa ro ru rw bl sh kn lc mf pm vc ws sm st sa sn rs sc sl sg sx sk si sb so za gs ss es lk sd sr sj sz se ch sy tw tj tz th tl tg tk to tt tn tr tm tc tv ug ua uk ae gb us um uy uz vu ve vn vg vi wf eh ye zm zw".split(" ")}getBrowserLocale(){let t=
window.navigator.userLanguage||window.navigator.language;return t?(t=t.split("-"),t=t[0]&&t[1]?t[0]+"-"+t[1].toUpperCase():t[0]):t="en",t}getFunctionString(t){return!t||"function"!=typeof t&&"object"!=typeof t?"":t+""}getUrlParamVal(t){const S={},E=window.location.href.slice(window.location.href.indexOf("?")+1).split("\x26");for(let C=0;C<E.length;C++){var v=E[C].split("\x3d");S[v[0]]=v[1]}v="";return S[t]&&(v=S[t]),v}isMobileSafari(){const t=window.navigator.userAgent,S=!!t.match(/iP(ad|od|hone)/i),
E=!!t.match(/WebKit/i);return S&&E&&!t.match(/CriOS/i)}isSafari(){return window.navigator&&-1<window.navigator.userAgent.toLowerCase().indexOf("safari")&&-1===window.navigator.userAgent.toLowerCase().indexOf("chromium/")&&-1===window.navigator.userAgent.toLowerCase().indexOf("chrome/")}isChrome(){return window.navigator&&-1<window.navigator.userAgent.toLowerCase().indexOf("chrome")}isIE(){return"ActiveXObject"in window}isNative(t){let S=RegExp("function\\s+.+?\\(\\s*\\)\\s*{\\s*\\[native code\\]\\s*}"),
E=RegExp("function\\s+.+?\\(\\s*\\)\\s*{\\s*\\/\\*\\s*source code not available\\s*\\*\\/\\s*}");t=this.getFunctionString(t);return S.test(t)||E.test(t)}validateRemoveChild(t){return t instanceof Node&&t.parentNode instanceof Node&&null!=document.body&&document.body.contains(t)}isFunctionOverridden(t,S){return t.hasOwnProperty(this.overriddenFunctionProperty)&&t[this.overriddenFunctionProperty][S]}handleTrustedHTML(t,S){if(null==t)return t;const E=""+t.toString();S=S(E);return S.toString()===E?t:
S}markFunctionOverridden(t,S){t.hasOwnProperty(this.overriddenFunctionProperty)||(t[this.overriddenFunctionProperty]={});t[this.overriddenFunctionProperty][S]=!0}}},150:(da,aa,ca)=>{function A(S,E,v,C,q,L){var R=q;L-=q;q=0;if(2113929216<=S.length)throw Error("input too large");if(12<S.length){var k=aa.compressBound(S.length);if(L<k)throw Error("output too small: "+L+" \x3c "+k);L=67;for(k=S.length-12;v+4<k;){var H=S[v+1]<<8|S[v],M=S[v+3]<<8|S[v+2],p=Math.imul(H|M<<16,2654435761)>>>16,B=C[p]-1;if(C[p]=
v+1,0>B||0<v-B>>>16||(S[B+3]<<8|S[B+2])!=M||(S[B+1]<<8|S[B])!=H)v+=L++>>6;else{L=67;H=v-q;M=v-B;B+=4;for(p=v+=4;v<k&&S[v]==S[B];)v++,B++;B=15>(p=v-p)?p:15;if(15<=H){E[R++]=240+B;for(B=H-15;254<B;B-=255)E[R++]=255;E[R++]=B}else E[R++]=(H<<4)+B;for(B=0;B<H;B++)E[R++]=S[q+B];if(E[R++]=M,E[R++]=M>>8,15<=p){for(p-=15;255<=p;)p-=255,E[R++]=255;E[R++]=p}q=v}}}if(0==q)return 0;if(15<=(H=S.length-q)){E[R++]=240;for(v=H-15;254<v;v-=255)E[R++]=255;E[R++]=v}else E[R++]=H<<4;for(v=q;v<S.length;)E[R++]=S[v++];
return R}var t=ca(134).h32;aa.descriptorChecksum=function(S){return t(S,0).toNumber()>>8&255};aa.blockChecksum=function(S){return t(S,0).toNumber()};aa.streamChecksum=function(S,E){return null===S?E.digest().toNumber():(null===E&&(E=t(0)),E.update(S))};aa.readUInt32LE=function(S,E){return(S[E]|S[E+1]<<8|S[E+2]<<16|S[E+3]<<24)>>>0};ca(898).UINT32;Math.imul||(Math.imul=function(S,E){var v=65535&S,C=65535&E;return v*C+((S>>>16)*C+v*(E>>>16)<<16)|0});aa.uncompress=function(S,E,v,C){var q=v=v||0;v=C||
S.length-v;for(C=0;q<v;){var L=S[q++],R=L>>4;if(0<R){for(var k=R+240;255===k;)R+=k=S[q++];for(k=q+R;q<k;)E[C++]=S[q++];if(q===v)break}R=S[q++]|S[q++]<<8;if(0===R||R>C)return-(q-2);L&=15;for(k=L+240;255===k;)L+=k=S[q++];R=C-R;for(k=C+L+4;C<k;)E[C++]=E[R++]}return C};aa.compressBound=function(S){return 2113929216<S?0:S+S/255+16|0};aa.compress=function(S,E,v,C){for(var q=Array(65536),L=0;65536>L;L++)q[L]=0;return A(S,E,0,q,v||0,C||E.length)};aa.compressHC=aa.compress;aa.compressDependent=A},897:(da,
aa,ca)=>{da.exports=ca(813)},813:(da,aa,ca)=>{da=ca(287).hp;aa.ZM=407708164;void 0===da&&(ca.g.Buffer=ca(287).hp);ca.g.Buffer=da;aa.Cw=da.alloc(4);aa.Cw.writeUInt32LE(aa.ZM,0,!1);aa.UW=0;aa.B_=da.alloc(4);aa.B_.writeUInt32LE(aa.UW,0,!1);aa.utils=ca(150)},526:(da,aa)=>{function ca(E){var v=E.length;if(0<v%4)throw Error("Invalid string. Length must be a multiple of 4");E=E.indexOf("\x3d");return-1===E&&(E=v),[E,E===v?0:4-E%4]}aa.byteLength=function(E){E=ca(E);var v=E[1];return 3*(E[0]+v)/4-v};aa.toByteArray=
function(E){var v=ca(E);var C=v[0];v=v[1];var q=new S(3*(C+v)/4-v),L=0,R=0<v?C-4:C;for(C=0;C<R;C+=4){var k=t[E.charCodeAt(C)]<<18|t[E.charCodeAt(C+1)]<<12|t[E.charCodeAt(C+2)]<<6|t[E.charCodeAt(C+3)];q[L++]=k>>16&255;q[L++]=k>>8&255;q[L++]=255&k}2===v&&(k=t[E.charCodeAt(C)]<<2|t[E.charCodeAt(C+1)]>>4,q[L++]=255&k);1===v&&(k=t[E.charCodeAt(C)]<<10|t[E.charCodeAt(C+1)]<<4|t[E.charCodeAt(C+2)]>>2,q[L++]=k>>8&255,q[L++]=255&k);return q};aa.fromByteArray=function(E){for(var v,C=E.length,q=C%3,L=[],R=0,
k=C-q;R<k;R+=16383){var H=L,M=H.push;var p=void 0;for(var B,K=E,Q=R+16383>k?k:R+16383,fa=[],oa=R;oa<Q;oa+=3)B=(K[oa]<<16&16711680)+(K[oa+1]<<8&65280)+(255&K[oa+2]),fa.push(A[(p=B)>>18&63]+A[p>>12&63]+A[p>>6&63]+A[63&p]);p=fa.join("");M.call(H,p)}1===q?(v=E[C-1],L.push(A[v>>2]+A[v<<4&63]+"\x3d\x3d")):2===q&&(v=(E[C-2]<<8)+E[C-1],L.push(A[v>>10]+A[v>>4&63]+A[v<<2&63]+"\x3d"));return L.join("")};var A=[],t=[],S="undefined"!=typeof Uint8Array?Uint8Array:Array;for(da=0;64>da;++da)A[da]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[da],
t["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(da)]=da;t[45]=62;t[95]=63},788:(da,aa,ca)=>{function A(C,q){return void 0===q&&(q="utf8"),E.isBuffer(C)?S(C.toString("base64")):S(E.from(C,q).toString("base64"))}function t(C){return C=C.toString(),v.default(C).replace(/\-/g,"+").replace(/_/g,"/")}function S(C){return C.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var E=ca(287).hp,v=ca(931);A.encode=A;A.decode=function(C,q){return void 0===q&&(q="utf8"),E.from(t(C),
"base64").toString(q)};A.toBase64=t;A.fromBase64=S;A.toBuffer=function(C){return E.from(t(C),"base64")};aa.default=A},931:(da,aa,ca)=>{var A=ca(287).hp;Object.defineProperty(aa,"__esModule",{value:!0});aa.default=function(t){var S=t.length,E=S%4;if(!E)return t;var v=S;E=4-E;S=A.alloc(S+E);for(S.write(t);E--;)S.write("\x3d",v++);return S.toString()}},711:(da,aa,ca)=>{da.exports=ca(788).default;da.exports.default=da.exports},287:(da,aa,ca)=>{function A(b){if(b>U)throw new RangeError('The value "'+b+
'" is invalid for option "size"');b=new Uint8Array(b);return Object.setPrototypeOf(b,t.prototype),b}function t(b,d,l){if("number"==typeof b){if("string"==typeof d)throw new TypeError('The "string" argument must be of type string. Received type number');return v(b)}return S(b,d,l)}function S(b,d,l){if("string"==typeof b)return function(N,Z){"string"==typeof Z&&""!==Z||(Z="utf8");if(!t.isEncoding(Z))throw new TypeError("Unknown encoding: "+Z);var pa=0|R(N,Z),ra=A(pa);N=ra.write(N,Z);N!==pa&&(ra=ra.slice(0,
N));return ra}(b,d);if(ArrayBuffer.isView(b))return function(N){return z(N,Uint8Array)?(N=new Uint8Array(N),q(N.buffer,N.byteOffset,N.byteLength)):C(N)}(b);if(null==b)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof b);if(z(b,ArrayBuffer)||b&&z(b.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(z(b,SharedArrayBuffer)||b&&z(b.buffer,SharedArrayBuffer)))return q(b,d,l);if("number"==typeof b)throw new TypeError('The "value" argument must not be of type number. Received type number');
var y=b.valueOf&&b.valueOf();if(null!=y&&y!==b)return t.from(y,d,l);if(y=function(N){if(t.isBuffer(N)){var Z=0|L(N.length),pa=A(Z);return 0===pa.length||N.copy(pa,0,0,Z),pa}if(void 0!==N.length)return(Z="number"!=typeof N.length)||(Z=N.length,Z=Z!=Z),Z?A(0):C(N);if("Buffer"===N.type&&Array.isArray(N.data))return C(N.data)}(b))return y;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof b[Symbol.toPrimitive])return t.from(b[Symbol.toPrimitive]("string"),d,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof b);}function E(b){if("number"!=typeof b)throw new TypeError('"size" argument must be of type number');if(0>b)throw new RangeError('The value "'+b+'" is invalid for option "size"');}function v(b){return E(b),A(0>b?0:0|L(b))}function C(b){for(var d=0>b.length?0:0|L(b.length),l=A(d),y=0;y<d;y+=1)l[y]=255&b[y];return l}function q(b,d,l){if(0>d||b.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(b.byteLength<d+(l||0))throw new RangeError('"length" is outside of buffer bounds');
var y;return y=void 0===d&&void 0===l?new Uint8Array(b):void 0===l?new Uint8Array(b,d):new Uint8Array(b,d,l),Object.setPrototypeOf(y,t.prototype),y}function L(b){if(b>=U)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+U.toString(16)+" bytes");return 0|b}function R(b,d){if(t.isBuffer(b))return b.length;if(ArrayBuffer.isView(b)||z(b,ArrayBuffer))return b.byteLength;if("string"!=typeof b)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+
typeof b);var l=b.length,y=2<arguments.length&&!0===arguments[2];if(!y&&0===l)return 0;for(var N=!1;;)switch(d){case "ascii":case "latin1":case "binary":return l;case "utf8":case "utf-8":return ia(b).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*l;case "hex":return l>>>1;case "base64":return Y(b).length;default:if(N)return y?-1:ia(b).length;d=(""+d).toLowerCase();N=!0}}function k(b,d,l){var y=!1;if(((void 0===d||0>d)&&(d=0),d>this.length)||((void 0===l||l>this.length)&&(l=
this.length),0>=l)||(l>>>=0)<=(d>>>=0))return"";for(b||(b="utf8");;)switch(b){case "hex":b=this.length;(!d||0>d)&&(d=0);(!l||0>l||l>b)&&(l=b);for(b="";d<l;++d)b+=ua[this[d]];return b;case "utf8":case "utf-8":return B(this,d,l);case "ascii":b="";for(l=Math.min(this.length,l);d<l;++d)b+=String.fromCharCode(127&this[d]);return b;case "latin1":case "binary":b="";for(l=Math.min(this.length,l);d<l;++d)b+=String.fromCharCode(this[d]);return b;case "base64":return 0===d&&l===this.length?J.fromByteArray(this):
J.fromByteArray(this.slice(d,l));case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=this.slice(d,l);l="";for(b=0;b<d.length-1;b+=2)l+=String.fromCharCode(d[b]+256*d[b+1]);return l;default:if(y)throw new TypeError("Unknown encoding: "+b);b=(b+"").toLowerCase();y=!0}}function H(b,d,l){var y=b[d];b[d]=b[l];b[l]=y}function M(b,d,l,y,N){if(0===b.length)return-1;"string"==typeof l?(y=l,l=0):2147483647<l?l=2147483647:-2147483648>l&&(l=-2147483648);var Z=l=+l;if(Z!=Z&&(l=N?0:b.length-1),0>l&&(l=b.length+
l),l>=b.length){if(N)return-1;l=b.length-1}else if(0>l){if(!N)return-1;l=0}if("string"==typeof d&&(d=t.from(d,y)),t.isBuffer(d))return 0===d.length?-1:p(b,d,l,y,N);if("number"==typeof d)return d&=255,"function"==typeof Uint8Array.prototype.indexOf?N?Uint8Array.prototype.indexOf.call(b,d,l):Uint8Array.prototype.lastIndexOf.call(b,d,l):p(b,[d],l,y,N);throw new TypeError("val must be string, number or Buffer");}function p(b,d,l,y,N){function Z(Ia,Oa){return 1===pa?Ia[Oa]:Ia.readUInt16BE(Oa*pa)}var pa=
1,ra=b.length,Ga=d.length;if(void 0!==y&&("ucs2"===(y=String(y).toLowerCase())||"ucs-2"===y||"utf16le"===y||"utf-16le"===y)){if(2>b.length||2>d.length)return-1;pa=2;ra/=2;Ga/=2;l/=2}if(N)for(y=-1;l<ra;l++)if(Z(b,l)===Z(d,-1===y?0:l-y)){if(-1===y&&(y=l),l-y+1===Ga)return y*pa}else-1!==y&&(l-=l-y),y=-1;else for(l+Ga>ra&&(l=ra-Ga);0<=l;l--){ra=!0;for(y=0;y<Ga;y++)if(Z(b,l+y)!==Z(d,y)){ra=!1;break}if(ra)return l}return-1}function B(b,d,l){l=Math.min(b.length,l);for(var y=[];d<l;){var N,Z,pa=b[d],ra=null,
Ga=239<pa?4:223<pa?3:191<pa?2:1;if(d+Ga<=l)switch(Ga){case 1:128>pa&&(ra=pa);break;case 2:128==(192&(N=b[d+1]))&&127<(Z=(31&pa)<<6|63&N)&&(ra=Z);break;case 3:N=b[d+1];var Ia=b[d+2];128==(192&N)&&128==(192&Ia)&&2047<(Z=(15&pa)<<12|(63&N)<<6|63&Ia)&&(55296>Z||57343<Z)&&(ra=Z);break;case 4:N=b[d+1];Ia=b[d+2];var Oa=b[d+3];128==(192&N)&&128==(192&Ia)&&128==(192&Oa)&&65535<(Z=(15&pa)<<18|(63&N)<<12|(63&Ia)<<6|63&Oa)&&1114112>Z&&(ra=Z)}null===ra?(ra=65533,Ga=1):65535<ra&&(ra-=65536,y.push(ra>>>10&1023|
55296),ra=56320|1023&ra);y.push(ra);d+=Ga}b=y.length;if(b<=X)y=String.fromCharCode.apply(String,y);else{l="";for(N=0;N<b;)l+=String.fromCharCode.apply(String,y.slice(N,N+=X));y=l}return y}function K(b,d,l){if(0!=b%1||0>b)throw new RangeError("offset is not uint");if(b+d>l)throw new RangeError("Trying to access beyond buffer length");}function Q(b,d,l,y,N,Z){if(!t.isBuffer(b))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>N||d<Z)throw new RangeError('"value" argument is out of bounds');
if(l+y>b.length)throw new RangeError("Index out of range");}function fa(b,d,l,y,N,Z){if(l+y>b.length)throw new RangeError("Index out of range");if(0>l)throw new RangeError("Index out of range");}function oa(b,d,l,y,N){return d=+d,l>>>=0,N||fa(b,0,l,4),F.write(b,d,l,y,23,4),l+4}function ba(b,d,l,y,N){return d=+d,l>>>=0,N||fa(b,0,l,8),F.write(b,d,l,y,52,8),l+8}function ia(b,d){var l;d=d||1/0;for(var y=b.length,N=null,Z=[],pa=0;pa<y;++pa){if(55295<(l=b.charCodeAt(pa))&&57344>l){if(!N){if(56319<l){-1<
(d-=3)&&Z.push(239,191,189);continue}if(pa+1===y){-1<(d-=3)&&Z.push(239,191,189);continue}N=l;continue}if(56320>l){-1<(d-=3)&&Z.push(239,191,189);N=l;continue}l=65536+(N-55296<<10|l-56320)}else N&&-1<(d-=3)&&Z.push(239,191,189);if(N=null,128>l){if(0>--d)break;Z.push(l)}else if(2048>l){if(0>(d-=2))break;Z.push(l>>6|192,63&l|128)}else if(65536>l){if(0>(d-=3))break;Z.push(l>>12|224,l>>6&63|128,63&l|128)}else{if(!(1114112>l))throw Error("Invalid code point");if(0>(d-=4))break;Z.push(l>>18|240,l>>12&63|
128,l>>6&63|128,63&l|128)}}return Z}function Y(b){var d=J,l=d.toByteArray;if(2>(b=(b=b.split("\x3d")[0]).trim().replace(ma,"")).length)b="";else for(;0!=b.length%4;)b+="\x3d";return l.call(d,b)}function c(b,d,l,y){for(var N=0;N<y&&!(N+l>=d.length||N>=b.length);++N)d[N+l]=b[N];return N}function z(b,d){return b instanceof d||null!=b&&null!=b.constructor&&null!=b.constructor.name&&b.constructor.name===d.name}var J=ca(526),F=ca(251);da="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):
null;aa.hp=t;aa.IS=50;var U=2147483647;t.TYPED_ARRAY_SUPPORT=function(){try{var b=new Uint8Array(1),d={foo:function(){return 42}};return Object.setPrototypeOf(d,Uint8Array.prototype),Object.setPrototypeOf(b,d),42===b.foo()}catch(l){return!1}}();t.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(t.prototype,
"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}});Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}});t.poolSize=8192;t.from=function(b,d,l){return S(b,d,l)};Object.setPrototypeOf(t.prototype,Uint8Array.prototype);Object.setPrototypeOf(t,Uint8Array);t.alloc=function(b,d,l){return E(b),0>=b?A(b):void 0!==d?"string"==typeof l?A(b).fill(d,l):A(b).fill(d):A(b)};t.allocUnsafe=function(b){return v(b)};t.allocUnsafeSlow=
function(b){return v(b)};t.isBuffer=function(b){return null!=b&&!0===b._isBuffer&&b!==t.prototype};t.compare=function(b,d){if(z(b,Uint8Array)&&(b=t.from(b,b.offset,b.byteLength)),z(d,Uint8Array)&&(d=t.from(d,d.offset,d.byteLength)),!t.isBuffer(b)||!t.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(b===d)return 0;for(var l=b.length,y=d.length,N=0,Z=Math.min(l,y);N<Z;++N)if(b[N]!==d[N]){l=b[N];y=d[N];break}return l<y?-1:y<l?1:0};t.isEncoding=
function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};t.concat=function(b,d){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return t.alloc(0);var l;if(void 0===d)for(l=d=0;l<b.length;++l)d+=b[l].length;d=t.allocUnsafe(d);var y=0;for(l=0;l<b.length;++l){var N=b[l];if(z(N,Uint8Array))y+
N.length>d.length?t.from(N).copy(d,y):Uint8Array.prototype.set.call(d,N,y);else{if(!t.isBuffer(N))throw new TypeError('"list" argument must be an Array of Buffers');N.copy(d,y)}y+=N.length}return d};t.byteLength=R;t.prototype._isBuffer=!0;t.prototype.swap16=function(){var b=this.length;if(0!=b%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var d=0;d<b;d+=2)H(this,d,d+1);return this};t.prototype.swap32=function(){var b=this.length;if(0!=b%4)throw new RangeError("Buffer size must be a multiple of 32-bits");
for(var d=0;d<b;d+=4)H(this,d,d+3),H(this,d+1,d+2);return this};t.prototype.swap64=function(){var b=this.length;if(0!=b%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var d=0;d<b;d+=8)H(this,d,d+7),H(this,d+1,d+6),H(this,d+2,d+5),H(this,d+3,d+4);return this};t.prototype.toString=function(){var b=this.length;return 0===b?"":0===arguments.length?B(this,0,b):k.apply(this,arguments)};t.prototype.toLocaleString=t.prototype.toString;t.prototype.equals=function(b){if(!t.isBuffer(b))throw new TypeError("Argument must be a Buffer");
return this===b||0===t.compare(this,b)};t.prototype.inspect=function(){var b="",d=aa.IS;return b=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim(),this.length>d&&(b+=" ... "),"\x3cBuffer "+b+"\x3e"};da&&(t.prototype[da]=t.prototype.inspect);t.prototype.compare=function(b,d,l,y,N){if(z(b,Uint8Array)&&(b=t.from(b,b.offset,b.byteLength)),!t.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof b);if(void 0===d&&(d=0),void 0===l&&
(l=b?b.length:0),void 0===y&&(y=0),void 0===N&&(N=this.length),0>d||l>b.length||0>y||N>this.length)throw new RangeError("out of range index");if(y>=N&&d>=l)return 0;if(y>=N)return-1;if(d>=l)return 1;if(this===b)return 0;var Z=(N>>>=0)-(y>>>=0),pa=(l>>>=0)-(d>>>=0),ra=Math.min(Z,pa);y=this.slice(y,N);b=b.slice(d,l);for(d=0;d<ra;++d)if(y[d]!==b[d]){Z=y[d];pa=b[d];break}return Z<pa?-1:pa<Z?1:0};t.prototype.includes=function(b,d,l){return-1!==this.indexOf(b,d,l)};t.prototype.indexOf=function(b,d,l){return M(this,
b,d,l,!0)};t.prototype.lastIndexOf=function(b,d,l){return M(this,b,d,l,!1)};t.prototype.write=function(b,d,l,y){if(void 0===d)y="utf8",l=this.length,d=0;else if(void 0===l&&"string"==typeof d)y=d,l=this.length,d=0;else{if(!isFinite(d))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");d>>>=0;isFinite(l)?(l>>>=0,void 0===y&&(y="utf8")):(y=l,l=void 0)}var N=this.length-d;if((void 0===l||l>N)&&(l=N),0<b.length&&(0>l||0>d)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");
y||(y="utf8");for(N=!1;;)switch(y){case "hex":a:{d=Number(d)||0;y=this.length-d;l?(l=Number(l))>y&&(l=y):l=y;y=b.length;l>y/2&&(l=y/2);for(y=0;y<l;++y){N=parseInt(b.substr(2*y,2),16);if(N!=N){l=y;break a}this[d+y]=N}l=y}return l;case "utf8":case "utf-8":return c(ia(b,this.length-d),this,d,l);case "ascii":case "latin1":case "binary":y=[];for(N=0;N<b.length;++N)y.push(255&b.charCodeAt(N));return c(y,this,d,l);case "base64":return c(Y(b),this,d,l);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":var Z;
y=l;N=this.length-d;for(var pa=[],ra=0;ra<b.length&&!(0>(N-=2));++ra)l=(Z=b.charCodeAt(ra))>>8,Z%=256,pa.push(Z),pa.push(l);return c(pa,this,d,y);default:if(N)throw new TypeError("Unknown encoding: "+y);y=(""+y).toLowerCase();N=!0}};t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var X=4096;t.prototype.slice=function(b,d){var l=this.length;0>(b=~~b)?0>(b+=l)&&(b=0):b>l&&(b=l);0>(d=void 0===d?l:~~d)?0>(d+=l)&&(d=0):d>l&&(d=l);d<b&&(d=b);b=this.subarray(b,
d);return Object.setPrototypeOf(b,t.prototype),b};t.prototype.readUintLE=t.prototype.readUIntLE=function(b,d,l){b>>>=0;d>>>=0;l||K(b,d,this.length);l=this[b];for(var y=1,N=0;++N<d&&(y*=256);)l+=this[b+N]*y;return l};t.prototype.readUintBE=t.prototype.readUIntBE=function(b,d,l){b>>>=0;d>>>=0;l||K(b,d,this.length);l=this[b+--d];for(var y=1;0<d&&(y*=256);)l+=this[b+--d]*y;return l};t.prototype.readUint8=t.prototype.readUInt8=function(b,d){return b>>>=0,d||K(b,1,this.length),this[b]};t.prototype.readUint16LE=
t.prototype.readUInt16LE=function(b,d){return b>>>=0,d||K(b,2,this.length),this[b]|this[b+1]<<8};t.prototype.readUint16BE=t.prototype.readUInt16BE=function(b,d){return b>>>=0,d||K(b,2,this.length),this[b]<<8|this[b+1]};t.prototype.readUint32LE=t.prototype.readUInt32LE=function(b,d){return b>>>=0,d||K(b,4,this.length),(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};t.prototype.readUint32BE=t.prototype.readUInt32BE=function(b,d){return b>>>=0,d||K(b,4,this.length),16777216*this[b]+(this[b+
1]<<16|this[b+2]<<8|this[b+3])};t.prototype.readIntLE=function(b,d,l){b>>>=0;d>>>=0;l||K(b,d,this.length);l=this[b];for(var y=1,N=0;++N<d&&(y*=256);)l+=this[b+N]*y;return l>=128*y&&(l-=Math.pow(2,8*d)),l};t.prototype.readIntBE=function(b,d,l){b>>>=0;d>>>=0;l||K(b,d,this.length);l=d;for(var y=1,N=this[b+--l];0<l&&(y*=256);)N+=this[b+--l]*y;return N>=128*y&&(N-=Math.pow(2,8*d)),N};t.prototype.readInt8=function(b,d){return b>>>=0,d||K(b,1,this.length),128&this[b]?-1*(255-this[b]+1):this[b]};t.prototype.readInt16LE=
function(b,d){b>>>=0;d||K(b,2,this.length);b=this[b]|this[b+1]<<8;return 32768&b?4294901760|b:b};t.prototype.readInt16BE=function(b,d){b>>>=0;d||K(b,2,this.length);b=this[b+1]|this[b]<<8;return 32768&b?4294901760|b:b};t.prototype.readInt32LE=function(b,d){return b>>>=0,d||K(b,4,this.length),this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};t.prototype.readInt32BE=function(b,d){return b>>>=0,d||K(b,4,this.length),this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};t.prototype.readFloatLE=function(b,
d){return b>>>=0,d||K(b,4,this.length),F.read(this,b,!0,23,4)};t.prototype.readFloatBE=function(b,d){return b>>>=0,d||K(b,4,this.length),F.read(this,b,!1,23,4)};t.prototype.readDoubleLE=function(b,d){return b>>>=0,d||K(b,8,this.length),F.read(this,b,!0,52,8)};t.prototype.readDoubleBE=function(b,d){return b>>>=0,d||K(b,8,this.length),F.read(this,b,!1,52,8)};t.prototype.writeUintLE=t.prototype.writeUIntLE=function(b,d,l,y){(b=+b,d>>>=0,l>>>=0,y)||Q(this,b,d,l,Math.pow(2,8*l)-1,0);y=1;var N=0;for(this[d]=
255&b;++N<l&&(y*=256);)this[d+N]=b/y&255;return d+l};t.prototype.writeUintBE=t.prototype.writeUIntBE=function(b,d,l,y){(b=+b,d>>>=0,l>>>=0,y)||Q(this,b,d,l,Math.pow(2,8*l)-1,0);y=l-1;var N=1;for(this[d+y]=255&b;0<=--y&&(N*=256);)this[d+y]=b/N&255;return d+l};t.prototype.writeUint8=t.prototype.writeUInt8=function(b,d,l){return b=+b,d>>>=0,l||Q(this,b,d,1,255,0),this[d]=255&b,d+1};t.prototype.writeUint16LE=t.prototype.writeUInt16LE=function(b,d,l){return b=+b,d>>>=0,l||Q(this,b,d,2,65535,0),this[d]=
255&b,this[d+1]=b>>>8,d+2};t.prototype.writeUint16BE=t.prototype.writeUInt16BE=function(b,d,l){return b=+b,d>>>=0,l||Q(this,b,d,2,65535,0),this[d]=b>>>8,this[d+1]=255&b,d+2};t.prototype.writeUint32LE=t.prototype.writeUInt32LE=function(b,d,l){return b=+b,d>>>=0,l||Q(this,b,d,4,4294967295,0),this[d+3]=b>>>24,this[d+2]=b>>>16,this[d+1]=b>>>8,this[d]=255&b,d+4};t.prototype.writeUint32BE=t.prototype.writeUInt32BE=function(b,d,l){return b=+b,d>>>=0,l||Q(this,b,d,4,4294967295,0),this[d]=b>>>24,this[d+1]=
b>>>16,this[d+2]=b>>>8,this[d+3]=255&b,d+4};t.prototype.writeIntLE=function(b,d,l,y){(b=+b,d>>>=0,y)||(y=Math.pow(2,8*l-1),Q(this,b,d,l,y-1,-y));y=0;var N=1,Z=0;for(this[d]=255&b;++y<l&&(N*=256);)0>b&&0===Z&&0!==this[d+y-1]&&(Z=1),this[d+y]=(b/N|0)-Z&255;return d+l};t.prototype.writeIntBE=function(b,d,l,y){(b=+b,d>>>=0,y)||(y=Math.pow(2,8*l-1),Q(this,b,d,l,y-1,-y));y=l-1;var N=1,Z=0;for(this[d+y]=255&b;0<=--y&&(N*=256);)0>b&&0===Z&&0!==this[d+y+1]&&(Z=1),this[d+y]=(b/N|0)-Z&255;return d+l};t.prototype.writeInt8=
function(b,d,l){return b=+b,d>>>=0,l||Q(this,b,d,1,127,-128),0>b&&(b=255+b+1),this[d]=255&b,d+1};t.prototype.writeInt16LE=function(b,d,l){return b=+b,d>>>=0,l||Q(this,b,d,2,32767,-32768),this[d]=255&b,this[d+1]=b>>>8,d+2};t.prototype.writeInt16BE=function(b,d,l){return b=+b,d>>>=0,l||Q(this,b,d,2,32767,-32768),this[d]=b>>>8,this[d+1]=255&b,d+2};t.prototype.writeInt32LE=function(b,d,l){return b=+b,d>>>=0,l||Q(this,b,d,4,2147483647,-2147483648),this[d]=255&b,this[d+1]=b>>>8,this[d+2]=b>>>16,this[d+
3]=b>>>24,d+4};t.prototype.writeInt32BE=function(b,d,l){return b=+b,d>>>=0,l||Q(this,b,d,4,2147483647,-2147483648),0>b&&(b=4294967295+b+1),this[d]=b>>>24,this[d+1]=b>>>16,this[d+2]=b>>>8,this[d+3]=255&b,d+4};t.prototype.writeFloatLE=function(b,d,l){return oa(this,b,d,!0,l)};t.prototype.writeFloatBE=function(b,d,l){return oa(this,b,d,!1,l)};t.prototype.writeDoubleLE=function(b,d,l){return ba(this,b,d,!0,l)};t.prototype.writeDoubleBE=function(b,d,l){return ba(this,b,d,!1,l)};t.prototype.copy=function(b,
d,l,y){if(!t.isBuffer(b))throw new TypeError("argument should be a Buffer");if((l||(l=0),y||0===y||(y=this.length),d>=b.length&&(d=b.length),d||(d=0),0<y&&y<l&&(y=l),y===l)||0===b.length||0===this.length)return 0;if(0>d)throw new RangeError("targetStart out of bounds");if(0>l||l>=this.length)throw new RangeError("Index out of range");if(0>y)throw new RangeError("sourceEnd out of bounds");y>this.length&&(y=this.length);b.length-d<y-l&&(y=b.length-d+l);var N=y-l;return this===b&&"function"==typeof Uint8Array.prototype.copyWithin?
this.copyWithin(d,l,y):Uint8Array.prototype.set.call(b,this.subarray(l,y),d),N};t.prototype.fill=function(b,d,l,y){if("string"==typeof b){if("string"==typeof d?(y=d,d=0,l=this.length):"string"==typeof l&&(y=l,l=this.length),void 0!==y&&"string"!=typeof y)throw new TypeError("encoding must be a string");if("string"==typeof y&&!t.isEncoding(y))throw new TypeError("Unknown encoding: "+y);if(1===b.length){var N=b.charCodeAt(0);("utf8"===y&&128>N||"latin1"===y)&&(b=N)}}else"number"==typeof b?b&=255:"boolean"==
typeof b&&(b=Number(b));if(0>d||this.length<d||this.length<l)throw new RangeError("Out of range index");if(l<=d)return this;if(d>>>=0,l=void 0===l?this.length:l>>>0,b||(b=0),"number"==typeof b)for(y=d;y<l;++y)this[y]=b;else{N=t.isBuffer(b)?b:t.from(b,y);var Z=N.length;if(0===Z)throw new TypeError('The value "'+b+'" is invalid for argument "value"');for(y=0;y<l-d;++y)this[y+d]=N[y%Z]}return this};var ma=/[^+/0-9A-Za-z-_]/g,ua=function(){for(var b=Array(256),d=0;16>d;++d)for(var l=16*d,y=0;16>y;++y)b[l+
y]="0123456789abcdef"[d]+"0123456789abcdef"[y];return b}()},898:(da,aa,ca)=>{aa.UINT32=ca(741);aa.UINT64=ca(174)},741:function(da,aa){var ca;!function(){function A(v,C){return this instanceof A?(this._low=0,this._high=0,this.remainder=null,void 0===C?S.call(this,v):"string"==typeof v?E.call(this,v,C):void t.call(this,v,C)):new A(v,C)}function t(v,C){return this._low=0|v,this._high=0|C,this}function S(v){return this._low=65535&v,this._high=v>>>16,this}function E(v,C){v=parseInt(v,C||10);return this._low=
65535&v,this._high=v>>>16,this}A(Math.pow(36,5));A(Math.pow(16,7));A(Math.pow(10,9));A(Math.pow(2,30));A(36);A(16);A(10);A(2);A.prototype.fromBits=t;A.prototype.fromNumber=S;A.prototype.fromString=E;A.prototype.toNumber=function(){return 65536*this._high+this._low};A.prototype.toString=function(v){return this.toNumber().toString(v||10)};A.prototype.add=function(v){var C=this._low+v._low,q=C>>>16;return q+=this._high+v._high,this._low=65535&C,this._high=65535&q,this};A.prototype.subtract=function(v){return this.add(v.clone().negate())};
A.prototype.multiply=function(v){var C,q,L=this._high,R=this._low,k=v._high;v=v._low;return C=(q=R*v)>>>16,C+=L*v,C&=65535,C+=R*k,this._low=65535&q,this._high=65535&C,this};A.prototype.div=function(v){if(0==v._low&&0==v._high)throw Error("division by zero");if(0==v._high&&1==v._low)return this.remainder=new A(0),this;if(v.gt(this))return this.remainder=this.clone(),this._low=0,this._high=0,this;if(this.eq(v))return this.remainder=new A(0),this._low=1,this._high=0,this;v=v.clone();for(var C=-1;!this.lt(v);)v.shiftLeft(1,
!0),C++;this.remainder=this.clone();for(this._high=this._low=0;0<=C;C--)v.shiftRight(1),this.remainder.lt(v)||(this.remainder.subtract(v),16<=C?this._high|=1<<C-16:this._low|=1<<C);return this};A.prototype.negate=function(){var v=1+(65535&~this._low);return this._low=65535&v,this._high=~this._high+(v>>>16)&65535,this};A.prototype.equals=A.prototype.eq=function(v){return this._low==v._low&&this._high==v._high};A.prototype.greaterThan=A.prototype.gt=function(v){return this._high>v._high||!(this._high<
v._high)&&this._low>v._low};A.prototype.lessThan=A.prototype.lt=function(v){return this._high<v._high||!(this._high>v._high)&&this._low<v._low};A.prototype.or=function(v){return this._low|=v._low,this._high|=v._high,this};A.prototype.and=function(v){return this._low&=v._low,this._high&=v._high,this};A.prototype.not=function(){return this._low=65535&~this._low,this._high=65535&~this._high,this};A.prototype.xor=function(v){return this._low^=v._low,this._high^=v._high,this};A.prototype.shiftRight=A.prototype.shiftr=
function(v){return 16<v?(this._low=this._high>>v-16,this._high=0):16==v?(this._low=this._high,this._high=0):(this._low=this._low>>v|this._high<<16-v&65535,this._high>>=v),this};A.prototype.shiftLeft=A.prototype.shiftl=function(v,C){return 16<v?(this._high=this._low<<v-16,this._low=0,C||(this._high&=65535)):16==v?(this._high=this._low,this._low=0):(this._high=this._high<<v|this._low>>16-v,this._low=this._low<<v&65535,C||(this._high&=65535)),this};A.prototype.rotateLeft=A.prototype.rotl=function(v){var C=
this._high<<16|this._low;return C=C<<v|C>>>32-v,this._low=65535&C,this._high=C>>>16,this};A.prototype.rotateRight=A.prototype.rotr=function(v){var C=this._high<<16|this._low;return C=C>>>v|C<<32-v,this._low=65535&C,this._high=C>>>16,this};A.prototype.clone=function(){return new A(this._low,this._high)};void 0===(ca=function(){return A}.apply(aa,[]))||(da.exports=ca)}()},174:function(da,aa){var ca;!function(){function A(q,L,R,k){return this instanceof A?(this.remainder=null,"string"==typeof q?E.call(this,
q,L):void 0===L?S.call(this,q):void t.apply(this,arguments)):new A(q,L,R,k)}function t(q,L,R,k){return void 0===R?(this._a00=65535&q,this._a16=q>>>16,this._a32=65535&L,this._a48=L>>>16,this):(this._a00=0|q,this._a16=0|L,this._a32=0|R,this._a48=0|k,this)}function S(q){return this._a00=65535&q,this._a16=q>>>16,this._a32=0,this._a48=0,this}function E(q,L){L=L||10;this._a48=this._a32=this._a16=this._a00=0;for(var R=v[L]||new A(Math.pow(L,5)),k=0,H=q.length;k<H;k+=5){var M=Math.min(5,H-k),p=parseInt(q.slice(k,
k+M),L);this.multiply(5>M?new A(Math.pow(L,M)):R).add(new A(p))}return this}var v={16:A(Math.pow(16,5)),10:A(Math.pow(10,5)),2:A(Math.pow(2,5))},C={16:A(16),10:A(10),2:A(2)};A.prototype.fromBits=t;A.prototype.fromNumber=S;A.prototype.fromString=E;A.prototype.toNumber=function(){return 65536*this._a16+this._a00};A.prototype.toString=function(q){var L=C[q=q||10]||new A(q);if(!this.gt(L))return this.toNumber().toString(q);for(var R=this.clone(),k=Array(64),H=63;0<=H&&(R.div(L),k[H]=R.remainder.toNumber().toString(q),
R.gt(L));H--);return k[H-1]=R.toNumber().toString(q),k.join("")};A.prototype.add=function(q){var L=this._a00+q._a00,R=L>>>16,k=(R+=this._a16+q._a16)>>>16,H=(k+=this._a32+q._a32)>>>16;return H+=this._a48+q._a48,this._a00=65535&L,this._a16=65535&R,this._a32=65535&k,this._a48=65535&H,this};A.prototype.subtract=function(q){return this.add(q.clone().negate())};A.prototype.multiply=function(q){var L=this._a00,R=this._a16,k=this._a32,H=this._a48,M=q._a00,p=q._a16,B=q._a32,K=L*M,Q=K>>>16,fa=(Q+=L*p)>>>16;
Q&=65535;fa+=(Q+=R*M)>>>16;var oa=(fa+=L*B)>>>16;return fa&=65535,oa+=(fa+=R*p)>>>16,fa&=65535,oa+=(fa+=k*M)>>>16,oa+=L*q._a48,oa&=65535,oa+=R*B,oa&=65535,oa+=k*p,oa&=65535,oa+=H*M,this._a00=65535&K,this._a16=65535&Q,this._a32=65535&fa,this._a48=65535&oa,this};A.prototype.div=function(q){if(0==q._a16&&0==q._a32&&0==q._a48){if(0==q._a00)throw Error("division by zero");if(1==q._a00)return this.remainder=new A(0),this}if(q.gt(this))return this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=
0,this._a48=0,this;if(this.eq(q))return this.remainder=new A(0),this._a00=1,this._a16=0,this._a32=0,this._a48=0,this;q=q.clone();for(var L=-1;!this.lt(q);)q.shiftLeft(1,!0),L++;this.remainder=this.clone();for(this._a48=this._a32=this._a16=this._a00=0;0<=L;L--)q.shiftRight(1),this.remainder.lt(q)||(this.remainder.subtract(q),48<=L?this._a48|=1<<L-48:32<=L?this._a32|=1<<L-32:16<=L?this._a16|=1<<L-16:this._a00|=1<<L);return this};A.prototype.negate=function(){var q=1+(65535&~this._a00);return this._a00=
65535&q,q=(65535&~this._a16)+(q>>>16),this._a16=65535&q,q=(65535&~this._a32)+(q>>>16),this._a32=65535&q,this._a48=~this._a48+(q>>>16)&65535,this};A.prototype.equals=A.prototype.eq=function(q){return this._a48==q._a48&&this._a00==q._a00&&this._a32==q._a32&&this._a16==q._a16};A.prototype.greaterThan=A.prototype.gt=function(q){return this._a48>q._a48||!(this._a48<q._a48)&&(this._a32>q._a32||!(this._a32<q._a32)&&(this._a16>q._a16||!(this._a16<q._a16)&&this._a00>q._a00))};A.prototype.lessThan=A.prototype.lt=
function(q){return this._a48<q._a48||!(this._a48>q._a48)&&(this._a32<q._a32||!(this._a32>q._a32)&&(this._a16<q._a16||!(this._a16>q._a16)&&this._a00<q._a00))};A.prototype.or=function(q){return this._a00|=q._a00,this._a16|=q._a16,this._a32|=q._a32,this._a48|=q._a48,this};A.prototype.and=function(q){return this._a00&=q._a00,this._a16&=q._a16,this._a32&=q._a32,this._a48&=q._a48,this};A.prototype.xor=function(q){return this._a00^=q._a00,this._a16^=q._a16,this._a32^=q._a32,this._a48^=q._a48,this};A.prototype.not=
function(){return this._a00=65535&~this._a00,this._a16=65535&~this._a16,this._a32=65535&~this._a32,this._a48=65535&~this._a48,this};A.prototype.shiftRight=A.prototype.shiftr=function(q){return 48<=(q%=64)?(this._a00=this._a48>>q-48,this._a16=0,this._a32=0,this._a48=0):32<=q?(q-=32,this._a00=65535&(this._a32>>q|this._a48<<16-q),this._a16=this._a48>>q&65535,this._a32=0,this._a48=0):16<=q?(q-=16,this._a00=65535&(this._a16>>q|this._a32<<16-q),this._a16=65535&(this._a32>>q|this._a48<<16-q),this._a32=this._a48>>
q&65535,this._a48=0):(this._a00=65535&(this._a00>>q|this._a16<<16-q),this._a16=65535&(this._a16>>q|this._a32<<16-q),this._a32=65535&(this._a32>>q|this._a48<<16-q),this._a48=this._a48>>q&65535),this};A.prototype.shiftLeft=A.prototype.shiftl=function(q,L){return 48<=(q%=64)?(this._a48=this._a00<<q-48,this._a32=0,this._a16=0,this._a00=0):32<=q?(q-=32,this._a48=this._a16<<q|this._a00>>16-q,this._a32=this._a00<<q&65535,this._a16=0,this._a00=0):16<=q?(q-=16,this._a48=this._a32<<q|this._a16>>16-q,this._a32=
65535&(this._a16<<q|this._a00>>16-q),this._a16=this._a00<<q&65535,this._a00=0):(this._a48=this._a48<<q|this._a32>>16-q,this._a32=65535&(this._a32<<q|this._a16>>16-q),this._a16=65535&(this._a16<<q|this._a00>>16-q),this._a00=this._a00<<q&65535),L||(this._a48&=65535),this};A.prototype.rotateLeft=A.prototype.rotl=function(q){if(0==(q%=64))return this;if(32<=q){var L=this._a00;if(this._a00=this._a32,this._a32=L,L=this._a48,this._a48=this._a16,this._a16=L,32==q)return this;q-=32}var R=this._a48<<16|this._a32,
k=this._a16<<16|this._a00;L=R<<q|k>>>32-q;q=k<<q|R>>>32-q;return this._a00=65535&q,this._a16=q>>>16,this._a32=65535&L,this._a48=L>>>16,this};A.prototype.rotateRight=A.prototype.rotr=function(q){if(0==(q%=64))return this;if(32<=q){var L=this._a00;if(this._a00=this._a32,this._a32=L,L=this._a48,this._a48=this._a16,this._a16=L,32==q)return this;q-=32}var R=this._a48<<16|this._a32,k=this._a16<<16|this._a00;L=R>>>q|k<<32-q;q=k>>>q|R<<32-q;return this._a00=65535&q,this._a16=q>>>16,this._a32=65535&L,this._a48=
L>>>16,this};A.prototype.clone=function(){return new A(this._a00,this._a16,this._a32,this._a48)};void 0===(ca=function(){return A}.apply(aa,[]))||(da.exports=ca)}()},251:(da,aa)=>{aa.read=function(ca,A,t,S,E){var v=8*E-S-1;var C=(1<<v)-1,q=C>>1,L=-7;E=t?E-1:0;var R=t?-1:1,k=ca[A+E];E+=R;t=k&(1<<-L)-1;k>>=-L;for(L+=v;0<L;t=256*t+ca[A+E],E+=R,L-=8);v=t&(1<<-L)-1;t>>=-L;for(L+=S;0<L;v=256*v+ca[A+E],E+=R,L-=8);if(0===t)t=1-q;else{if(t===C)return v?NaN:1/0*(k?-1:1);v+=Math.pow(2,S);t-=q}return(k?-1:1)*
v*Math.pow(2,t-S)};aa.write=function(ca,A,t,S,E,v){var C,q,L,R=8*v-E-1,k=(1<<R)-1,H=k>>1,M=23===E?Math.pow(2,-24)-Math.pow(2,-77):0;v=S?0:v-1;S=S?1:-1;var p=0>A||0===A&&0>1/A?1:0;A=Math.abs(A);for(isNaN(A)||A===1/0?(q=isNaN(A)?1:0,C=k):(C=Math.floor(Math.log(A)/Math.LN2),1>A*(L=Math.pow(2,-C))&&(C--,L*=2),2<=(A+=1<=C+H?M/L:M*Math.pow(2,1-H))*L&&(C++,L/=2),C+H>=k?(q=0,C=k):1<=C+H?(q=(A*L-1)*Math.pow(2,E),C+=H):(q=A*Math.pow(2,H-1)*Math.pow(2,E),C=0));8<=E;ca[t+v]=255&q,v+=S,q/=256,E-=8);C=C<<E|q;for(R+=
E;0<R;ca[t+v]=255&C,v+=S,C/=256,R-=8);ca[t+v-S]|=128*p}},134:(da,aa,ca)=>{da.exports={h32:ca(492),h64:ca(470)}},492:(da,aa,ca)=>{function A(){return 2==arguments.length?(new A(arguments[1])).update(arguments[0]).digest():this instanceof A?void t.call(this,arguments[0]):new A(arguments[0])}function t(k){return this.seed=k instanceof E?k.clone():E(k),this.v1=this.seed.clone().add(v).add(C),this.v2=this.seed.clone().add(C),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(v),this.total_len=
0,this.memsize=0,this.memory=null,this}var S=ca(287).hp,E=ca(898).UINT32;E.prototype.xxh_update=function(k,H){var M,p=C._low,B=C._high;var K=(M=k*p)>>>16;K=K+H*p&65535;K+=k*B;H=this._low+(65535&M);K=(H>>>16)+(this._high+(65535&K))<<16|65535&H;k=(K=K<<13|K>>>19)>>>16;K=(M=(H=65535&K)*(p=v._low))>>>16;K+=k*p;K&=65535;K+=H*v._high;this._low=65535&M;this._high=65535&K};var v=E("2654435761"),C=E("2246822519"),q=E("3266489917"),L=E("668265263"),R=E("374761393");A.prototype.init=t;A.prototype.update=function(k){var H=
"string"==typeof k;if(H){var M=[];H=0;for(var p=k.length;H<p;H++){var B=k.charCodeAt(H);128>B?M.push(B):2048>B?M.push(192|B>>6,128|63&B):55296>B||57344<=B?M.push(224|B>>12,128|B>>6&63,128|63&B):(H++,B=65536+((1023&B)<<10|1023&k.charCodeAt(H)),M.push(240|B>>18,128|B>>12&63,128|B>>6&63,128|63&B))}k=new Uint8Array(M);H=!1;M=!0}"undefined"!=typeof ArrayBuffer&&k instanceof ArrayBuffer&&(M=!0,k=new Uint8Array(k));p=0;var K=k.length;B=p+K;if(0==K)return this;if(this.total_len+=K,0==this.memsize&&(this.memory=
H?"":M?new Uint8Array(16):new S(16)),16>this.memsize+K)return H?this.memory+=k:M?this.memory.set(k.subarray(0,K),this.memsize):k.copy(this.memory,this.memsize,0,K),this.memsize+=K,this;0<this.memsize&&(H?this.memory+=k.slice(0,16-this.memsize):M?this.memory.set(k.subarray(0,16-this.memsize),this.memsize):k.copy(this.memory,this.memsize,0,16-this.memsize),K=0,H?(this.v1.xxh_update(this.memory.charCodeAt(K+1)<<8|this.memory.charCodeAt(K),this.memory.charCodeAt(K+3)<<8|this.memory.charCodeAt(K+2)),K+=
4,this.v2.xxh_update(this.memory.charCodeAt(K+1)<<8|this.memory.charCodeAt(K),this.memory.charCodeAt(K+3)<<8|this.memory.charCodeAt(K+2)),K+=4,this.v3.xxh_update(this.memory.charCodeAt(K+1)<<8|this.memory.charCodeAt(K),this.memory.charCodeAt(K+3)<<8|this.memory.charCodeAt(K+2)),K+=4,this.v4.xxh_update(this.memory.charCodeAt(K+1)<<8|this.memory.charCodeAt(K),this.memory.charCodeAt(K+3)<<8|this.memory.charCodeAt(K+2))):(this.v1.xxh_update(this.memory[K+1]<<8|this.memory[K],this.memory[K+3]<<8|this.memory[K+
2]),K+=4,this.v2.xxh_update(this.memory[K+1]<<8|this.memory[K],this.memory[K+3]<<8|this.memory[K+2]),K+=4,this.v3.xxh_update(this.memory[K+1]<<8|this.memory[K],this.memory[K+3]<<8|this.memory[K+2]),K+=4,this.v4.xxh_update(this.memory[K+1]<<8|this.memory[K],this.memory[K+3]<<8|this.memory[K+2])),p+=16-this.memsize,this.memsize=0,H&&(this.memory=""));if(p<=B-16){K=B-16;do H?(this.v1.xxh_update(k.charCodeAt(p+1)<<8|k.charCodeAt(p),k.charCodeAt(p+3)<<8|k.charCodeAt(p+2)),p+=4,this.v2.xxh_update(k.charCodeAt(p+
1)<<8|k.charCodeAt(p),k.charCodeAt(p+3)<<8|k.charCodeAt(p+2)),p+=4,this.v3.xxh_update(k.charCodeAt(p+1)<<8|k.charCodeAt(p),k.charCodeAt(p+3)<<8|k.charCodeAt(p+2)),p+=4,this.v4.xxh_update(k.charCodeAt(p+1)<<8|k.charCodeAt(p),k.charCodeAt(p+3)<<8|k.charCodeAt(p+2))):(this.v1.xxh_update(k[p+1]<<8|k[p],k[p+3]<<8|k[p+2]),p+=4,this.v2.xxh_update(k[p+1]<<8|k[p],k[p+3]<<8|k[p+2]),p+=4,this.v3.xxh_update(k[p+1]<<8|k[p],k[p+3]<<8|k[p+2]),p+=4,this.v4.xxh_update(k[p+1]<<8|k[p],k[p+3]<<8|k[p+2])),p+=4;while(p<=
K)}return p<B&&(H?this.memory+=k.slice(p):M?this.memory.set(k.subarray(p,B),this.memsize):k.copy(this.memory,this.memsize,p,B),this.memsize=B-p),this};A.prototype.digest=function(){var k,H,M=this.memory,p="string"==typeof M,B=0,K=this.memsize,Q=new E;for((k=16<=this.total_len?this.v1.rotl(1).add(this.v2.rotl(7).add(this.v3.rotl(12).add(this.v4.rotl(18)))):this.seed.clone().add(R)).add(Q.fromNumber(this.total_len));B<=K-4;)p?Q.fromBits(M.charCodeAt(B+1)<<8|M.charCodeAt(B),M.charCodeAt(B+3)<<8|M.charCodeAt(B+
2)):Q.fromBits(M[B+1]<<8|M[B],M[B+3]<<8|M[B+2]),k.add(Q.multiply(q)).rotl(17).multiply(L),B+=4;for(;B<K;)Q.fromBits(p?M.charCodeAt(B++):M[B++],0),k.add(Q.multiply(R)).rotl(11).multiply(v);return H=k.clone().shiftRight(15),k.xor(H).multiply(C),H=k.clone().shiftRight(13),k.xor(H).multiply(q),H=k.clone().shiftRight(16),k.xor(H),this.init(this.seed),k};da.exports=A},470:(da,aa,ca)=>{function A(){return 2==arguments.length?(new A(arguments[1])).update(arguments[0]).digest():this instanceof A?void t.call(this,
arguments[0]):new A(arguments[0])}function t(k){return this.seed=k instanceof E?k.clone():E(k),this.v1=this.seed.clone().add(v).add(C),this.v2=this.seed.clone().add(C),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(v),this.total_len=0,this.memsize=0,this.memory=null,this}var S=ca(287).hp,E=ca(898).UINT64,v=E("11400714785074694791"),C=E("14029467366897019727"),q=E("1609587929392839161"),L=E("9650029242287828579"),R=E("2870177450012600261");A.prototype.init=t;A.prototype.update=function(k){var H=
"string"==typeof k;if(H){var M=[];H=0;for(var p=k.length;H<p;H++){var B=k.charCodeAt(H);128>B?M.push(B):2048>B?M.push(192|B>>6,128|63&B):55296>B||57344<=B?M.push(224|B>>12,128|B>>6&63,128|63&B):(H++,B=65536+((1023&B)<<10|1023&k.charCodeAt(H)),M.push(240|B>>18,128|B>>12&63,128|B>>6&63,128|63&B))}k=new Uint8Array(M);H=!1;M=!0}"undefined"!=typeof ArrayBuffer&&k instanceof ArrayBuffer&&(M=!0,k=new Uint8Array(k));p=0;var K=k.length;B=p+K;if(0==K)return this;if(this.total_len+=K,0==this.memsize&&(this.memory=
H?"":M?new Uint8Array(32):new S(32)),32>this.memsize+K)return H?this.memory+=k:M?this.memory.set(k.subarray(0,K),this.memsize):k.copy(this.memory,this.memsize,0,K),this.memsize+=K,this;if(0<this.memsize){H?this.memory+=k.slice(0,32-this.memsize):M?this.memory.set(k.subarray(0,32-this.memsize),this.memsize):k.copy(this.memory,this.memsize,0,32-this.memsize);var Q=0;H?(K=E(this.memory.charCodeAt(Q+1)<<8|this.memory.charCodeAt(Q),this.memory.charCodeAt(Q+3)<<8|this.memory.charCodeAt(Q+2),this.memory.charCodeAt(Q+
5)<<8|this.memory.charCodeAt(Q+4),this.memory.charCodeAt(Q+7)<<8|this.memory.charCodeAt(Q+6)),this.v1.add(K.multiply(C)).rotl(31).multiply(v),Q+=8,K=E(this.memory.charCodeAt(Q+1)<<8|this.memory.charCodeAt(Q),this.memory.charCodeAt(Q+3)<<8|this.memory.charCodeAt(Q+2),this.memory.charCodeAt(Q+5)<<8|this.memory.charCodeAt(Q+4),this.memory.charCodeAt(Q+7)<<8|this.memory.charCodeAt(Q+6)),this.v2.add(K.multiply(C)).rotl(31).multiply(v),Q+=8,K=E(this.memory.charCodeAt(Q+1)<<8|this.memory.charCodeAt(Q),this.memory.charCodeAt(Q+
3)<<8|this.memory.charCodeAt(Q+2),this.memory.charCodeAt(Q+5)<<8|this.memory.charCodeAt(Q+4),this.memory.charCodeAt(Q+7)<<8|this.memory.charCodeAt(Q+6)),this.v3.add(K.multiply(C)).rotl(31).multiply(v),Q+=8,K=E(this.memory.charCodeAt(Q+1)<<8|this.memory.charCodeAt(Q),this.memory.charCodeAt(Q+3)<<8|this.memory.charCodeAt(Q+2),this.memory.charCodeAt(Q+5)<<8|this.memory.charCodeAt(Q+4),this.memory.charCodeAt(Q+7)<<8|this.memory.charCodeAt(Q+6))):(K=E(this.memory[Q+1]<<8|this.memory[Q],this.memory[Q+3]<<
8|this.memory[Q+2],this.memory[Q+5]<<8|this.memory[Q+4],this.memory[Q+7]<<8|this.memory[Q+6]),this.v1.add(K.multiply(C)).rotl(31).multiply(v),Q+=8,K=E(this.memory[Q+1]<<8|this.memory[Q],this.memory[Q+3]<<8|this.memory[Q+2],this.memory[Q+5]<<8|this.memory[Q+4],this.memory[Q+7]<<8|this.memory[Q+6]),this.v2.add(K.multiply(C)).rotl(31).multiply(v),Q+=8,K=E(this.memory[Q+1]<<8|this.memory[Q],this.memory[Q+3]<<8|this.memory[Q+2],this.memory[Q+5]<<8|this.memory[Q+4],this.memory[Q+7]<<8|this.memory[Q+6]),
this.v3.add(K.multiply(C)).rotl(31).multiply(v),Q+=8,K=E(this.memory[Q+1]<<8|this.memory[Q],this.memory[Q+3]<<8|this.memory[Q+2],this.memory[Q+5]<<8|this.memory[Q+4],this.memory[Q+7]<<8|this.memory[Q+6]));this.v4.add(K.multiply(C)).rotl(31).multiply(v);p+=32-this.memsize;this.memsize=0;H&&(this.memory="")}if(p<=B-32){Q=B-32;do H?(K=E(k.charCodeAt(p+1)<<8|k.charCodeAt(p),k.charCodeAt(p+3)<<8|k.charCodeAt(p+2),k.charCodeAt(p+5)<<8|k.charCodeAt(p+4),k.charCodeAt(p+7)<<8|k.charCodeAt(p+6)),this.v1.add(K.multiply(C)).rotl(31).multiply(v),
p+=8,K=E(k.charCodeAt(p+1)<<8|k.charCodeAt(p),k.charCodeAt(p+3)<<8|k.charCodeAt(p+2),k.charCodeAt(p+5)<<8|k.charCodeAt(p+4),k.charCodeAt(p+7)<<8|k.charCodeAt(p+6)),this.v2.add(K.multiply(C)).rotl(31).multiply(v),p+=8,K=E(k.charCodeAt(p+1)<<8|k.charCodeAt(p),k.charCodeAt(p+3)<<8|k.charCodeAt(p+2),k.charCodeAt(p+5)<<8|k.charCodeAt(p+4),k.charCodeAt(p+7)<<8|k.charCodeAt(p+6)),this.v3.add(K.multiply(C)).rotl(31).multiply(v),p+=8,K=E(k.charCodeAt(p+1)<<8|k.charCodeAt(p),k.charCodeAt(p+3)<<8|k.charCodeAt(p+
2),k.charCodeAt(p+5)<<8|k.charCodeAt(p+4),k.charCodeAt(p+7)<<8|k.charCodeAt(p+6))):(K=E(k[p+1]<<8|k[p],k[p+3]<<8|k[p+2],k[p+5]<<8|k[p+4],k[p+7]<<8|k[p+6]),this.v1.add(K.multiply(C)).rotl(31).multiply(v),K=E(k[(p+=8)+1]<<8|k[p],k[p+3]<<8|k[p+2],k[p+5]<<8|k[p+4],k[p+7]<<8|k[p+6]),this.v2.add(K.multiply(C)).rotl(31).multiply(v),K=E(k[(p+=8)+1]<<8|k[p],k[p+3]<<8|k[p+2],k[p+5]<<8|k[p+4],k[p+7]<<8|k[p+6]),this.v3.add(K.multiply(C)).rotl(31).multiply(v),K=E(k[(p+=8)+1]<<8|k[p],k[p+3]<<8|k[p+2],k[p+5]<<8|
k[p+4],k[p+7]<<8|k[p+6])),this.v4.add(K.multiply(C)).rotl(31).multiply(v),p+=8;while(p<=Q)}return p<B&&(H?this.memory+=k.slice(p):M?this.memory.set(k.subarray(p,B),this.memsize):k.copy(this.memory,this.memsize,p,B),this.memsize=B-p),this};A.prototype.digest=function(){var k,H,M=this.memory,p="string"==typeof M,B=0,K=this.memsize,Q=new E;32<=this.total_len?((k=this.v1.clone().rotl(1)).add(this.v2.clone().rotl(7)),k.add(this.v3.clone().rotl(12)),k.add(this.v4.clone().rotl(18)),k.xor(this.v1.multiply(C).rotl(31).multiply(v)),
k.multiply(v).add(L),k.xor(this.v2.multiply(C).rotl(31).multiply(v)),k.multiply(v).add(L),k.xor(this.v3.multiply(C).rotl(31).multiply(v)),k.multiply(v).add(L),k.xor(this.v4.multiply(C).rotl(31).multiply(v)),k.multiply(v).add(L)):k=this.seed.clone().add(R);for(k.add(Q.fromNumber(this.total_len));B<=K-8;)p?Q.fromBits(M.charCodeAt(B+1)<<8|M.charCodeAt(B),M.charCodeAt(B+3)<<8|M.charCodeAt(B+2),M.charCodeAt(B+5)<<8|M.charCodeAt(B+4),M.charCodeAt(B+7)<<8|M.charCodeAt(B+6)):Q.fromBits(M[B+1]<<8|M[B],M[B+
3]<<8|M[B+2],M[B+5]<<8|M[B+4],M[B+7]<<8|M[B+6]),Q.multiply(C).rotl(31).multiply(v),k.xor(Q).rotl(27).multiply(v).add(L),B+=8;for(B+4<=K&&(p?Q.fromBits(M.charCodeAt(B+1)<<8|M.charCodeAt(B),M.charCodeAt(B+3)<<8|M.charCodeAt(B+2),0,0):Q.fromBits(M[B+1]<<8|M[B],M[B+3]<<8|M[B+2],0,0),k.xor(Q.multiply(v)).rotl(23).multiply(C).add(q),B+=4);B<K;)Q.fromBits(p?M.charCodeAt(B++):M[B++],0,0,0),k.xor(Q.multiply(R)).rotl(11).multiply(v);return H=k.clone().shiftRight(33),k.xor(H).multiply(C),H=k.clone().shiftRight(29),
k.xor(H).multiply(q),H=k.clone().shiftRight(32),k.xor(H),this.init(this.seed),k};da.exports=A}},gb={};Aa.n=da=>{var aa=da&&da.__esModule?()=>da.default:()=>da;return Aa.d(aa,{a:aa}),aa};Aa.d=(da,aa)=>{for(var ca in aa)Aa.o(aa,ca)&&!Aa.o(da,ca)&&Object.defineProperty(da,ca,{enumerable:!0,get:aa[ca]})};Aa.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||(new Function("return this"))()}catch(da){if("object"==typeof window)return window}}();Aa.o=(da,aa)=>Object.prototype.hasOwnProperty.call(da,
aa);Aa.r=da=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(da,Symbol.toStringTag,{value:"Module"});Object.defineProperty(da,"__esModule",{value:!0})};(()=>{const da=Aa(514).utilities;Object.isExtensible(Object)&&!Object.prototype.hasOwnProperty("enswatch")&&Object.defineProperty(Object.prototype,"enswatch",da.watcher)})();(()=>{const {utilities:da}=Aa(514),{Gateway:aa}=Aa(347);if(document.elementFromPoint&&!da.isIE()){if(ensBrowserSupported=!0,"undefined"==typeof G&&(G={}),
G.gateway&&G.gateway.singleton)throw console.warn("Two or more gateways have attempted to initialize"),Error("Detected two or more gateway cores attempting to intialize");G.gateway={singleton:!0};G.hasOwnProperty("privacy")&&"function"==typeof G.privacy.onBeforeInit&&G.privacy.onBeforeInit(ensClientConfig);"function"==typeof ensClientConfig.domReady&&(da.domReady=ensClientConfig.domReady);gateway=new aa(ensClientConfig);gateway.isInitialized?(G.gateway={templateManager:gateway.templateManager,environment:gateway.environment,
environmentExists:gateway.environmentManager.environmentExists,getActiveEnvironment:gateway.environmentManager.getActiveEnvironment,getActiveLocale:gateway.environmentManager.getActiveLocale,getAvailableLocales:gateway.environmentManager.getAvailableLocales,getCookie:gateway.consentCookies.getCookie,getCookieTypes:gateway.consentCookies.getCookieTypes,getCookieDomain:gateway.consentCookies.getCookieDomain,getCookieDomainPath:gateway.consentCookies.getCookieDomainPath,getVersion:gateway.getVersion,
openBanner:gateway.openBanner,closeBanner:gateway.closeBanner,openModal:gateway.openModal,closeModal:gateway.closeModal,openDoNotSellModal:gateway.openDoNotSellModal,openRequestDataModal:gateway.openRequestDataModal,openDeleteDataModal:gateway.openDeleteDataModal,sendCCPAEvent:gateway.sendCCPAEvent,registerEnvironmentChangeCallback:gateway.environmentManager.registerEnvironmentChangeCallback,registerConsentChangeCallback:gateway.registerConsentChangeCallback,getList:gateway.getList,isWhitelist:gateway.isWhitelist,
resetEnvironment:gateway.resetEnvironment,saveTcf:gateway.consentCookies.saveTcf,setConsentStatus:gateway.banner.setConsentStatus,setConsentStatuses:gateway.banner.setConsentStatuses,setCookie:gateway.consentCookies.setCookie,setCookies:gateway.consentCookies.setCookies,setCookieDomain:gateway.consentCookies.setCookieDomain,setCookieDomainPath:gateway.consentCookies.setCookieDomainPath,setCookieRetentionPeriod:gateway.consentCookies.setCookieRetentionPeriod,setEnvironment:gateway.environmentManager.setEnvironment,
setOpenModal:gateway.setOpenModal,setOpenBanner:gateway.setOpenBanner,getConsentStatus:gateway.banner.getConsentStatus,getUserPreferences:gateway.getUserPreferences,getUserPreference:gateway.getUserPreference,updatePreferences:gateway.updatePreferences,allowTag:gateway.allowTag,blockTag:gateway.blockTag,blockAllCategories:gateway.blockAllCategories,clearTags:gateway.clearTags,getHistory:gateway.getHistory,enableBotAndFraudProtectionReason:gateway.enableBotAndFraudProtectionReason,addCustomReportingEvent:gateway.addCustomReportingEvent,
googleConsentManager:gateway.googleConsentManager,singleton:!0},Object.defineProperty(G.gateway,"environment",{get:function(){return gateway.environmentManager.getActiveEnvironment()}}),G.hasOwnProperty("privacy")&&"function"==typeof G.privacy.onAfterInitInternal&&G.privacy.onAfterInitInternal(ensClientConfig),G.hasOwnProperty("privacy")&&"function"==typeof G.privacy.onAfterInit&&G.privacy.onAfterInit(ensClientConfig)):G.gateway={}}else ensBrowserSupported=!1;!ensBrowserSupported&&ensClientConfig.browserNotSupportedURL&&
""!==ensClientConfig.browserNotSupportedURL&&(window.location=ensClientConfig.browserNotSupportedURL)})()})()},4149937,[4149940,3956850],645054,[645053,756475],24);
bby_prod_gateway.bindDependencyImmediate(function(){var G=window.bby_prod_gateway;ensClientConfig={info:{name:"bestbuy",publishPath:"privacy_prod",clientId:2493},cookieTypes:[],whitelist:{"default":[{tag:"/[a-zA-Z0-9]+/",displayName:"Everything 2.0"},{tag:"(com|net|org|gov|us|localhost)",displayName:"Everything"}]},defaultEnv:"",globalPrivacyControlCategories:[],featureToggles:{enableReporting:!0,enableAllowedDomainsReporting:!1,enableFiltering:!0,enablePrivacyNotice:!1,shouldNotAutoShowBanner:!1,
includePrivacyNoticeCustomConfig:!1,privacyNoticeCustomConfig:null,enableConsentModal:!1,includeConsentModalCustomConfig:!1,consentModalCustomConfig:null,shouldNotAutoShowModal:!1,enableTCF:!1,requireSSL:!1,showTrustedDomains:!1,enableDataMonitoring:!1,usesWhitelist:!0,consentWidget:!1,enableEnvironmentMatching:!1,allowPerTagOptOut:!1,enableGdprModal:!1,enableCSSMonitoring:!1,monitorFormAction:!1,monitorAnchorTags:!1,enableButtonMonitoring:!1,enableInputMonitoring:!1,enableAreaMonitoring:!1,enableWindowOpenOverride:!1,
enableServiceWorker:!1,enableAsyncEnvironments:!1,enablePrivacyNoticeAdvancedMode:!1,enablePrivacyConsentModalAdvancedMode:!1,enableDoNotSellModal:!1,autoDoNotSellAllCategories:!1,enableDeleteDataModal:!1,enableRequestDataModal:!1,showDoNotSellOnConsentModal:!1,showDeleteDataOnConsentModal:!1,showRequestDataOnConsentModal:!1,disableDefaultStyles:!1,disableEscapeKeyboardCommands:!1,enableTagKiller:!1,honorGlobalPrivacyControl:!1,enableGoogleConsent:!1,enableOnlyTLDNetworkCalls:!1,isObservingStyle:!1},
sslConfig:{sslEnforcementMode:"Block"},libraryPackage:"enterprise",dataMonitoring:{mode:"block",blockURLParamsRegex:[],domainsAllowed:[],maskCharacter:"~",processRequestBody:!1,monitorBase64Data:!1},environmentConfigs:[{name:"Do Not Sell",countryCode:"us",languageCode:"en-US",requireSSL:!1,enableCSSMonitoring:!1,monitorAnchorTags:!1,monitorFormAction:!1,enableButtonMonitoring:!1,enableInputMonitoring:!1,enableAreaMonitoring:!1,enableWindowOpenOverride:!1,enableServiceWorker:!1,enableFiltering:!0,
condition:{type:"jsVar",key:"e_dns",value:"1",shouldBePositive:!0,operator:"equals",caseInsensitive:!1},optVals:{},translation:{notificationBannerContent:"Notification Banner Content",notificationBannerAllowAll:"Notification Banner Allow All",notificationBannerDenyAll:"Notification Banner Deny All",notificationBannerPreferences:"Notification Banner Preferences",consentTitle:"Privacy Settings",consentDescription:'ATTENTION - THIS IS A DAI TEST!!!\nThis modal is part of a DAI test of the CCPA privacy module. If you have questions or concerns, please contact us on the #help-dai Slack channel.\n\nTo continue using the site without interruption to network requests, select "Allow". Selecting "Deny" may have unintended impact on client behavior while this service is being developed. To reset the privacy app and disable blocking, clear browser cookies. Please feel free to ask us questions and provide feedback.\nIn order to provide with the best experience possible we might sometimes track information about you. Sometimes this may involve writing a cookie. We use this information for things like experience enrichment, analytics and targeting advertising. We recommend allowing these functions to get the most out of your experience.',
consentWidgetCopy:"Privacy Settings",tcf2Modal:{title:"Privacy Settings",description:"In order to provide the best experience possible, we might sometimes track information about you. This may involve sending personal data such as advertising identifiers, information about your interests, and your IP address to third parties for processing. This information may be stored and/or accessed by this site and third parties through the use of cookies, device identifiers or other device data. You can view a list of the third parties by clicking the View All Vendors link or Advanced Settings button. We use this information for things like experience enrichment, analytics, and targeted advertising. We recommend allowing these functions in order to get the most out of your experience. In some cases, third parties are processing your data based in legitimate interest. You have the right to object to such processing and can do so in the Advanced Settings. Your consent choices are *service-specific* to this site. You can change your preferences anytime by clicking on the Personal Settings button at the bottom of the page.",
advancedSettings:"Advanced",viewAllVendors:"View All Vendors",withdrawConsent:"Withdraw Consent",accept:"Accept"},tcf2PurpAndFeaturesModal:{title:"Purposes \x26 Features",description:"In some cases, third parties are processing your data based in legitimate interest. You have the right to object to such processing and can do so in the Legitimate Interest tab.",save:"Save",allowAll:"Allow All",cancel:"Cancel"},tcf2VendorModal:{title:"Vendors",description:"In some cases, third parties are processing your data based in legitimate interest. You have the right to object to such processing and can do so in the Legitimate Interest tab.",
save:"Save",allowAll:"Allow All",cancel:"Cancel"},tcf2LegitimateInterestsModal:{title:"Legitimate Interest",description:"In order to provide with the best experience possible third parties are processing your data based in legitimate interest. This may involve sending personal data such as advertising identifiers, information about your interests and your IP address to third parties for processing. We use this information for things like experience enrichment, analytics and targeting advertising. We recommend allowing these functions to get the most out of your experience. You have the right to object to such processing and can do so here. Your consent choices are *service-specific* to this site.",
legitimateInterestPurposes:"Legitimate Interest Purposes",save:"Save",objectToAll:"Object to All",cancel:"Cancel"},tcf2Shared:{purposes:"Purposes",features:"Features",specialPurposes:"Special Purposes",specialFeatures:"Special Features",vendors:"Vendors",privacyPolicy:"Privacy Policy",moreInfo:"More Info",notAffiliated:"Not Affiliated with the IAB"},save:"Save",cancel:"Cancel",close:"Notification Banner Close",cookies:{}},whitelist:{"default":[{tag:"cdn\\.480app\\.com",displayName:""},{tag:"colrep\\.sitelabweb\\.com",
displayName:""},{tag:"evnt\\.nmgplatform\\.com",displayName:""},{tag:"gs\\.nmgassets\\.com",displayName:""},{tag:"jdl\\.nmgplatform\\.com",displayName:""},{tag:"session\\.sitelabweb\\.com",displayName:""},{tag:"247-inc\\.(com|net)",displayName:"247-Inc"},{tag:"7tiv\\.net",displayName:"7tiv"},{tag:"aboutads\\.info",displayName:"About Ads"},{tag:"everesttech\\.net",displayName:"Adobe DCO/EverestTech"},{tag:"adobedtm\\.com",displayName:"Adobetdm"},{tag:"appsflyer\\.com",displayName:"AppsFlyer"},{tag:"bby\\.us",
displayName:"BBY US"},{tag:"bazaarvoice\\.com",displayName:"Bazaarvoice"},{tag:"bestbuy\\.com",displayName:"BestBuy.com"},{tag:"bestbuy\\.ca",displayName:"BestbuyCa"},{tag:"bestbuy-jobs\\.com",displayName:"BestbuyJobs"},{tag:"bestbuytradein\\.com",displayName:"BestbuyTradin"},{tag:"bing.com",displayName:"Bing"},{tag:"noisecancelling-demo.bose.com",displayName:"Bose Demo NoiseCancelling"},{tag:"soundbar-demo.bose.com",displayName:"Bose Demo Soundbar"},{tag:"virtualtryon.bose.com",displayName:"Bose Demo VirtualTryOn"},
{tag:"confirmit\\.com",displayName:"ConfirmIt"},{tag:"contentsquare\\.(net|com)",displayName:"ContentSquare"},{tag:"curalate\\.com",displayName:"Curalate"},{tag:"demdex\\.net",displayName:"Demdex"},{tag:"dynexproducts\\.com",displayName:"Dynex"},{tag:"ensighten\\.com",displayName:"Ensighten"},{tag:"c\\.evidon\\.com",displayName:"Evidon C"},{tag:"evidon\\.com",displayName:"Evidon"},{tag:"flashtalking\\.com",displayName:"Flashtalking"},{tag:"embed.printables-stg.hp.com",displayName:"HP Printables STG"},
{tag:"embed.printables.hp.com",displayName:"HP Printables"},{tag:"impact\\.com",displayName:"Impact"},{tag:"insigniaproducts\\.com",displayName:"Insignia"},{tag:"liveclicker\\.net",displayName:"LiveClicker Root Domain"},{tag:"lcqr\\.net",displayName:"LiveClicker lcqr"},{tag:"lcmob\\.net",displayName:"LiveClicker mob"},{tag:"liveclicker\\.(com|net)",displayName:"LiveClicker"},{tag:"rlcdn\\.com",displayName:"LiveRamp"},{tag:"medianetwork\\.s3\\.amazonaws\\.com",displayName:"Medianetwork AWS"},{tag:"opinionlab\\.com",
displayName:"OpinionLab"},{tag:"(optimizely|ml-optimizely|optimizelypreview|optimizelyedit|optimizely-edge)\\.com",displayName:"Optimizely"},{tag:"optimizely\\.com",displayName:"Optimizely"},{tag:"optiversal\\.com",displayName:"Optiversal"},{tag:"paypal\\.com",displayName:"Paypal"},{tag:"progressivelp\\.com",displayName:"Progressive LP"},{tag:"rocketfishproducts\\.com",displayName:"Rocket Fish Products"},{tag:"(smarty|smartystreets)\\.com",displayName:"SmartyStreets"},{tag:"talkshop\\.live",displayName:"Talkshop"},
{tag:"verizon\\.com",displayName:"Verizon"},{tag:"virtualearth\\.net",displayName:"VirtualEarth net"},{tag:"myvisualiq\\.net",displayName:"Visual IQ"},{tag:"tapad\\.com",displayName:"VisualIQ tapad"},{tag:"visualiq\\.net",displayName:"VisualIQ"},{tag:"bbystatic\\.com",displayName:"bbystatic"},{tag:"localhost",displayName:"localhost"},{tag:"^(qceii|immersive-audio|noisecancelling-music|hometheater)-demo\\.bose\\.com$",displayName:"Bose Demos",vendorId:"",timeout:300},{tag:"(^|\\.)1worldsync\\.com$",
displayName:"1World Sync (1WS)",vendorId:"",timeout:300},{tag:"(res|api|console|player)\\.cloudinary\\.com$",displayName:"Cloudinary",vendorId:"",timeout:300},{tag:"(^|\\.)scorecardresearch\\.com$",displayName:"Scorecardresearch",vendorId:"",timeout:300}]},enablePrivacyNotice:!1,enableConsentModal:!1,showTrustedDomains:!1,enableTCF:!1,allowPerTagOptOut:!1,shouldNotAutoShowModal:!1,enableDoNotSellModal:!1,autoDoNotSellAllCategories:!1,enableRequestDataModal:!1,enableDeleteDataModal:!1,showDoNotSellOnConsentModal:!1,
showDeleteDataOnConsentModal:!1,showRequestDataOnConsentModal:!1,consentWidget:!1,enableGoogleConsent:!1,honorGlobalPrivacyControl:!1,globalPrivacyControlCategories:[],bannerConfig:{ensAcceptAll:{show:!1},ensRejectAll:{show:!1},ensOpenModal:{show:!1},ensCloseBanner:{show:!0}},includePrivacyNoticeCustomConfig:!1,includeConsentModalCustomConfig:!1,consentModalConfig:{ensConsentAcceptAll:{show:!1},ensConsentRejectAll:{show:!1},ensSaveModal:{show:!0},ensCloseModal:{show:!0}},enablePrivacyNoticeAdvancedMode:!1,
enablePrivacyConsentModalAdvancedMode:!1}]};G.ensightenOptions.publishPath&&(ensClientConfig.info.publishPath=G.ensightenOptions.publishPath);G.ensightenOptions.nexus&&(ensClientConfig.info.nexus=G.ensightenOptions.nexus,ensClientConfig.info.reporting="nexus.ensighten.com"===G.ensightenOptions.nexus||"nexus-test.ensighten.com"===G.ensightenOptions.nexus?"data.privacy.ensighten.com":G.ensightenOptions.nexus)},4149940,[4149935],645053,[645052],24);
bby_prod_gateway.bindImmediate(function(){},3260615,645055,24);
bby_prod_gateway.bindImmediate(function(){try{window.bby_prod_gateway.getServerComponent=function(){};var G=/(\?.*\bskuId=(\d+)\b|\/site\/combo\/[^\s]+\/([^\s]+))/.exec(window.location.href),Aa=G&&(G[2]||G[3]);Aa&&0<="|1032546|1093466|1093606|1093624|1117643|1117961|1118379|1118572|1118806|1120176|1120245|1154006|1154033|1219904|1336004|1336013|1337003|1339001|1403107|1406006|1408146|1585487|1585496|1628025|1628043|1654811|1713144|1713153|1793227|2398878|2577959|2577968|2577977|2577986|2577995|2578011|2623023|2623032|2623041|2623069|2672624|2673578|2673596|2673605|2673614|2673632|2692005|2802217|2802226|2802299|2816052|2850883|2850992|2851027|2851063|2851072|2871634|2954457|2969468|3035089|3035098|3035113|3142007|3230259|3440599|3498498|3507183|3508053|3556156|3556165|3556192|3684667|3684694|3689122|3689131|3689159|3700082|3700091|3700106|3700115|3700124|3700133|3700142|3700151|3700179|3700188|3700202|3726603|3726658|3726821|3726867|3726903|3875032|4124519|4161573|4300702|4320427|4320428|4320429|4320430|4320431|4320432|4320433|4320436|4320437|4352600|4352602|4352604|4393017|4393044|4517112|4615191|4734186|4741801|4741802|4957475|4987279|4992800|5014145|5016116|5028389|5060439|5092848|5143800|5143900|5144000|5144100|5144200|5228300|5228304|5228308|5228310|5234507|5235372|5298600|5362392|5362407|5477396|5535801|5536001|5579188|5614324|5614325|5614327|5614370|5614379|5619402|5619406|5619407|5685001|5705817|5705819|5707562|5709466|5709963|5710059|5710156|5711658|5734112|5788113|5788115|5788118|5789061|5789064|5789105|5797026|5797035|5797044|5797053|5797062|5797071|5806703|5806800|5806802|5808903|5808905|5808906|5828501|5853810|5869534|5869537|5869542|5985200|6062800|6078114|6095800|6097801|6097802|6097805|6158902|6168851|6176408|6176409|6198518|6205701|6205703|6205800|6205900|6205902|6214301|6214304|6220103|6239129|6239130|6239131|6239174|6257879|6257905|6265652|6271504|6271508|6277301|6277901|6280417|6297175|6299536|6299540|6301314|6301318|6301704|6304010|6305512|6305977|6316158|6316163|6316360|6316712|6316715|6316716|6318325|6318376|6318492|6318494|6318496|6318502|6321807|6321813|6321817|6321818|6321820|6321853|6321886|6323194|6323463|6327547|6330451|6332714|6334021|6334039|6334040|6334043|6334045|6334046|6334049|6334050|6334053|6334054|6334056|6334057|6334058|6334062|6334065|6334067|6334070|6334071|6334073|6334075|6335230|6335231|6337763|6338132|6338234|6339059|6339071|6343271|6343278|6343282|6343715|6346156|6346157|6346158|6346159|6348548|6348550|6350190|6350191|6350723|6350725|6350727|6350728|6351603|6351604|6351606|6352609|6352641|6352643|6352646|6352678|6352681|6352795|6353450|6353452|6353453|6353455|6353456|6354088|6354304|6354556|6354558|6354559|6354560|6354563|6357170|6358442|6358813|6361726|6361864|6361865|6361866|6361869|6361920|6361923|6361949|6361950|6361952|6361997|6361998|6364633|6364688|6370323|6370324|6370325|6370326|6370327|6370329|6377891|6380863|6380866|6385820|6386324|6388608|6388800|6388801|6391063|6391064|6395607|6398158|6398160|6401311|6401590|6401593|6401594|6401596|6401791|6401819|6402132|6402669|6402670|6402896|6402903|6402904|6403071|6404100|6404101|6404335|6405029|6408850|6411053|6411056|6411057|6411592|6411594|6411639|6414529|6416444|6416446|6416447|6416448|6416467|6416468|6416470|6416585|6418333|6420873|6420882|6422943|6423256|6423259|6423272|6424406|6424407|6426098|6426103|6426110|6426113|6426124|6426319|6426320|6426321|6426322|6426323|6426326|6426327|6426328|6426330|6426331|6426832|6426834|6427070|6427963|6428044|6428045|6428281|6428283|6428287|6428776|6430612|6434815|6434816|6438023|6444367|6444368|6444370|6444371|6444372|6444373|6444376|6444377|6444378|6447929|6447930|6447931|6447934|6448765|6448965|6448966|6448967|6458375|6458383|6458384|6458388|6458390|6459103|6459106|6459785|6460120|6460127|6460134|6460138|6460768|6461758|6461760|6461761|6461765|6461841|6462287|6462288|6462289|6462290|6462292|6462295|6462296|6462326|6464486|6464487|6464488|6464489|6464490|6464491|6464493|6464494|6464495|6464555|6466099|6467398|6467418|6467419|6467421|6467422|6469180|6469181|6469182|6469183|6469184|6469185|6469186|6469187|6469189|6469190|6469191|6469192|6469193|6469194|6469195|6469196|6469198|6469199|6469200|6469201|6469202|6469204|6469205|6469347|6469349|6469350|6469351|6469353|6469800|6470335|6470340|6470343|6470347|6471361|6473343|6473420|6473546|6473547|6473787|6473838|6473840|6473843|6473844|6474198|6474659|6475142|6475730|6475734|6475735|6477051|6477053|6477072|6477381|6477855|6477856|6477916|6477918|6477919|6478320|6478321|6478322|6478323|6479915|6479918|6481514|6481586|6481588|6481589|6481929|6481942|6481943|6481945|6481946|6481947|6481948|6482034|6482035|6482037|6482039|6483477|6483478|6483486|6483736|6483834|6483840|6483841|6484455|6484469|6485106|6485410|6485412|6485805|6485806|6485807|6485808|6485809|6485810|6485811|6485812|6485814|6485817|6485818|6485819|6485820|6485821|6485823|6485824|6485825|6485826|6485828|6485829|6485830|6485832|6485833|6485834|6485835|6485836|6485837|6485838|6485839|6485840|6485842|6485843|6485844|6486266|6486267|6486351|6486356|6486657|6487947|6487949|6487950|6487951|6487952|6487953|6487954|6488306|6488312|6488313|6488314|6488720|6489432|6489489|6489672|6489679|6490945|6491012|6491044|6491045|6491577|6491580|6492020|6492021|6492022|6492023|6492025|6492026|6492027|6492028|6492029|6492030|6492031|6492034|6492035|6492036|6492037|6492038|6492039|6492040|6492041|6492043|6492044|6492045|6492301|6492304|6493577|6494736|6495238|6495634|6498262|6498362|6498453|6498533|6498588|6498592|6498763|6498764|6498768|6498770|6498773|6498775|6498845|6500285|6500287|6500290|6500293|6501062|6501064|6501065|6501066|6501067|6501068|6501422|6501424|6501425|6501428|6501434|6501435|6501440|6501443|6501446|6501450|6501452|6501455|6501459|6501460|6501462|6501676|6501677|6501686|6501687|6501689|6501690|6501691|6501692|6501693|6501694|6501701|6501702|6502515|6502910|6502912|6502919|6503100|6504878|6504879|6506153|6507174|6507175|6507176|6507177|6507178|6507179|6507180|6507181|6507182|6507183|6507184|6508330|6508957|6509538|6509684|6509685|6509686|6509690|6509692|6509693|6509694|6510251|6510259|6510271|6510568|6510589|6510590|6510700|6511088|6511089|6511091|6511748|6511750|6511751|6511753|6511754|6512103|6513030|6513095|6513096|6515676|6516882|6516883|6516884|6516885|6517457|6517459|6517747|6517748|6518343|6518344|6518345|6518698|6518741|6518743|6520032|6520033|6520065|6520066|6520961|6521099|6521186|6523086|6523155|6523328|6523516|6523517|6523518|6523519|6523810|6523813|6523868|6524572|6524899|6524962|6524977|6525640|6525882|6526087|6526088|6526089|6526559|6527192|6527578|6528101|6528102|6528103|6528104|6528675|6528677|6528678|6528745|6530070|6530071|6530072|6530073|6530074|6530075|6530929|6531338|6532264|6532925|6532940|6534134|6534493|6535306|6535568|6537079|6537095|6538307|6538309|6538310|6538750|6538751|6538775|6539912|6540810|6540818|6540873|6540874|6541540|6541541|6542976|6542979|6542997|6543000|6543846|6543866|6543900|6544043|6544044|6544046|6544047|6544048|6544050|6544051|6544052|6544053|6544055|6544056|6544057|6544058|6544059|6544062|6544064|6544065|6544066|6544067|6544068|6544069|6544070|6544071|6544073|6544074|6544076|6544356|6544940|6544941|6544958|6545192|6545193|6546564|6546713|6546714|6546813|6547863|6547864|6547879|6547880|6549298|6549439|6550671|6551311|6551312|6551329|6556962|6556963|6557016|6557017|6557121|6557136|6557138|6557139|6557140|6557568|6557603|6558670|6558671|6559258|6560380|6560383|6560387|6560390|6560391|6560392|6560408|6560409|6560410|6560597|6561217|6561218|6561645|6561646|6562410|6562461|6562462|6562463|6562683|6562684|6564740|6568962|6571152|6571153|6571157|6571159|6571913|6571914|6571915|6571918|6571962|6572438|6572482|6572484|6572485|6572486|6574998|6575000|6576803|6577191|6577929|6578865|6583824|6583825|6584332|6584595|6584607|6584612|6584620|6584632|6584634|6584784|6584785|6585202|6585207|6585686|6588477|6588478|6589072|6589073|6589276|6589277|6589278|6589829|6589832|6589833|6593006|6593007|6593573|6593574|6593721|6593725|6594063|6594064|6594065|6595114|6595561|6595562|6595563|6595564|6599016|6599793|6602947|6602948|6602949|6602950|6604287|6604288|6604289|6604907|6604908|6611786|6611787|6611788|6611789|6611790|6611791|6611792|6611793|6611982|6611983|6617960|6617963|6619041|6622153|6622156|6624988|6630628|6631051|7016542|7185379|7192192|7193538|7193878|7194957|7194966|7354044|7753111|7753139|8526011|8526039|8526048|8526093|8607053|8681839|8682552|8884142|8884211|8884293|8884325|8885256|8927081|8932339|9085016|9085034|9085052|9085103|9085121|9085149|9085167|9085176|9085185|9085194|9085218|9155004|9249012|9394746|9569008|9614618|9614636|9639556|9639608|9656049|9656067|9656085|9656094|9690102|9768971|9790101|9850089|9919204|000799ab-afca-4c12-b3cc-6c209b4a108d|00131e28-ca82-4daa-813d-4437e5aa7dbf|0123e5dd-25f5-49a4-bccb-30d00c109e7b|0901c048-572e-4ae2-a827-3f454a7f4452|0df011d1-6014-4c71-8b22-56ad2792c4e8|102a911c-8c94-406a-a10a-3ebca9f3abdf|147e275b-0a6e-4410-99c5-0d272619a92e|167b7cc7-1410-427b-842d-e20133629576|1afecaf3-394b-4e8c-bcf2-6507ba614fa5|1b21d09e-e09c-42c5-bdc6-61d50a77150c|214843b8-6031-473a-b30e-0eb4f08699b3|23677b64-2df1-4dae-affb-bee47e2093b2|2abf1603-0f0e-4b93-8ec1-a905f6249b58|2b57eec6-829f-46db-8121-bbc0bfc06a96|2b77803d-417a-4e1e-a077-665c1a830cd0|3726b401-f568-4f9e-9282-57ec59cd34d6|39620942-54df-4781-8909-e65d38a69431|3ba58da9-340e-4a82-937f-9bad81c83331|404751ec-18b1-4c8a-8e9b-7d20919b7f92|435be8e6-6494-4559-8562-73de561889ab|4444c974-cc9c-4805-affc-2a0020143fa4|477f7614-8d6e-4453-8aaf-f58ad6427f6f|4a3801e0-aabc-4458-a553-d2249783a957|4eb4e695-26a0-44a4-8e35-c5ad3637c611|501307ae-0678-423e-ada1-4b4f0d0d8fa1|5149f072-a4c7-4be9-9aad-b0771d7bada6|53e9cb37-9147-4a0a-a997-cea6fe424194|5a844e1f-0f82-447e-a9e4-5ed98fe7a398|5bfcdcc6-6263-4620-9cee-011dd445e83a|6537da0e-0269-46ae-b580-3fc0a3a9f998|668b4ee1-7a8a-4190-8169-d7967a005518|6b2f1e37-482d-4834-a24f-a08f78d6c45a|761dfb3b-f816-4f0b-a575-ec3cebcfa798|809f2277-075d-4b34-b8b2-12760466e7fa|82f6e46f-add1-4f0b-9c2f-e79ca6f1d671|853081b9-e475-4e04-a2f5-1dad83c8938b|85810ad2-53bb-48cb-8c98-f1274c43a767|8761d303-9c35-4ea1-aff9-3f352ae2d22f|93f8a683-1788-42df-91ef-3e500dec4c4d|94f005d8-4de2-4894-aa59-03f617576a88|9c8252b4-e42a-4aad-bb5c-dc76d1af309d|a0d7a70e-554b-4e5a-ba60-d74c49569534|a1ade8b4-a429-4e38-9e84-92192f8a5169|a89c770c-d178-4dfc-a4ba-a3fc674cee37|aa5a130c-dc5b-4e4d-9372-15f66b8f6a1f|ac5c1bee-8757-40ab-b94d-8b95b5afe2c1|b229a52e-6668-4f15-b37c-9b5a2d92a97b|b2d4e074-74ff-4982-bfc0-7f87caf0dfe4|b45e7832-8e13-461b-ac67-1fc31e253dfe|bb08e318-7565-4f52-8a89-9a1dbc45a7b0|bb706af7-9397-47ab-a23c-c383979f4791|bd5b6091-dcf7-4f5e-9947-c536f526e677|bec597c7-8b4d-48fa-a77b-b9181447e2a3|c21fd2ba-ffbc-4e89-899f-4a39e023bd65|c2ae68b7-d28f-492d-b3c0-1d97a563369b|c8b32049-bad4-44ca-a395-4b12b004920c|c928ca59-a89e-4dc9-a183-cc2743563b7a|cb385cbb-cf7b-4a3c-aa79-80da4910567b|cc27b789-3a0b-4c15-bd2c-a4118e521928|cf576bab-4796-4ae2-8990-c6fa41c727de|cfdf0178-77c5-409c-8327-b5eecaba62d1|d1f4e883-e727-4404-9998-f1953f6ee204|d41e0fc5-6970-4b20-ada1-97f6ad7d4fee|d437c7f8-721c-48d2-8413-e72074307859|d4cdf190-5a68-415f-a70f-d490114c48f9|d6cb0618-239e-4600-89fa-198f003c719a|d84539e9-4d4d-425b-975c-5dc839bba036|d94118e6-ec72-4c0a-a5ed-f7140402caf8|ddab182d-d814-4eb3-a78e-0293d5fb86d5|df2a5c78-b331-4810-aacb-e6eb8dede3e1|e0f7fd90-16bf-4e31-b946-73fb52fcdf21|e1dc8e7c-b492-4571-b7c8-8540ceb1c7d9|e2bb5611-62eb-4fa3-8cf9-23dbc7ed081f|e5883b6f-fb44-4ee8-a74a-5a77b40f44ea|e6035f23-18f1-4c15-9b1b-e3b9bc3c7615|e656da81-e05f-4137-821d-9030eca3f53c|e68614f5-631a-47f7-a1cf-075c24f22ae6|ec4e9ad2-4bc9-457a-b289-63db259ed3ed|ec5f36c4-75e1-4bf9-9fd3-48c55bbeacae|edee9575-2635-4fad-9311-f580bd6890ab|f5571700-c2b3-433d-9dcd-5692524137bd|f5c1477c-032d-49c4-bf68-d69906deabfa|f6a86fbf-d8e8-44df-a279-976ba7c4cbf3|f98d167f-db0e-4ad8-8af2-873b624675da|fbf19628-5669-4f1f-b4d6-c826e7548ad8|".indexOf("|"+Aa+
"|")&&(window.e_dns="1")}catch(Za){console.log(Za)}},4149935,645052,24);bby_prod_gateway.getServerComponent(bby_prod_gateway.getExtraParams ? bby_prod_gateway.getExtraParams() : undefined);}})();